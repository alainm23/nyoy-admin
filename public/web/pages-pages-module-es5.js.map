{"version":3,"sources":["webpack:///node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-storage.js","webpack:///node_modules/@firebase/storage/dist/index.esm.js","webpack:///node_modules/algoliasearch/dist/algoliasearch.umd.js","webpack:///node_modules/firebase/storage/dist/index.esm.js","webpack:///src/app/pages/almacen/almacen.component.ts","webpack:///src/app/pages/almacen/almacen.component.html","webpack:///src/app/pages/configuracion/configuracion.component.ts","webpack:///src/app/pages/configuracion/configuracion.component.html","webpack:///src/app/pages/empresa-cartas/empresa-cartas.component.ts","webpack:///src/app/pages/empresa-cartas/empresa-cartas.component.html","webpack:///src/app/pages/estadisticas/estadisticas.component.html","webpack:///src/app/pages/estadisticas/estadisticas.component.ts","webpack:///src/app/pages/gestion-cambios-devoluciones/gestion-cambios-devoluciones.component.ts","webpack:///src/app/pages/gestion-cambios-devoluciones/gestion-cambios-devoluciones.component.html","webpack:///src/app/pages/gestionar-categorias/gestionar-categorias.component.ts","webpack:///src/app/pages/gestionar-categorias/gestionar-categorias.component.html","webpack:///src/app/pages/gestionar-marcas/gestionar-marcas.component.ts","webpack:///src/app/pages/gestionar-marcas/gestionar-marcas.component.html","webpack:///src/app/pages/gestionar-mesas/gestionar-mesas.component.ts","webpack:///src/app/pages/gestionar-mesas/gestionar-mesas.component.html","webpack:///src/app/pages/gestionar-productos/gestionar-productos.component.ts","webpack:///src/app/pages/gestionar-productos/gestionar-productos.component.html","webpack:///src/app/pages/gestionar-restaurante-mesas/gestionar-restaurante-mesas.component.ts","webpack:///src/app/pages/gestionar-restaurante-mesas/gestionar-restaurante-mesas.component.html","webpack:///src/app/pages/gestionar-sub-categorias/gestionar-sub-categorias.component.ts","webpack:///src/app/pages/gestionar-sub-categorias/gestionar-sub-categorias.component.html","webpack:///src/app/pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component.ts","webpack:///src/app/pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component.html","webpack:///src/app/pages/gestionar-ventas/gestionar-ventas.component.ts","webpack:///src/app/pages/gestionar-ventas/gestionar-ventas.component.html","webpack:///src/app/pages/home/home.component.ts","webpack:///src/app/pages/home/home.component.html","webpack:///src/app/pages/insumos-categoria/insumos-categoria.component.ts","webpack:///src/app/pages/insumos-categoria/insumos-categoria.component.html","webpack:///src/app/pages/insumos/insumos.component.ts","webpack:///src/app/pages/insumos/insumos.component.html","webpack:///src/app/pages/menu-elementos/menu-elementos.component.ts","webpack:///src/app/pages/menu-elementos/menu-elementos.component.html","webpack:///src/app/pages/menu/menu.component.ts","webpack:///src/app/pages/menu/menu.component.html","webpack:///src/app/pages/miscellaneous/miscellaneous-routing.module.ts","webpack:///src/app/pages/miscellaneous/miscellaneous.component.ts","webpack:///src/app/pages/miscellaneous/miscellaneous.module.ts","webpack:///src/app/pages/miscellaneous/not-found/not-found.component.ts","webpack:///src/app/pages/miscellaneous/not-found/not-found.component.html","webpack:///src/app/pages/pages-routing.module.ts","webpack:///src/app/pages/pages.component.ts","webpack:///src/app/pages/pages.module.ts","webpack:///src/app/pages/pedidos-historial/pedidos-historial.component.ts","webpack:///src/app/pages/pedidos-historial/pedidos-historial.component.html","webpack:///src/app/pages/pedidos/pedidos.component.ts","webpack:///src/app/pages/pedidos/pedidos.component.html","webpack:///src/app/pages/reportes-empresa-ventas/reportes-empresa-ventas.component.ts","webpack:///src/app/pages/reportes-empresa-ventas/reportes-empresa-ventas.component.html","webpack:///src/app/pages/reportes-venta/reportes-venta.component.ts","webpack:///src/app/pages/reportes-venta/reportes-venta.component.html","webpack:///src/app/pages/usuarios/usuarios.component.ts","webpack:///src/app/pages/usuarios/usuarios.component.html","webpack:///src/app/services/stock.service.ts"],"names":["fromTask","task","subscriber","progress","snap","next","error","e","complete","on","cancel","AngularFireUploadTask","createUploadTask","inner$","then","bind","catch","pause","resume","snapshotChanges","percentageChanges","pipe","s","bytesTransferred","totalBytes","AngularFireStorageReference","createStorageRef","ref","schedulers","keepUnstableUntilFirst","getDownloadURL","undefined","outsideAngular","getMetadata","delete","child","path","updateMetadata","meta","put","data","metadata","putString","format","listAll","BUCKET","AngularFireStorage","options","nameOrConfig","storageBucket","platformId","zone","storage","runOutsideAngular","app","storageRef","ɵfac","AngularFireStorage_Factory","t","ctorParameters","type","decorators","args","Object","ɵprov","factory","token","providedIn","AngularFireStorageModule","ɵmod","ɵinj","AngularFireStorageModule_Factory","providers","DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","DEFAULT_MAX_OPERATION_RETRY_TIME","DEFAULT_MAX_UPLOAD_RETRY_TIME","MIN_SAFE_INTEGER","FirebaseStorageError","code","message","code_","prependCode","message_","serverResponse_","name_","prototype","codeProp","codeEquals","serverResponseProp","setServerResponseProp","serverResponse","defineProperty","get","enumerable","configurable","Code","UNKNOWN","OBJECT_NOT_FOUND","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","QUOTA_EXCEEDED","UNAUTHENTICATED","UNAUTHORIZED","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","CANCELED","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","CANNOT_SLICE_BLOB","SERVER_FILE_WRONG_SIZE","NO_DOWNLOAD_URL","INVALID_ARGUMENT","INVALID_ARGUMENT_COUNT","APP_DELETED","INVALID_ROOT_OPERATION","INVALID_FORMAT","INTERNAL_ERROR","unknown","objectNotFound","quotaExceeded","bucket","unauthenticated","unauthorized","retryLimitExceeded","canceled","invalidUrl","url","invalidDefaultBucket","cannotSliceBlob","serverFileWrongSize","noDownloadURL","invalidArgument","index","fnName","invalidArgumentCount","argMin","argMax","real","countPart","plural","appDeleted","invalidRootOperation","name","invalidFormat","internalError","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","formatValidator","stringFormat","StringData","contentType","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataURLBytes_","dataURLContentType_","value","b","i","length","c","charCodeAt","push","valid","hi","lo","Uint8Array","percentEncodedBytes_","decoded","decodeURIComponent","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","DataURLParts","dataURL","base64","matches","match","middle","endsWith","substring","rest","dataUrl","parts","end","longEnough","TaskEvent","STATE_CHANGED","InternalTaskState","RUNNING","PAUSING","PAUSED","SUCCESS","CANCELING","ERROR","TaskState","taskStateFromInternalTaskState","state","isDef","p","isJustDef","isFunction","isObject","isNonNullObject","isNonArrayObject","Array","isArray","isString","String","isInteger","isNumber","Number","isNativeBlob","isNativeBlobDefined","Blob","ErrorCode","NetworkXhrIo","_this","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","Promise","resolve","addEventListener","ABORT","NETWORK_ERROR","send","method","body","headers","open","key","hasOwnProperty","setRequestHeader","toString","getErrorCode","getStatus","status","getResponseText","responseText","abort","getResponseHeader","header","addUploadProgressListener","listener","upload","removeUploadProgressListener","removeEventListener","XhrIoPool","createXhrIo","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","getBlob","_i","arguments","bb","append","Error","sliceBlob","blob","start","webkitSlice","mozSlice","slice","FbsBlob","elideCopy","size","blobType","data_","ArrayBuffer","byteLength","set","size_","type_","startByte","endByte","realBlob","sliced","buffer","blobby","map","val","apply","uint8Arrays","finalLength_1","forEach","merged_1","index_1","uploadData","Location","path_","fullServerUrl","encode","encodeURIComponent","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","location","bucketDomain","gsModify","loc","charAt","gsPath","gsRegex","RegExp","gsIndices","httpModify","version","firebaseStorageHost","firebaseStoragePath","firebaseStorageRegExp","firebaseStorageIndices","cloudStorageHost","cloudStoragePath","cloudStorageRegExp","cloudStorageIndices","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","jsonObjectOrNull","obj","JSON","parse","parent","lastIndexOf","newPath","childPath","canonicalChildPath","split","filter","component","join","lastComponent","makeUrl","urlPart","makeQueryString","params","queryPart","nextPart","noXform_","Mapping","server","local","writable","xform","mappings_","xformPath","fullPath","getMappings","mappings","mappingsXformPath","_metadata","nameMapping","xformSize","sizeMapping","addRef","authWrapper","generateRef","makeStorageReference","fromResource","resource","len","mapping","fromResourceString","resourceString","downloadUrlFromResourceString","tokens","tokensList","urls","base","queryString","alt","toResourceString","stringify","metadataValidator","MAX_RESULTS_KEY","MAX_MAX_RESULTS","PAGE_TOKEN_KEY","PREFIXES_KEY","ITEMS_KEY","fromBackendResponse","listResult","prefixes","items","nextPageToken","_a","pathWithoutTrailingSlash","reference","_b","_c","item","fromResponseString","listOptionsValidator","RequestInfo","handler","timeout","urlParams","errorHandler","progressCallback","successCodes","additionalRetryCodes","handlerCheck","cndn","metadataHandler","xhr","text","listHandler","downloadUrlHandler","sharedErrorHandler","err","newErr","objectErrorHandler","shared","maxOperationRetryTime","requestInfo","list","delimiter","pageToken","maxResults","isRoot","getDownloadUrl","deleteObject","_xhr","_text","determineContentType_","metadataForUpload_","metadataClone","assign","multipartUpload","genBoundary","str","Math","random","boundary","metadata_","metadataString","preBlobPart","postBlobPart","maxUploadRetryTime","ResumableUploadStatus","current","total","finalized","checkResumeHeader_","allowed","allowedStatus","createResumableUpload","metadataForUpload","getResumableUploadStatus","sizeString","isNaN","resumableUploadChunkSize","continueResumableUpload","chunkSize","status_","bytesLeft","bytesToUpload","min","uploadCommand","uploadStatus","newCurrent","Observer","nextOrObserver","asFunctions","observer","UploadTaskSnapshot","validate","specs","passed","minArgs","maxArgs","optional","validLength","validator","ArgSpec","self","and_","v1","v2","stringSpec","stringValidator","chainedValidator","uploadDataSpec","metadataSpec","listOptionSpec","nonNegativeNumberSpec","looseObjectSpec","isLooseObjectValidator","isLooseObject","nullFunctionSpec","async","f","argsToForward","UploadTask","transferred_","needToFetchStatus_","needToFetchMetadata_","observers_","error_","uploadUrl_","request_","chunkMultiplier_","resolve_","reject_","ref_","authWrapper_","location_","blob_","resumable_","shouldDoResumable_","state_","errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","promise_","reject","start_","makeProgressCallback_","sizeBefore","loaded","updateProgress_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","callback","getAuthToken","authToken","createRequest","makeRequest","getPromise","statusRequest","uploadRequest","newStatus","increaseMultiplier_","currentSize","metadataRequest","multipartRequest","transferred","old","notifyObservers_","wasPaused","externalState","completed","typeValidator","nextOrObserverMessage","nextValidator","observerValidator","nextOrObserverValidator","anyDefined","makeBinder","binder","addObserver_","removeObserver_","binderNextOrObserverValidator","binderSpecs","typeOnly","onFulfilled","onRejected","notifyObserver_","splice","finishPromise_","observers","triggered","snapshot","toCall","Reference","newRef","service","throwIfRoot_","accumulator","listAllHelper","opt","nextPage","label","sent","op","FailRequest","_appDelete","RequestMap","Map","id","addRequest","request","clear","v","AuthWrapper","authProvider","maker","requestMaker","pool","bucket_","appId_","deleted_","app_","extractBucket_","appId","authProvider_","storageRefMaker_","requestMaker_","pool_","service_","maxOperationRetryTime_","maxUploadRetryTime_","requestMap_","config","auth","getImmediate","getToken","response","accessToken","deleteApp","setMaxUploadRetryTime","time","setMaxOperationRetryTime","waitSeconds","timeoutId","hitTimeout","cancelState","triggeredCallback","triggerCallback","callWithDelay","millis","setTimeout","success","call","mustStop","waitMillis","stopped","stop","wasTimeout","clearTimeout","NetworkRequest","errorCallback","pendingXhr_","backoffId_","canceled_","appDelete_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","doTheRequest","backoffCallback","RequestEndStatus","progressListener","progressEvent","lengthComputable","hitServer","isRetryStatusCode_","wasCanceled","successCode","backoffDone","requestWentThrough","wasSuccessCode","result","appDelete","isFiveHundredCode","extraRetryCodes","isExtraRetryCode","isRequestSpecificRetryCode","addAuthHeader_","addVersionHeader_","SDK_VERSION","addGmpidHeader_","Service","authWrapperBucket","internals_","ServiceInternals","test","refFromURL","STORAGE_TYPE","container","getProvider","registerStorage","instance","namespaceExports","Storage","INTERNAL","registerComponent","setServiceProps","setMultipleInstances","registerVersion","module","exports","r","keys","getOwnPropertySymbols","n","getOwnPropertyDescriptor","a","getOwnPropertyDescriptors","defineProperties","o","propertyIsEnumerable","Symbol","iterator","u","done","return","TypeError","from","concat","localStorage","window","getItem","miss","all","setItem","removeItem","caches","shift","serializable","m","WithinHeaders","queryParameters","WithinQueryParameters","d","wait","l","floor","h","y","entries","cacheable","g","Read","Write","Any","P","O","lastUpdate","Date","now","j","protocol","accept","w","I","x","q","D","getTimeout","statelessHosts","S","toLowerCase","userAgent","pop","transporterStackTrace","A","N","connectTimeout","timeouts","connect","responseTimeout","host","triesLeft","onSucess","content","onRetry","isTimedOut","logger","info","E","hostsCache","onFail","requester","reverse","k","requestsCache","responsesCache","hosts","read","mappedRequestOptions","transporter","write","T","add","segment","R","substr","C","U","J","z","F","H","M","K","batch","hits","shouldStop","cursor","page","W","acl","Y","B","cluster","Q","users","G","operation","destination","re","methods","waitTask","et","taskID","V","scope","rt","Rules","L","Settings","_","Synonyms","X","Z","$","ee","te","retrieveMappings","getClusters","indexName","ne","ae","oe","ue","ie","se","requests","ce","fe","de","facetName","facetQuery","searchForFacetValues","Xe","le","pe","he","query","me","every","ye","ge","ve","hitsPerPage","Ye","_highlightResult","be","Ze","Pe","batchSize","taskIDs","objectIDs","action","Oe","je","forwardToReplicas","we","Ie","xe","qe","De","objectID","tt","DeleteObject","Se","ke","Te","Ue","Ne","paginate","_e","object","position","parseInt","nbPages","Re","Ae","Ee","attributesToRetrieve","Ce","getVersion","Je","ze","Fe","createIfNotExists","PartialUpdateObject","PartialUpdateObjectNoCreate","He","safe","autoGenerateObjectIDIfNotExist","Be","Me","Ge","clearExistingRules","Ke","Le","replaceExistingSynonyms","We","AddObject","UpdateObject","Qe","Ve","$e","DeleteIndex","ClearIndex","nt","at","ot","ut","apiKey","onreadystatechange","readyState","OPENED","onerror","onload","debug","console","authMode","addAlgoliaAgent","clearCache","search","multipleBatch","multipleGetObjects","multipleQueries","copyIndex","copySettings","copySynonyms","copyRules","moveIndex","listIndices","getLogs","listClusters","multipleSearchForFacetValues","getApiKey","addApiKey","listApiKeys","updateApiKey","deleteApiKey","restoreApiKey","assignUserID","assignUserIDs","getUserID","searchUserIDs","listUserIDs","getTopUserIDs","removeUserID","hasPendingMappings","initIndex","getObject","getObjects","saveObject","saveObjects","setSettings","getSettings","partialUpdateObject","partialUpdateObjects","deleteObjects","deleteBy","clearObjects","browseObjects","getObjectPosition","findObject","exists","saveSynonym","saveSynonyms","getSynonym","searchSynonyms","browseSynonyms","deleteSynonym","clearSynonyms","replaceAllObjects","replaceAllSynonyms","searchRules","getRule","deleteRule","saveRule","saveRules","replaceAllRules","browseRules","clearRules","initAnalytics","region","addABTest","getABTest","getABTests","stopABTest","deleteABTest","initRecommendation","getPersonalizationStrategy","setPersonalizationStrategy","AlmacenComponent","dialogService","route","database","dataSourceBuilder","_items","para_agregar","elementos","insumos","_insumos","loading","search_text","elemento_filtro","vista","customColumn","defaultColumns","allColumns","sortDirection","NONE","form","fecha","required","anio","mes","dia","tipo_comprobante","nro_comprobante","get_insumos","subscribe","res","get_empresa_insumos","paramMap","log","dataSource","create","format_list","sortRequest","sortColumn","column","direction","returned","insumo","nombre","stock","unidad_medida","ofrecer_en_menu","cantidad_comprada","valid_value","monto_comprado","minWithForMultipleColumns","nextColumnStep","dialog","editar","createId","empresa_id","add_empresa_insumo","close","reset","patchValue","context","confirm","delete_insumo","event","cantidad","precio","insumo_id","controls","setValue","add_ingresos_insumo_empresa","update_empresa_insumo","selector","templateUrl","styleUrls","ConfiguracionComponent","toastrService","delivery_limite","delivery_precio","local_latitud","local_longitud","get_preferencias","update_preferencias","show","guardar","EmpresaCartasComponent","af_storage","almacen_insumos","menu_elementos","menus","menus_dia","all_platos","combo_list","tipo_promocion","_para_agregar","promociones","avatar_preview","file","file_menu","file_combo","plato_editar","plato_selected","tipo_carta","orden","habilitado","form_menu_dia","carta_id","elemento_menu_id","menu_id","menu_nombre","form_plato","imagen","resumen","descripcion","form_promocion","descuento","plato_id","form_promocion_combo","get_empresa_by_id","empresa","get_cartas_by_empresa","get_empresa_insumos_venta","get_menu_elementos","get_menus","get_menus_dia","get_all_platos","get_all_promociones","setValidators","enable","disable","filePath","fileRef","toPromise","downloadURL","update_carta","add_carta","uploadIMenumageAsPromise","delete_carta","carta","menu","tipo","_menus","menu_existe","lista","find","menu_elemento","insumo_almacen","add_menu_dia","cancelar","delete_menu_dia","target","files","getBase64","reader","FileReader","readAsDataURL","update_plato","uploadImageAsPromise","add_plato","plato","get_plato_insumos_by_plato_id","p_i","add_promocion","precio_total","platos","uploadComboImageAsPromise","insumo_selected","delete_promocion","delete_plato","delete_carta_menu","promocion","delete_carta_extra","get_promociones_by_carta","delete_carta_promocion","EstadisticasComponent","empresas","meses","empresas_map","gastos_map","ingresos_map","tipo_reporte","tipo_filtro","fecha_seleccionada","mes_seleccionado","anio_seleccionado","ventas_total","compras_total","get_empresas","empresa_seleccionada","mostrar_estadisticas","get_ingresos_insumo_empresa_dia","has","get_pedidos_platos_dia_dia","pedido","plato_nombre","promocion_tipo","element","get_restaurante_pedidos_dia","validar_valor","get_ingresos_insumo_empresa_mes","get_pedidos_platos_dia_mes","get_restaurante_pedidos_mes","toUpperCase","tipo_reporte_changed","GestionCambiosDevolucionesComponent","es_usuario_valido","pos","instancias","codigo","venta","productos","lista_devolucion","email","password","usuario","get_usuarios_by_tipo","validar_admin_is_valid","alert","pos_seleccionado","get_venta_by_pos","round","producto","get_total_format","checked","devolucion","get_total_devolucion","hora","add_nota_credito","GestionarCategoriasComponent","get_tienda_categorias","cantidad_productos","pattern","update_tienda_categoria","add_tienda_categoria","registrar_dialog","updateSort","GestionarMarcasComponent","get_tienda_marcas","update_tienda_marca","add_tienda_marca","GestionarMesasComponent","is_loading","show_nuevo","is_nuevo_loading","nuevo","subscribe_01","get_mesas_empresas","unsubscribe","opcion","delete_mesa","edit","document","getElementById","update_mesa","fecha_agregada","toISOString","add_mesa","agregar_nuevo","GestionarProductosComponent","categorias","subcategorias","_subcategorias","marcas","productos_para_registrar","categorias_subscribe","marcas_subscribe","subcategorias_subscribe","sku","categoria_id","subcategoria_id","marca_id","precio_compra","precio_venta","medida","form_movimiento","selectedItem","categoriaSelected","check_loading","get_tienda_sub_categorias","get_tienda_productos","update_tienda_producto","add_tienda_producto","onCategoriaSelected","get_tienda_sub_categorias_by_categoria","producto_seleccionado","add_ingresos_tieda_producto","get_tienda_productos_by_categoria","open_registrar_movimiento_dialog","GestionarRestauranteMesasComponent","GestionarSubCategoriasComponent","Nombre","Categorias","Acciones","update_tienda_sub_categoria","add_tienda_sub_categoria","delete_insumo_categoria","form_venta","GestionarVentasRestauranteComponent","empresa_pos","instancia_actual","caja_abierta","mesa_seleccionada","cartas","mesas","cartas_loading","mesas_loading","form_abrir_caja","monto_apertura","admi_correo","admi_password","importe","tipo_pago","tarjeta_cod_ref","cliente_nombre","authState","get_usuario_by_id","uid","get_data","init_stock","get_restaurante_venta_data","get_menu_elementos_by_carta","abri_caja_data","tmp_id","fecha_apertura","hora_apertura","add_post_empresa_data","showToast","mensaje","preventDuplicates","iconConfig","icon","pack","mesa","disponible","mesa_id","estado","get_restaurante_pedido_by_id","pedido_id","cantidad_elementos_menu_tmp","add_menu_dia_carrito","get_plato_by_id","check_valid","update_restaurante_pedido","menus_cartas","calcular_precio_por_carta","get_precio_menu_carta","values","get_cantidad_elementos_menu_tmp","menus_completos","calcular_menus_completos","mayor","completo","carta_precio","remove_menu","get_platos_format","registrar_restaurante_pedido","clean_cache","get_total","calcular_cambio","invalid","updateValueAndValidity","monto_total","finalizar_restaurante_pedido","menu_dia","validar_estado","check_menu","get_menu_elemento_precio","verificar_agregar_carrito_promocion","get_restaurante_ventas_instancia","ventas","cerrar_caja_post_empresa","algoliasearch","GestionarVentasComponent","search_loading","ver_ventas","productos_busqueda","caja_data","cajero_actual","cajeros","imprimir_ticket","client","algolia","algolia_index","get_pos_data","cajero_id","input","nativeElement","Boolean","trim","onSearchType","get_producto_by_id","focus","producto_id","selectProducto","descartar","cajero_correo","cajero_password","correo","fecha_entrada","hora_entrada","add_post_data","pos_id","pos_nombre","cajero_tmp_id","cajero_nombre","instancia_id","registrar_venta","get_ventas_por_client_tmp","cambiar_caja_data","update_post_data","max","get_ventas_total","cerrar_pos","prompt","get_nota_credito","nota_c","es_producto","descartar_confirm","agregar_nota_credito","cobrar_confirmar","HomeComponent","afs","linea_comida","logotipo","telefono","color","update_empresa","add_empresa","delete_empresa","rgba","hexToRgb","hex","bigint","collection","valueChanges","jsonContent","firestore","doc","commit","InsumosCategoriaComponent","get_insumos_categoria","update_insumo_categoria","add_insumo_categoria","InsumosComponent","Unidad","Precio","Categoria","categoria","update_insumo","add_insumo","eliminar_insumo","MenuElementosComponent","Orden","update_menu_elemento","add_menu_elemento","delete_menu_elemento","MenuComponent","Menu","update_menu","add_menu","delete_menu","routes","children","MiscellaneousRoutingModule","forChild","imports","MiscellaneousComponent","template","MiscellaneousModule","declarations","NotFoundComponent","menuService","navigateHome","goToHome","redirectTo","pathMatch","PagesRoutingModule","PagesComponent","PagesModule","PedidosHistorialComponent","noti","repartidores","repartidor_seleccionado","get_pedidos","get_repartidores","hora_entrega","diff","tipo_pedido","push_data","titulo","detalle","mode","token_id","clave","asignar_pedido_repartidor","send_notification","usuario_token","update_estado_pedidos","cancelar_pedido","confirmar_recojo","PedidosComponent","get_repartidores_libres","ReportesEmpresaVentasComponent","reporte_tipo","empresa_reporte","instancia_seleccionada","day","padLeft","getDate","month","getMonth","year","getFullYear","get_instancias_por_restaurante_venta","ReportesVentaComponent","cajero_seleccionado","_lista","lista_respuesta","mapa_respuesta","hora_inicio","hora_fin","get_ventas_total_subscribe","get_cajeros_por_pos","validar_cajero","validar_fecha","validar_item","update","s_date","f_date","tiempo_valid","isValid","isBetween","limpiar","submit","UsuariosComponent","usuarios","direccion","get_usuarios","tipo_usuario","update_usuario","add_usuario","delete_usuario","StockService","empresas_insumos","carrito_insumos_tmp","carrito_menus_tmp","elementos_menu","get_empresa_insumos_ventas","get_menus_dia_stock","get_menus_elementos","pedidos","pedidos_acuales","check_elemento","check_elemento_menu"],"mappings":"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","file":"pages-pages-module-es5.js","sourcesContent":["import { Observable, of, from } from 'rxjs';\nimport { map, observeOn, switchMap } from 'rxjs/operators';\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, ɵɵdefineInjectable, ɵɵinject, NgModule } from '@angular/core';\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire';\nimport 'firebase/storage';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} task\n * @return {?}\n */\nimport * as ɵngcc0 from '@angular/core';\nfunction fromTask(task) {\n    return new Observable((/**\n     * @param {?} subscriber\n     * @return {?}\n     */\n    subscriber => {\n        /** @type {?} */\n        const progress = (/**\n         * @param {?} snap\n         * @return {?}\n         */\n        (snap) => subscriber.next(snap));\n        /** @type {?} */\n        const error = (/**\n         * @param {?} e\n         * @return {?}\n         */\n        e => subscriber.error(e));\n        /** @type {?} */\n        const complete = (/**\n         * @return {?}\n         */\n        () => subscriber.complete());\n        task.on('state_changed', progress, error, complete);\n        return (/**\n         * @return {?}\n         */\n        () => task.cancel());\n    }));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n */\nfunction AngularFireUploadTask() { }\nif (false) {\n    /** @type {?} */\n    AngularFireUploadTask.prototype.task;\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.snapshotChanges = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.percentageChanges = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.pause = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.cancel = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.resume = function () { };\n    /**\n     * @param {?=} onFulfilled\n     * @param {?=} onRejected\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.then = function (onFulfilled, onRejected) { };\n    /**\n     * @param {?} onRejected\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.catch = function (onRejected) { };\n}\n/**\n * Create an AngularFireUploadTask from a regular UploadTask from the Storage SDK.\n * This method creates an observable of the upload and returns on object that provides\n * multiple methods for controlling and monitoring the file upload.\n * @param {?} task\n * @return {?}\n */\nfunction createUploadTask(task) {\n    /** @type {?} */\n    const inner$ = fromTask(task);\n    return {\n        task: task,\n        then: task.then.bind(task),\n        catch: task.catch.bind(task),\n        pause: task.pause.bind(task),\n        cancel: task.cancel.bind(task),\n        resume: task.resume.bind(task),\n        snapshotChanges: (/**\n         * @return {?}\n         */\n        () => inner$),\n        percentageChanges: (/**\n         * @return {?}\n         */\n        () => inner$.pipe(map((/**\n         * @param {?} s\n         * @return {?}\n         */\n        s => s.bytesTransferred / s.totalBytes * 100))))\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n */\nfunction AngularFireStorageReference() { }\nif (false) {\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.getDownloadURL = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.getMetadata = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.delete = function () { };\n    /**\n     * @param {?} path\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.child = function (path) { };\n    /**\n     * @param {?} meta\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.updateMetadata = function (meta) { };\n    /**\n     * @param {?} data\n     * @param {?=} metadata\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.put = function (data, metadata) { };\n    /**\n     * @param {?} data\n     * @param {?=} format\n     * @param {?=} metadata\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.putString = function (data, format, metadata) { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.listAll = function () { };\n}\n/**\n * Create an AngularFire wrapped Storage Reference. This object\n * creates observable methods from promise based methods.\n * @param {?} ref\n * @param {?} schedulers\n * @param {?} keepUnstableUntilFirst\n * @return {?}\n */\nfunction createStorageRef(ref, schedulers, keepUnstableUntilFirst) {\n    return {\n        getDownloadURL: (/**\n         * @return {?}\n         */\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\n         * @return {?}\n         */\n        () => ref.getDownloadURL())), keepUnstableUntilFirst)),\n        getMetadata: (/**\n         * @return {?}\n         */\n        () => of().pipe(observeOn(schedulers.outsideAngular), switchMap((/**\n         * @return {?}\n         */\n        () => ref.getMetadata())), keepUnstableUntilFirst)),\n        delete: (/**\n         * @return {?}\n         */\n        () => from(ref.delete())),\n        child: (/**\n         * @param {?} path\n         * @return {?}\n         */\n        (path) => createStorageRef(ref.child(path), schedulers, keepUnstableUntilFirst)),\n        updateMetadata: (/**\n         * @param {?} meta\n         * @return {?}\n         */\n        (meta) => from(ref.updateMetadata(meta))),\n        put: (/**\n         * @param {?} data\n         * @param {?=} metadata\n         * @return {?}\n         */\n        (data, metadata) => {\n            /** @type {?} */\n            const task = ref.put(data, metadata);\n            return createUploadTask(task);\n        }),\n        putString: (/**\n         * @param {?} data\n         * @param {?=} format\n         * @param {?=} metadata\n         * @return {?}\n         */\n        (data, format, metadata) => {\n            /** @type {?} */\n            const task = ref.putString(data, format, metadata);\n            return createUploadTask(task);\n        }),\n        listAll: (/**\n         * @return {?}\n         */\n        () => from(ref.listAll()))\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nconst BUCKET = new InjectionToken('angularfire2.storageBucket');\n/**\n * AngularFireStorage Service\n *\n * This service is the main entry point for this feature module. It provides\n * an API for uploading and downloading binary files from Cloud Storage for\n * Firebase.\n */\nclass AngularFireStorage {\n    /**\n     * @param {?} options\n     * @param {?} nameOrConfig\n     * @param {?} storageBucket\n     * @param {?} platformId\n     * @param {?} zone\n     */\n    constructor(options, nameOrConfig, storageBucket, platformId, zone) {\n        this.schedulers = new ɵAngularFireSchedulers(zone);\n        this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers, platformId);\n        this.storage = zone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const app = ɵfirebaseAppFactory(options, zone, nameOrConfig);\n            return app.storage(storageBucket || undefined);\n        }));\n    }\n    /**\n     * @param {?} path\n     * @return {?}\n     */\n    ref(path) {\n        return createStorageRef(this.storage.ref(path), this.schedulers, this.keepUnstableUntilFirst);\n    }\n    /**\n     * @param {?} path\n     * @param {?} data\n     * @param {?=} metadata\n     * @return {?}\n     */\n    upload(path, data, metadata) {\n        /** @type {?} */\n        const storageRef = this.storage.ref(path);\n        /** @type {?} */\n        const ref = createStorageRef(storageRef, this.schedulers, this.keepUnstableUntilFirst);\n        return ref.put(data, metadata);\n    }\n}\nAngularFireStorage.ɵfac = function AngularFireStorage_Factory(t) { return new (t || AngularFireStorage)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(BUCKET, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone)); };\n/** @nocollapse */\nAngularFireStorage.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [FIREBASE_OPTIONS,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [FIREBASE_APP_NAME,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [BUCKET,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: NgZone }\n];\n/** @nocollapse */ AngularFireStorage.ɵprov = ɵɵdefineInjectable({ factory: function AngularFireStorage_Factory() { return new AngularFireStorage(ɵɵinject(FIREBASE_OPTIONS), ɵɵinject(FIREBASE_APP_NAME, 8), ɵɵinject(BUCKET, 8), ɵɵinject(PLATFORM_ID), ɵɵinject(NgZone)); }, token: AngularFireStorage, providedIn: \"any\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorage, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'any'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [FIREBASE_OPTIONS]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [FIREBASE_APP_NAME]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [BUCKET]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: ɵngcc0.NgZone }]; }, null); })();\nif (false) {\n    /** @type {?} */\n    AngularFireStorage.prototype.storage;\n    /** @type {?} */\n    AngularFireStorage.prototype.keepUnstableUntilFirst;\n    /** @type {?} */\n    AngularFireStorage.prototype.schedulers;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass AngularFireStorageModule {\n}\nAngularFireStorageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireStorageModule });\nAngularFireStorageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireStorageModule_Factory(t) { return new (t || AngularFireStorageModule)(); }, providers: [AngularFireStorage] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorageModule, [{\n        type: NgModule,\n        args: [{\n                providers: [AngularFireStorage]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { AngularFireStorage, AngularFireStorageModule, BUCKET, createStorageRef, createUploadTask, fromTask };\n\n//# sourceMappingURL=angular-fire-storage.js.map","import firebase from '@firebase/app';\nimport { __awaiter, __generator, __spreadArrays } from 'tslib';\nimport { Component } from '@firebase/component';\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n/**\r\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\r\n * enough for us to use it directly.\r\n */\r\nvar MIN_SAFE_INTEGER = -9007199254740991;\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            return this.message_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw 'Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].';\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isInteger(p) {\r\n    return isNumber(p) && Number.isInteger(p);\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(headers)) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (isDef(body)) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var firebaseStorageHost = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var firebaseStoragePath = '(/([^?#]*).*)?$';\r\n        var firebaseStorageRegExp = new RegExp(\"^https?://\" + firebaseStorageHost + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + firebaseStoragePath, 'i');\r\n        var firebaseStorageIndices = { bucket: 1, path: 3 };\r\n        var cloudStorageHost = '(?:storage.googleapis.com|storage.cloud.google.com)';\r\n        var cloudStoragePath = '([^?#]*)';\r\n        var cloudStorageRegExp = new RegExp(\"^https?://\" + cloudStorageHost + \"/\" + bucketDomain + \"/\" + cloudStoragePath, 'i');\r\n        var cloudStorageIndices = { bucket: 1, path: 2 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            {\r\n                regex: firebaseStorageRegExp,\r\n                indices: firebaseStorageIndices,\r\n                postModify: httpModify\r\n            },\r\n            {\r\n                regex: cloudStorageRegExp,\r\n                indices: cloudStorageIndices,\r\n                postModify: httpModify\r\n            }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            // @ts-ignore TODO: remove once typescript is upgraded to 3.5.x\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (isDef(size)) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, authWrapper) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return authWrapper.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(authWrapper, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, authWrapper);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(authWrapper, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(authWrapper, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        if (p.hasOwnProperty(key)) {\r\n            var val = p[key];\r\n            if (key === 'customMetadata') {\r\n                if (!isObject(val)) {\r\n                    throw 'Expected object for \\'customMetadata\\' mapping.';\r\n                }\r\n            }\r\n            else {\r\n                if (isNonNullObject(val)) {\r\n                    throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_RESULTS_KEY = 'maxResults';\r\nvar MAX_MAX_RESULTS = 1000;\r\nvar PAGE_TOKEN_KEY = 'pageToken';\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(authWrapper, bucket, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(authWrapper, bucket, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(authWrapper, bucket, resource);\r\n}\r\nfunction listOptionsValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected ListOptions object.';\r\n    }\r\n    for (var key in p) {\r\n        if (key === MAX_RESULTS_KEY) {\r\n            if (!isInteger(p[MAX_RESULTS_KEY]) ||\r\n                p[MAX_RESULTS_KEY] <= 0) {\r\n                throw 'Expected maxResults to be a positive number.';\r\n            }\r\n            if (p[MAX_RESULTS_KEY] > 1000) {\r\n                throw \"Expected maxResults to be less than or equal to \" + MAX_MAX_RESULTS + \".\";\r\n            }\r\n        }\r\n        else if (key === PAGE_TOKEN_KEY) {\r\n            if (p[PAGE_TOKEN_KEY] && !isString(p[PAGE_TOKEN_KEY])) {\r\n                throw 'Expected pageToken to be string.';\r\n            }\r\n        }\r\n        else {\r\n            throw 'Unknown option: ' + key;\r\n        }\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(authWrapper, bucket) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(authWrapper, bucket, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(authWrapper, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, listHandler(authWrapper, location.bucket), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(authWrapper, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(authWrapper, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str =\r\n                str +\r\n                    Math.random()\r\n                        .toString()\r\n                        .slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(authWrapper, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(error) ||\r\n            isDef(complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error || null;\r\n            this.complete = complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(validator, optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var chainedValidator;\r\n    if (validator) {\r\n        chainedValidator = and_(stringValidator, validator);\r\n    }\r\n    else {\r\n        chainedValidator = stringValidator;\r\n    }\r\n    return new ArgSpec(chainedValidator, optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(optional) {\r\n    return new ArgSpec(metadataValidator, optional);\r\n}\r\nfunction listOptionSpec(optional) {\r\n    return new ArgSpec(listOptionsValidator, optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(validator, optional) {\r\n    function isLooseObjectValidator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (validator !== undefined && validator !== null) {\r\n            validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(isLooseObjectValidator, optional);\r\n}\r\nfunction nullFunctionSpec(optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, optional);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.authWrapper_ = authWrapper;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded) { return _this.updateProgress_(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.authWrapper_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        function typeValidator() {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        var i = this.observers_.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers_.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = this.observers_.slice();\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(authWrapper, location) {\r\n        this.authWrapper = authWrapper;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (authWrapper, location) {\r\n        return new Reference(authWrapper, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.authWrapper, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.authWrapper.service();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value The string to upload.\r\n     * @param format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [stringSpec(), stringSpec(formatValidator, true), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, value);\r\n        var metadataClone = Object.assign({}, metadata);\r\n        if (!isDef(metadataClone['contentType']) &&\r\n            isDef(data.contentType)) {\r\n            metadataClone['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadataClone);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        var _this = this;\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(_this.authWrapper, _this.location);\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @return A Promise that resolves with all the items and prefixes under\r\n     *      the current storage reference. `prefixes` contains references to\r\n     *      sub-directories and `items` contains references to objects in this\r\n     *      folder. `nextPageToken` is never returned.\r\n     */\r\n    Reference.prototype.listAll = function () {\r\n        validate('listAll', [], arguments);\r\n        var accumulator = {\r\n            prefixes: [],\r\n            items: []\r\n        };\r\n        return this.listAllHelper(accumulator).then(function () { return accumulator; });\r\n    };\r\n    Reference.prototype.listAllHelper = function (accumulator, pageToken) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var opt, nextPage;\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        opt = {\r\n                            // maxResults is 1000 by default.\r\n                            pageToken: pageToken\r\n                        };\r\n                        return [4 /*yield*/, this.list(opt)];\r\n                    case 1:\r\n                        nextPage = _c.sent();\r\n                        (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                        (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                        if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.listAllHelper(accumulator, nextPage.nextPageToken)];\r\n                    case 2:\r\n                        _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure.\r\n     * Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options See ListOptions for details.\r\n     * @return A Promise that resolves with the items and prefixes.\r\n     *      `prefixes` contains references to sub-folders and `items`\r\n     *      contains references to objects in this folder. `nextPageToken`\r\n     *      can be used to get the rest of the results.\r\n     */\r\n    Reference.prototype.list = function (options) {\r\n        validate('list', [listOptionSpec(true)], arguments);\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var op = options || {};\r\n            var requestInfo = list(self.authWrapper, self.location, \r\n            /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        var _this = this;\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        var _this = this;\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(_this.authWrapper, _this.location, metadata, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        var _this = this;\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\n\nvar RequestMap = /** @class */ (function () {\r\n    function RequestMap() {\r\n        this.map = new Map();\r\n        this.id = MIN_SAFE_INTEGER;\r\n    }\r\n    /**\r\n     * Registers the given request with this map.\r\n     * The request is unregistered when it completes.\r\n     *\r\n     * @param request The request to register.\r\n     */\r\n    RequestMap.prototype.addRequest = function (request) {\r\n        var _this = this;\r\n        var id = this.id;\r\n        this.id++;\r\n        this.map.set(id, request);\r\n        request.getPromise().then(function () { return _this.map.delete(id); }, function () { return _this.map.delete(id); });\r\n    };\r\n    /**\r\n     * Cancels all registered requests.\r\n     */\r\n    RequestMap.prototype.clear = function () {\r\n        this.map.forEach(function (v) {\r\n            v && v.cancel(true);\r\n        });\r\n        this.map.clear();\r\n    };\r\n    return RequestMap;\r\n}());\n\n/**\r\n * @param app If null, getAuthToken always resolves with null.\r\n * @param service The storage service associated with this auth wrapper.\r\n *     Untyped to avoid circular type dependencies.\r\n * @struct\r\n */\r\nvar AuthWrapper = /** @class */ (function () {\r\n    function AuthWrapper(app, authProvider, maker, requestMaker, service, pool) {\r\n        var _a;\r\n        this.bucket_ = null;\r\n        this.appId_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        if (this.app_ !== null) {\r\n            var options = this.app_.options;\r\n            if (isDef(options)) {\r\n                this.bucket_ = AuthWrapper.extractBucket_(options);\r\n                this.appId_ = (_a = options.appId) !== null && _a !== void 0 ? _a : null;\r\n            }\r\n        }\r\n        this.authProvider_ = authProvider;\r\n        this.storageRefMaker_ = maker;\r\n        this.requestMaker_ = requestMaker;\r\n        this.pool_ = pool;\r\n        this.service_ = service;\r\n        this.maxOperationRetryTime_ = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this.maxUploadRetryTime_ = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this.requestMap_ = new RequestMap();\r\n    }\r\n    AuthWrapper.extractBucket_ = function (config) {\r\n        var bucketString = config[CONFIG_STORAGE_BUCKET_KEY] || null;\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        var loc = Location.makeFromBucketSpec(bucketString);\r\n        return loc.bucket;\r\n    };\r\n    AuthWrapper.prototype.getAuthToken = function () {\r\n        var auth = this.authProvider_.getImmediate({ optional: true });\r\n        if (auth) {\r\n            return auth.getToken().then(function (response) {\r\n                if (response !== null) {\r\n                    return response.accessToken;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }, function () { return null; });\r\n        }\r\n        else {\r\n            return Promise.resolve(null);\r\n        }\r\n    };\r\n    AuthWrapper.prototype.bucket = function () {\r\n        if (this.deleted_) {\r\n            throw appDeleted();\r\n        }\r\n        else {\r\n            return this.bucket_;\r\n        }\r\n    };\r\n    /**\r\n     * The service associated with this auth wrapper. Untyped to avoid circular\r\n     * type dependencies.\r\n     */\r\n    AuthWrapper.prototype.service = function () {\r\n        return this.service_;\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return Actually a firebaseStorage.Reference, typing not allowed\r\n     *     because of circular dependency problems.\r\n     */\r\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\r\n        return this.storageRefMaker_(this, loc);\r\n    };\r\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\r\n        if (!this.deleted_) {\r\n            var request = this.requestMaker_(requestInfo, this.appId_, authToken, this.pool_);\r\n            this.requestMap_.addRequest(request);\r\n            return request;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    AuthWrapper.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requestMap_.clear();\r\n    };\r\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\r\n        return this.maxUploadRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\r\n        return this.maxOperationRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    return AuthWrapper;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\nfunction addGmpidHeader_(headers, appId) {\r\n    if (appId) {\r\n        headers['X-Firebase-GMPID'] = appId;\r\n    }\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, appId, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addGmpidHeader_(headers, appId);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar Service = /** @class */ (function () {\r\n    function Service(app, authProvider, pool, url) {\r\n        this.bucket_ = null;\r\n        function maker(authWrapper, loc) {\r\n            return new Reference(authWrapper, loc);\r\n        }\r\n        this.authWrapper_ = new AuthWrapper(app, authProvider, maker, makeRequest, this, pool);\r\n        this.app_ = app;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            var authWrapperBucket = this.authWrapper_.bucket();\r\n            if (authWrapperBucket != null) {\r\n                this.bucket_ = new Location(authWrapperBucket, '');\r\n            }\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    Service.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (typeof path !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this.authWrapper_, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    Service.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (typeof p !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this.authWrapper_, url);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxUploadRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxUploadRetryTime(time);\r\n    };\r\n    Service.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxOperationRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Service;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.authWrapper_.deleteApp();\r\n        return Promise.resolve();\r\n    };\r\n    return ServiceInternals;\r\n}());\n\nvar name = \"@firebase/storage\";\nvar version = \"0.3.32\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(container, url) {\r\n    // Dependencies\r\n    var app = container.getProvider('app').getImmediate();\r\n    var authProvider = container.getProvider('auth-internal');\r\n    return new Service(app, authProvider, new XhrIoPool(), url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: Service,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerComponent(new Component(STORAGE_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterStorage(firebase);\n\nexport { registerStorage };\n//# sourceMappingURL=index.esm.js.map\n","/*! algoliasearch.umd.js | 4.6.0 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){e(r,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},o=function(){return JSON.parse(n().getItem(r)||\"{}\")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=o()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=a(e,2),n=t[0],o=t[1];return Promise.all([n,o||r.miss(n)])})).then((function(e){return a(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var a=o();return a[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(a)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=o();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=o(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return a(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,a).catch((function(){return i({caches:t}).get(e,n,a)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var u=n(),i=a&&a.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===m.WithinHeaders?n:{}},queryParameters:function(){return e===m.WithinQueryParameters?n:{}}}}function f(e){var t=0;return e((function r(){return t++,new Promise((function(n){setTimeout((function(){n(e(r))}),Math.min(100*t,1e3))}))}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(r){return d(e.then((function(e){return Promise.all([t(e,r),e])})).then((function(e){return e[1]})))}})}function l(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function p(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function h(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[a++])}))}var m={WithinQueryParameters:0,WithinHeaders:1};function y(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var g={Read:1,Write:2,Any:3},v=1,b=2,P=3;function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function j(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:g.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||g.Any}}var w=\"DELETE\",I=\"GET\",x=\"POST\",q=\"PUT\";function D(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(O(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===v||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===P&&Date.now()-e.lastUpdate<=12e4}(e)})),a=[].concat(o(r),o(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:a.length>0?a.map((function(e){return j(e)})):t}}))}function S(e,t,n,a){var u=[],i=function(e,t){if(e.method===I||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,a),s=function(e,t){var n=r(r({},e.headers),t.headers),a={};return Object.keys(n).forEach((function(e){var t=n[e];a[e.toLowerCase()]=t})),a}(e,a),c=n.method,f=n.method!==I?{}:r(r({},n.data),a.data),d=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),f),a.queryParameters),l=0,p=function t(r,o){var f=r.pop();if(void 0===f)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.\",transporterStackTrace:A(u)};var p={data:i,headers:s,method:c,url:N(f,n.path,d),connectTimeout:o(l,e.timeouts.connect),responseTimeout:o(l,a.timeout)},h=function(e){var t={request:p,response:e,host:f,triesLeft:r.length};return u.push(t),t},m={onSucess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var a=h(n);return n.isTimedOut&&l++,Promise.all([e.logger.info(\"Retryable failure\",E(a)),e.hostsCache.set(f,O(f,n.isTimedOut?P:b))]).then((function(){return t(r,o)}))},onFail:function(e){throw h(e),function(e,t){var r=e.content,n=e.status,a=r;try{a=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(a,n,t)}(e,A(u))}};return e.requester.send(p).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e)}(e,m)}))};return D(e.hostsCache,t).then((function(e){return p(o(e.statelessHosts).reverse(),e.getTimeout)}))}function k(e){var t=e.hostsCache,r=e.logger,n=e.requester,o=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,f=e.queryParameters,d={hostsCache:t,logger:r,requester:n,requestsCache:o,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:f,hosts:c.map((function(e){return j(e)})),read:function(e,t){var r=y(t,d.timeouts.read),n=function(){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&g.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var o={request:e,mappedRequestOptions:r,transporter:{queryParameters:d.queryParameters,headers:d.headers}};return d.responsesCache.get(o,(function(){return d.requestsCache.get(o,(function(){return d.requestsCache.set(o,n()).then((function(e){return Promise.all([d.requestsCache.delete(o),e])}),(function(e){return Promise.all([d.requestsCache.delete(o),Promise.reject(e)])})).then((function(e){var t=a(e,2);t[0];return t[1]}))}))}),{miss:function(e){return d.responsesCache.set(o,e)}})},write:function(e,t){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&g.Write)})),e,y(t,d.timeouts.write))}};return d}function T(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function N(e,t,r){var n=R(r),a=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(a+=\"?\".concat(n)),a}function R(e){return Object.keys(e).map((function(t){return h(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return E(e)}))}function E(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var C=function(e){return function(t,r){return e.transporter.write({method:x,path:\"2/abtests\",data:t},r)}},U=function(e){return function(t,r){return e.transporter.write({method:w,path:h(\"2/abtests/%s\",t)},r)}},J=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"2/abtests/%s\",t)},r)}},z=function(e){return function(t){return e.transporter.read({method:I,path:\"2/abtests\"},t)}},F=function(e){return function(t,r){return e.transporter.write({method:x,path:h(\"2/abtests/%s/stop\",t)},r)}},H=function(e){return function(t){return e.transporter.read({method:I,path:\"1/strategies/personalization\"},t)}},M=function(e){return function(t,r){return e.transporter.write({method:x,path:\"1/strategies/personalization\",data:t},r)}};function K(e){return function t(r){return e.request(r).then((function(n){if(void 0!==e.batch&&e.batch(n.hits),!e.shouldStop(n))return n.cursor?t({cursor:n.cursor}):t({page:(r.page||0)+1})}))}({})}var W=function(e){return function(t,a){var o=a||{},u=o.queryParameters,i=n(o,[\"queryParameters\"]),s=r({acl:t},void 0!==u?{queryParameters:u}:{});return d(e.transporter.write({method:x,path:\"1/keys\",data:s},i),(function(t,r){return f((function(n){return Y(e)(t.key,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},B=function(e){return function(t,r,n){var a=y(n);return a.queryParameters[\"X-Algolia-User-ID\"]=t,e.transporter.write({method:x,path:\"1/clusters/mapping\",data:{cluster:r}},a)}},Q=function(e){return function(t,r,n){return e.transporter.write({method:x,path:\"1/clusters/mapping/batch\",data:{users:t,cluster:r}},n)}},G=function(e){return function(t,r,n){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:\"copy\",destination:r}},n),(function(r,n){return re(e)(t,{methods:{waitTask:et}}).waitTask(r.taskID,n)}))}},V=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Rules]}))}},L=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Settings]}))}},_=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Synonyms]}))}},X=function(e){return function(t,r){return d(e.transporter.write({method:w,path:h(\"1/keys/%s\",t)},r),(function(r,n){return f((function(r){return Y(e)(t,n).then(r).catch((function(e){if(404!==e.status)throw e}))}))}))}},Y=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/keys/%s\",t)},r)}},Z=function(e){return function(t){return e.transporter.read({method:I,path:\"1/logs\"},t)}},$=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters/mapping/top\"},t)}},ee=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/clusters/mapping/%s\",t)},r)}},te=function(e){return function(t){var r=t||{},a=r.retrieveMappings,o=n(r,[\"retrieveMappings\"]);return!0===a&&(o.getClusters=!0),e.transporter.read({method:I,path:\"1/clusters/mapping/pending\"},o)}},re=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return p(n,r.methods)}},ne=function(e){return function(t){return e.transporter.read({method:I,path:\"1/keys\"},t)}},ae=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters\"},t)}},oe=function(e){return function(t){return e.transporter.read({method:I,path:\"1/indexes\"},t)}},ue=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters/mapping\"},t)}},ie=function(e){return function(t,r,n){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:\"move\",destination:r}},n),(function(r,n){return re(e)(t,{methods:{waitTask:et}}).waitTask(r.taskID,n)}))}},se=function(e){return function(t,r){return d(e.transporter.write({method:x,path:\"1/indexes/*/batch\",data:{requests:t}},r),(function(t,r){return Promise.all(Object.keys(t.taskID).map((function(n){return re(e)(n,{methods:{waitTask:et}}).waitTask(t.taskID[n],r)})))}))}},ce=function(e){return function(t,r){return e.transporter.read({method:x,path:\"1/indexes/*/objects\",data:{requests:t}},r)}},fe=function(e){return function(t,n){var a=t.map((function(e){return r(r({},e),{},{params:R(e.params||{})})}));return e.transporter.read({method:x,path:\"1/indexes/*/queries\",data:{requests:a},cacheable:!0},n)}},de=function(e){return function(t,a){return Promise.all(t.map((function(t){var o=t.params,u=o.facetName,i=o.facetQuery,s=n(o,[\"facetName\",\"facetQuery\"]);return re(e)(t.indexName,{methods:{searchForFacetValues:Xe}}).searchForFacetValues(u,i,r(r({},a),s))})))}},le=function(e){return function(t,r){var n=y(r);return n.queryParameters[\"X-Algolia-User-ID\"]=t,e.transporter.write({method:w,path:\"1/clusters/mapping\"},n)}},pe=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/keys/%s/restore\",t)},r),(function(r,n){return f((function(r){return Y(e)(t,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},he=function(e){return function(t,r){return e.transporter.read({method:x,path:\"1/clusters/mapping/search\",data:{query:t}},r)}},me=function(e){return function(t,r){var a=Object.assign({},r),o=r||{},u=o.queryParameters,i=n(o,[\"queryParameters\"]),s=u?{queryParameters:u}:{},c=[\"acl\",\"indexes\",\"referers\",\"restrictSources\",\"queryParameters\",\"description\",\"maxQueriesPerIPPerHour\",\"maxHitsPerQuery\"];return d(e.transporter.write({method:q,path:h(\"1/keys/%s\",t),data:s},i),(function(r,n){return f((function(r){return Y(e)(t,n).then((function(e){return function(e){return Object.keys(a).filter((function(e){return-1!==c.indexOf(e)})).every((function(t){return e[t]===a[t]}))}(e)?Promise.resolve():r()}))}))}))}},ye=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/batch\",e.indexName),data:{requests:t}},r),(function(t,r){return et(e)(t.taskID,r)}))}},ge=function(e){return function(t){return K(r(r({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/browse\",e.indexName),data:r},t)}}))}},ve=function(e){return function(t){var n=r({hitsPerPage:1e3},t);return K(r(r({shouldStop:function(e){return e.hits.length<n.hitsPerPage}},n),{},{request:function(t){return Ye(e)(\"\",r(r({},n),t)).then((function(e){return r(r({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},be=function(e){return function(t){var n=r({hitsPerPage:1e3},t);return K(r(r({shouldStop:function(e){return e.hits.length<n.hitsPerPage}},n),{},{request:function(t){return Ze(e)(\"\",r(r({},n),t)).then((function(e){return r(r({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Pe=function(e){return function(t,r,a){var o=a||{},u=o.batchSize,i=n(o,[\"batchSize\"]),s={taskIDs:[],objectIDs:[]};return d(function n(){var a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=[];for(a=o;a<t.length&&(c.push(t[a]),c.length!==(u||1e3));a++);return 0===c.length?Promise.resolve(s):ye(e)(c.map((function(e){return{action:r,body:e}})),i).then((function(e){return s.objectIDs=s.objectIDs.concat(e.objectIDs),s.taskIDs.push(e.taskID),a++,n(a)}))}(),(function(t,r){return Promise.all(t.taskIDs.map((function(t){return et(e)(t,r)})))}))}},Oe=function(e){return function(t){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/clear\",e.indexName)},t),(function(t,r){return et(e)(t.taskID,r)}))}},je=function(e){return function(t){var r=t||{},a=r.forwardToReplicas,o=y(n(r,[\"forwardToReplicas\"]));return a&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/rules/clear\",e.indexName)},o),(function(t,r){return et(e)(t.taskID,r)}))}},we=function(e){return function(t){var r=t||{},a=r.forwardToReplicas,o=y(n(r,[\"forwardToReplicas\"]));return a&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/synonyms/clear\",e.indexName)},o),(function(t,r){return et(e)(t.taskID,r)}))}},Ie=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/deleteByQuery\",e.indexName),data:t},r),(function(t,r){return et(e)(t.taskID,r)}))}},xe=function(e){return function(t){return d(e.transporter.write({method:w,path:h(\"1/indexes/%s\",e.indexName)},t),(function(t,r){return et(e)(t.taskID,r)}))}},qe=function(e){return function(t,r){return d(De(e)([t],r).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},De=function(e){return function(t,r){var n=t.map((function(e){return{objectID:e}}));return Pe(e)(n,tt.DeleteObject,r)}},Se=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:w,path:h(\"1/indexes/%s/rules/%s\",e.indexName,t)},u),(function(t,r){return et(e)(t.taskID,r)}))}},ke=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:w,path:h(\"1/indexes/%s/synonyms/%s\",e.indexName,t)},u),(function(t,r){return et(e)(t.taskID,r)}))}},Te=function(e){return function(t){return Ue(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Ne=function(e){return function(t,o){var u=o||{},i=u.query,s=u.paginate,c=n(u,[\"query\",\"paginate\"]),f=0;return function n(){return _e(e)(i||\"\",r(r({},c),{},{page:f})).then((function(e){for(var r=0,o=Object.entries(e.hits);r<o.length;r++){var u=a(o[r],2),i=u[0],c=u[1];if(t(c))return{object:c,position:parseInt(i,10),page:f}}if(f++,!1===s||f>=e.nbPages)throw{name:\"ObjectNotFoundError\",message:\"Object not found.\"};return n()}))}()}},Re=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/%s\",e.indexName,t)},r)}},Ae=function(){return function(e,t){for(var r=0,n=Object.entries(e.hits);r<n.length;r++){var o=a(n[r],2),u=o[0];if(o[1].objectID===t)return parseInt(u,10)}return-1}},Ee=function(e){return function(t,a){var o=a||{},u=o.attributesToRetrieve,i=n(o,[\"attributesToRetrieve\"]),s=t.map((function(t){return r({indexName:e.indexName,objectID:t},u?{attributesToRetrieve:u}:{})}));return e.transporter.read({method:x,path:\"1/indexes/*/objects\",data:{requests:s}},i)}},Ce=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/rules/%s\",e.indexName,t)},r)}},Ue=function(e){return function(t){return e.transporter.read({method:I,path:h(\"1/indexes/%s/settings\",e.indexName),data:{getVersion:2}},t)}},Je=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/synonyms/%s\",e.indexName,t)},r)}},ze=function(e){return function(t,r){return d(Fe(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},Fe=function(e){return function(t,r){var a=r||{},o=a.createIfNotExists,u=n(a,[\"createIfNotExists\"]),i=o?tt.PartialUpdateObject:tt.PartialUpdateObjectNoCreate;return Pe(e)(t,i,u)}},He=function(e){return function(t,u){var i=u||{},s=i.safe,c=i.autoGenerateObjectIDIfNotExist,f=i.batchSize,l=n(i,[\"safe\",\"autoGenerateObjectIDIfNotExist\",\"batchSize\"]),p=function(t,r,n,a){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:n,destination:r}},a),(function(t,r){return et(e)(t.taskID,r)}))},m=Math.random().toString(36).substring(7),y=\"\".concat(e.indexName,\"_tmp_\").concat(m),g=Be({appId:e.appId,transporter:e.transporter,indexName:y}),v=[],b=p(e.indexName,y,\"copy\",r(r({},l),{},{scope:[\"settings\",\"synonyms\",\"rules\"]}));return v.push(b),d((s?b.wait(l):b).then((function(){var e=g(t,r(r({},l),{},{autoGenerateObjectIDIfNotExist:c,batchSize:f}));return v.push(e),s?e.wait(l):e})).then((function(){var t=p(y,e.indexName,\"move\",l);return v.push(t),s?t.wait(l):t})).then((function(){return Promise.all(v)})).then((function(e){var t=a(e,3),r=t[0],n=t[1],u=t[2];return{objectIDs:n.objectIDs,taskIDs:[r.taskID].concat(o(n.taskIDs),[u.taskID])}})),(function(e,t){return Promise.all(v.map((function(e){return e.wait(t)})))}))}},Me=function(e){return function(t,n){return Ge(e)(t,r(r({},n),{},{clearExistingRules:!0}))}},Ke=function(e){return function(t,n){return Le(e)(t,r(r({},n),{},{replaceExistingSynonyms:!0}))}},We=function(e){return function(t,r){return d(Be(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},Be=function(e){return function(t,r){var a=r||{},o=a.autoGenerateObjectIDIfNotExist,u=n(a,[\"autoGenerateObjectIDIfNotExist\"]),i=o?tt.AddObject:tt.UpdateObject;if(i===tt.UpdateObject){var s=!0,c=!1,f=void 0;try{for(var l,p=t[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){if(void 0===l.value.objectID)return d(Promise.reject({name:\"MissingObjectIDError\",message:\"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option.\"}))}}catch(e){c=!0,f=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw f}}}return Pe(e)(t,i,u)}},Qe=function(e){return function(t,r){return Ge(e)([t],r)}},Ge=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=a.clearExistingRules,i=y(n(a,[\"forwardToReplicas\",\"clearExistingRules\"]));return o&&(i.queryParameters.forwardToReplicas=1),u&&(i.queryParameters.clearExistingRules=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/rules/batch\",e.indexName),data:t},i),(function(t,r){return et(e)(t.taskID,r)}))}},Ve=function(e){return function(t,r){return Le(e)([t],r)}},Le=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=a.replaceExistingSynonyms,i=y(n(a,[\"forwardToReplicas\",\"replaceExistingSynonyms\"]));return o&&(i.queryParameters.forwardToReplicas=1),u&&(i.queryParameters.replaceExistingSynonyms=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/synonyms/batch\",e.indexName),data:t},i),(function(t,r){return et(e)(t.taskID,r)}))}},_e=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},Xe=function(e){return function(t,r,n){return e.transporter.read({method:x,path:h(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},Ye=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/rules/search\",e.indexName),data:{query:t}},r)}},Ze=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/synonyms/search\",e.indexName),data:{query:t}},r)}},$e=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:q,path:h(\"1/indexes/%s/settings\",e.indexName),data:t},u),(function(t,r){return et(e)(t.taskID,r)}))}},et=function(e){return function(t,r){return f((function(n){return function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/task/%s\",e.indexName,t.toString())},r)}}(e)(t,r).then((function(e){return\"published\"!==e.status?n():void 0}))}))}},tt={AddObject:\"addObject\",UpdateObject:\"updateObject\",PartialUpdateObject:\"partialUpdateObject\",PartialUpdateObjectNoCreate:\"partialUpdateObjectNoCreate\",DeleteObject:\"deleteObject\",DeleteIndex:\"delete\",ClearIndex:\"clear\"},rt={Settings:\"settings\",Synonyms:\"synonyms\",Rules:\"rules\"},nt=1,at=2,ot=3;function ut(e,t,n){var a,o={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,a=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},o=a(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(o),n=a(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(o),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(o),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(a=ot,{debug:function(e,t){return nt>=a&&console.debug(e,t),Promise.resolve()},info:function(e,t){return at>=a&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.6.0\",\"-\").concat(e)}),s()]}),userAgent:T(\"4.6.0\").add({segment:\"Browser\"})};return function(e){var t=e.appId,n=c(void 0!==e.authMode?e.authMode:m.WithinHeaders,t,e.apiKey),a=k(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:g.Read},{url:\"\".concat(t,\".algolia.net\"),accept:g.Write}].concat(l([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)}(r(r(r({},o),n),{},{methods:{search:fe,searchForFacetValues:de,multipleBatch:se,multipleGetObjects:ce,multipleQueries:fe,copyIndex:G,copySettings:L,copySynonyms:_,copyRules:V,moveIndex:ie,listIndices:oe,getLogs:Z,listClusters:ae,multipleSearchForFacetValues:de,getApiKey:Y,addApiKey:W,listApiKeys:ne,updateApiKey:me,deleteApiKey:X,restoreApiKey:pe,assignUserID:B,assignUserIDs:Q,getUserID:ee,searchUserIDs:he,listUserIDs:ue,getTopUserIDs:$,removeUserID:le,hasPendingMappings:te,initIndex:function(e){return function(t){return re(e)(t,{methods:{batch:ye,delete:xe,getObject:Re,getObjects:Ee,saveObject:We,saveObjects:Be,search:_e,searchForFacetValues:Xe,waitTask:et,setSettings:$e,getSettings:Ue,partialUpdateObject:ze,partialUpdateObjects:Fe,deleteObject:qe,deleteObjects:De,deleteBy:Ie,clearObjects:Oe,browseObjects:ge,getObjectPosition:Ae,findObject:Ne,exists:Te,saveSynonym:Ve,saveSynonyms:Le,getSynonym:Je,searchSynonyms:Ze,browseSynonyms:be,deleteSynonym:ke,clearSynonyms:we,replaceAllObjects:He,replaceAllSynonyms:Ke,searchRules:Ye,getRule:Ce,deleteRule:Se,saveRule:Qe,saveRules:Ge,replaceAllRules:Me,browseRules:ve,clearRules:je}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||\"us\",n=c(m.WithinHeaders,e.appId,e.apiKey),a=k(r(r({hosts:[{url:\"analytics.\".concat(t,\".algolia.com\")}]},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/json\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({appId:e.appId,transporter:a},e.methods)}(r(r(r({},o),e),{},{methods:{addABTest:C,getABTest:J,getABTests:z,stopABTest:F,deleteABTest:U}}))}},initRecommendation:function(){return function(e){return function(e){var t=e.region||\"us\",n=c(m.WithinHeaders,e.appId,e.apiKey),a=k(r(r({hosts:[{url:\"recommendation.\".concat(t,\".algolia.com\")}]},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/json\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({appId:e.appId,transporter:a},e.methods)}(r(r(r({},o),e),{},{methods:{getPersonalizationStrategy:H,setPersonalizationStrategy:M}}))}}}}))}return ut.version=\"4.6.0\",ut}));\n","import '@firebase/storage';\n//# sourceMappingURL=index.esm.js.map\n","import { Component, OnInit } from '@angular/core';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\nimport * as moment from 'moment';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-almacen',\n  templateUrl: './almacen.component.html',\n  styleUrls: ['./almacen.component.scss']\n})\nexport class AlmacenComponent implements OnInit {\n  items: any [] = [];\n  _items: any [] = [];\n  para_agregar: any [] = [];\n  elementos: any [] = [];\n  insumos: any [] = [];\n  _insumos: any [] = [];\n  form: FormGroup;\n\n  loading: boolean = true;\n  search_text: string = \"\";\n  elemento_filtro: string = \"todos\";\n\n  vista: string = \"principal\";\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Stock', 'Vender', 'Cantidad comprada (' + moment ().format ('MMMM, YYYY') + ')', 'Monto comprado (' + moment ().format ('MMMM, YYYY') + ')'];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private dialogService: NbDialogService,\n    private route: ActivatedRoute,\n    private database: DatabaseService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>) { }\n\n  ngOnInit (): void {\n    this.form = new FormGroup ({\n      fecha: new FormControl ('', [Validators.required]),\n      anio: new FormControl ('', [Validators.required]),\n      mes: new FormControl ('', [Validators.required]),\n      dia: new FormControl ('', [Validators.required]),\n      tipo_comprobante: new FormControl ('ninguno'),\n      nro_comprobante: new FormControl (''),\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.insumos = res;\n      this._insumos = res;\n    });\n\n    this.database.get_empresa_insumos (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      console.log (res);\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {};\n      data ['Nombre'] = i.insumo.nombre;\n      data ['Stock'] = i.data.stock + ' (' + i.insumo.unidad_medida + ')';\n\n      let ofrecer_en_menu = 'Si';\n      if (i.data.ofrecer_en_menu === false) {\n        ofrecer_en_menu =  'No';\n      }\n      data ['Vender'] = ofrecer_en_menu;\n\n      let cantidad_comprada: number = 0;\n      if (this.valid_value (i.data, 'resumen_' + moment ().format ('YYYY'))) {\n        if (this.valid_value (i.data ['resumen_' + moment ().format ('YYYY')], 'cantidad_comprada_' + moment ().format ('MM'))) {\n          cantidad_comprada = i.data ['resumen_' + moment ().format ('YYYY')] ['cantidad_comprada_' + moment ().format ('MM')];\n        }\n      }\n      data ['Cantidad comprada (' + moment ().format ('MMMM, YYYY') + ')'] = cantidad_comprada;\n\n      let monto_comprado: number = 0;\n      if (this.valid_value (i.data, 'resumen_' + moment ().format ('YYYY'))) {\n        if (this.valid_value (i.data ['resumen_' + moment ().format ('YYYY')], 'monto_comprado_' + moment ().format ('MM'))) {\n          monto_comprado = i.data ['resumen_' + moment ().format ('YYYY')] ['monto_comprado_' + moment ().format ('MM')];\n        }\n      }\n      data ['Monto comprado (' + moment ().format ('MMMM, YYYY') + ')'] = monto_comprado;\n\n      data ['data'] = i.data;\n\n      returned.push ({\n        data: data\n      })\n    });\n\n    return returned;\n  }\n\n  get_monto_comprado_column () {\n    return 'Monto comprado (' + moment ().format ('MMMM, YYYY') + ')';\n  }\n\n  valid_value (object: any, value: string) {\n    if (object [value] === null || object [value] === undefined) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      // this.database.update_insumo (data)\n      //   .then (() => {\n      //     dialog.close ();\n      //     this.form.reset ();\n      //     this.loading = false;\n      //   })\n      //   .catch ((error: any) => {\n      //     console.log ('error', error);\n      //     dialog.close ();\n      //     this.form.reset ();\n      //     this.loading = false;\n      //   });\n    } else {\n      data.id = this.database.createId ();\n      data.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n      this.database.add_empresa_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.vista = 'registrar';\n    // this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  // filter () {\n  //   console.log (this.search_text);\n  //   console.log (this.search_text);\n\n  //   this.items = this._items;\n\n  //   if (this.elemento_filtro === 'todos') {\n  //     this.items = this.items.filter ((item: any) => {\n  //       return item.insumo.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n  //     });\n  //   } else {\n  //     this.items = this.items.filter ((item: any) => {\n  //       return (item.insumo.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1) && item.insumo.id === this.elemento_filtro;\n  //     });\n  //   }\n  // }\n\n  onChange () {\n    console.log (this.search_text);\n    this.insumos = this._insumos;\n\n    this.insumos = this.insumos.filter ((item: any) => {\n      return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    });\n  }\n\n  agregar_para_agregar (event: any) {\n    this.search_text = \"\";\n    console.log (event);\n    this.para_agregar.push ({\n      id: this.database.createId (),\n      nombre: event.nombre,\n      cantidad: 0,\n      precio: event.precio,\n      empresa_id: this.route.snapshot.paramMap.get ('id'),\n      insumo_id: event.id,\n      unidad_medida: event.unidad_medida\n    });\n  }\n\n  remove (item: any) {\n    for( var i = 0; i < this.para_agregar.length; i++) {\n      if ( this.para_agregar[i].id === item.id) {\n        this.para_agregar.splice(i, 1);\n      }\n    }\n  }\n\n  get_precio_total () {\n    let total: number = 0;\n\n    this.para_agregar.forEach ((i: any) => {\n      total += i.cantidad * i.precio;\n    });\n\n    return total;\n  }\n\n  continuar (dialog: any) {\n    this.form.controls ['fecha'].setValue (moment ().format ('YYYY[-]MM[-]DD'));\n    this.form.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n    this.dialogService.open (dialog);\n  }\n\n  fecha_cambio () {\n    this.form.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n  }\n\n  registrar_ingresos_insumo (dialog: any) {\n    this.para_agregar.forEach ((i: any) => {\n      i.fecha = this.form.value.fecha,\n      i.anio = this.form.value.anio,\n      i.mes = this.form.value.mes,\n      i.dia = this.form.value.dia,\n      i.tipo_comprobante = this.form.value.tipo_comprobante,\n      i.nro_comprobante = this.form.value.nro_comprobante\n    });\n\n    this.database.add_ingresos_insumo_empresa (this.para_agregar)\n      .then (() => {\n        this.para_agregar = [];\n        dialog.close ();\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      });\n  }\n\n  update_vender (data: any) {\n    this.loading = true;\n    console.log (data);\n    data.ofrecer_en_menu = !data.ofrecer_en_menu;\n\n    this.database.update_empresa_insumo (data)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log (error);\n        this.loading = false;\n      })\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"width: 640px; height: 500px\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <input #autoInput\n          [(ngModel)]=\"search_text\"\n          nbInput\n          type=\"text\"\n          (ngModelChange)=\"onChange ()\"\n          placeholder=\"Buscar un insumo...\"/>\n\n        <nb-list>\n          <nb-list-item *ngFor=\"let item of insumos\">\n            {{ item.data.nombre }}\n          </nb-list-item>\n        </nb-list>\n      </div>\n\n      <div class=\"col-8\">\n        <table class=\"table table-bordered table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Nombre</th>\n              <th scope=\"col\">Cantidad</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr *ngFor=\"let item of para_agregar\">\n              <td>\n                {{ item.nombre }}\n              </td>\n\n              <td>\n                <input type=\"text\" [(ngModel)]=\"item.cantidad\">\n              </td>\n              <td>\n                <input type=\"text\" [(ngModel)]=\"item.precio\">\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <!-- <nb-card-body>\n      <input #autoInput\n        [(ngModel)]=\"search_text\"\n        nbInput\n        type=\"text\"\n        (ngModelChange)=\"onChange ()\"\n        placeholder=\"Buscar un insumo...\"\n        [nbAutocomplete]=\"auto\" />\n\n      <nb-autocomplete #auto (selectedChange)=\"onSelectionChange ($event)\">\n        <nb-option *ngFor=\"let item of insumos\" [value]=\"item.data\">\n          {{ item.data.nombre }}\n        </nb-option>\n      </nb-autocomplete>\n\n\n    </nb-card-body> -->\n\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_comprobante let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      Continuar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\" style=\"display: block;\">\n          <label for=\"fecha\" class=\"label\">Fecha:</label>\n          <input\n            type=\"date\"\n            nbInput\n            fullWidth\n            formControlName=\"fecha\"\n            (ngModelChange)=\"fecha_cambio ()\"\n            id=\"fecha\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"tipo_comprobante\" class=\"label\">Tipo comprobante:</label>\n          <nb-select formControlName=\"tipo_comprobante\" id=\"tipo_comprobante\" fullWidth>\n            <nb-option value=\"ninguno\">Ninguno</nb-option>\n            <nb-option value=\"boleta\">Boleta</nb-option>\n            <nb-option value=\"factura\">Factura</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">N° comprobante:</label>\n          <input type=\"text\" formControlName=\"nro_comprobante\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_ingresos_insumo (ref)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\" *ngIf=\"vista === 'principal'\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/home'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-2\">\n            <h5>Almacen</h5>\n          </div>\n\n          <div class=\"col-6\">\n            <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"vista = 'registrar'\">Registrar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n        <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n        <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n        <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n          <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n            {{ customColumn }}\n          </th>\n          <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n            <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n            {{row.data [customColumn]}}\n          </td>\n        </ng-container>\n\n        <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                      [nbTreeGridColumnDef]=\"column\"\n                      [showOn]=\"getShowOn(index)\">\n          <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n            {{column}}\n          </th>\n          <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n            <div *ngIf=\"column === 'Vender'\">\n              <button nbButton fullWidth size=\"small\" ghost (click)=\"update_vender (row.data.data)\">\n                {{ row.data [column] }}\n                <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n              </button>\n            </div>\n\n            <div *ngIf=\"column !== 'Vender'\">\n              <span *ngIf=\"column === get_monto_comprado_column ()\">{{ row.data [column] | currency:'S/. ' }}</span>\n              <span *ngIf=\"column !== 'Monto comprado'\">{{ row.data [column] }}</span>\n            </div>\n          </td>\n        </ng-container>\n      </table>\n    </nb-card>\n\n    <nb-card [nbSpinner]=\"loading\" *ngIf=\"vista === 'registrar'\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"vista ='principal'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5>Registrar ingreso de insumos</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" [disabled]=\"get_precio_total () <= 0\" fullWidth (click)=\"continuar (dialog_comprobante)\">Continuar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <div class=\"row\">\n        <div class=\"col-3\">\n          <input #autoInput\n            style=\"width: 100%; margin: 12px;\"\n            [(ngModel)]=\"search_text\"\n            nbInput\n            type=\"text\"\n            (ngModelChange)=\"onChange ()\"\n            placeholder=\"Buscar un insumo...\"/>\n\n          <div *ngFor=\"let item of insumos\" style=\"margin-left: 12px; padding: 6px;\">\n            <div class=\"row\">\n              <div class=\"col-8\">\n                {{ item.data.nombre }}\n              </div>\n\n              <div class=\"col-4\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"agregar_para_agregar (item.data)\">\n                  <nb-icon status=\"primary\" icon=\"arrowhead-right-outline\"></nb-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-9\" style=\"padding-right: 27px;\">\n          <table class=\"table table-bordered table-striped\" style=\"margin-top: 12px;\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Nombre</th>\n                <th scope=\"col\" style=\"width: 124px;\">Cantidad</th>\n                <th scope=\"col\" style=\"width: 102px;\">Precio (S/)</th>\n                <th scope=\"col\">Total</th>\n                <th scope=\"col\"></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <tr *ngFor=\"let item of para_agregar\">\n                <td>\n                  {{ item.nombre }}\n                </td>\n\n                <td>\n                  <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n                  {{ item.unidad_medida }}\n                </td>\n                <td>\n                  <input style=\"width: 100px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.precio\">\n                </td>\n\n                <td style=\"width: 128px;\">\n                  {{ item.cantidad * item.precio | currency:'S/. ' }}\n                </td>\n\n                <td style=\"width: 12px;\">\n                  <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n                </td>\n              </tr>\n\n              <tr *ngIf=\"get_precio_total () > 0\">\n                <td colspan=\"3\">Total</td>\n                <td>\n                  {{ get_precio_total () | currency:'S/. ' }}\n                </td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n\n","import { Component, OnInit } from '@angular/core';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { DatabaseService } from '../../services/database.service';\nimport { NbToastrService } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-configuracion',\n  templateUrl: './configuracion.component.html',\n  styleUrls: ['./configuracion.component.scss']\n})\nexport class ConfiguracionComponent implements OnInit {\n  loading: boolean = true;\n  form: FormGroup;\n  constructor (private database: DatabaseService, private toastrService: NbToastrService) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      delivery_limite: new FormControl ('', [Validators.required]),\n      delivery_precio: new FormControl ('', [Validators.required]),\n      local_latitud: new FormControl ('', [Validators.required]),\n      local_longitud: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_preferencias ().subscribe ((res: any) => {\n      this.form.patchValue (res);\n      this.loading = false;\n    });\n  }\n\n  guardar () {\n    this.loading = true;\n    this.database.update_preferencias (this.form.value)\n      .then (() => {\n        this.loading = false;\n        this.toastrService.show ('Guardado');\n      })\n      .catch ((error: any) => {\n        this.loading = false;\n      });\n  }\n}\n","<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-9\">\n        <h5>Configuraciones</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth [disabled]=\"!form.valid\" (click)=\"guardar ()\">Guardar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <form [formGroup]=\"form\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"delivery_limite\" class=\"label\">Delivery Limite (Metros):</label>\n            <input type=\"number\" formControlName=\"delivery_limite\" id=\"delivery_limite\" nbInput fullWidth>\n          </div>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"delivery_precio\" class=\"label\">Delivery Precio (S/):</label>\n            <input type=\"number\" formControlName=\"delivery_precio\" id=\"delivery_precio\" nbInput fullWidth>\n          </div>\n        </div>\n\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"local_latitud\" class=\"label\">Latitud (local):</label>\n            <input type=\"number\" formControlName=\"local_latitud\" id=\"local_latitud\" nbInput fullWidth>\n          </div>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"local_longitud\" class=\"label\">Longitud (local):</label>\n            <input type=\"number\" formControlName=\"local_longitud\" id=\"local_longitud\" nbInput fullWidth>\n          </div>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-empresa-cartas',\n  templateUrl: './empresa-cartas.component.html',\n  styleUrls: ['./empresa-cartas.component.scss']\n})\nexport class EmpresaCartasComponent implements OnInit {\n  empresa: any;\n\n  items: any [] = [];\n  almacen_insumos: any [] = [];\n  menu_elementos: any [] = [];\n  menus: any [] = [];\n  menus_dia: any [] = [];\n  all_platos: any [] = [];\n  combo_list: any [] = [];\n\n  form: FormGroup;\n  form_menu_dia: FormGroup;\n  form_plato: FormGroup;\n\n  form_promocion: FormGroup;\n  form_promocion_combo: FormGroup;\n\n  tipo_promocion: number = -1;\n\n  loading: boolean = true;\n\n  vista: string = 'principal';\n  insumos: any [] = [];\n  _insumos: any [] = [];\n  para_agregar: any [] = [];\n  _para_agregar: any [] = [];\n  promociones: any [] = [];\n  search_text: string = \"\";\n\n  avatar_preview: any = null;\n  file: any = null;\n  file_menu: any = null;\n  file_combo: any = null;\n\n  plato_editar: boolean = false;\n  plato_selected: any = '';\n  empresa_id: string = '';\n  insumo_selected; any;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private af_storage: AngularFireStorage,\n    private route: ActivatedRoute\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      tipo_carta: new FormControl ('0', [Validators.required]),\n      orden: new FormControl (0, [Validators.required]),\n      precio: new FormControl (0),\n      empresa_id: new FormControl (0),\n      habilitado: new FormControl (true),\n    });\n\n    this.form_menu_dia = new FormGroup ({\n      id: new FormControl (),\n      carta_id: new FormControl (''),\n      empresa_id: new FormControl (''),\n      elemento_menu_id: new FormControl (''),\n      menu_id: new FormControl ('', [Validators.required]),\n      menu_nombre: new FormControl ('', [Validators.required]),\n      stock: new FormControl (0, [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      insumo_id: new FormControl (''),\n    });\n\n    this.form_plato = new FormGroup ({\n      id: new FormControl (),\n      carta_id: new FormControl ('', [Validators.required]),\n      empresa_id: new FormControl ('', [Validators.required]),\n      nombre: new FormControl ('', [Validators.required]),\n      imagen: new FormControl (''),\n      resumen: new FormControl ('', [Validators.required]),\n      descripcion: new FormControl ('', [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      orden: new FormControl (0, [Validators.required]),\n      // es_adicional: new FormControl (0, [Validators.required]),\n      habilitado: new FormControl (true, [Validators.required])\n    });\n\n    this.form_promocion = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      descripcion: new FormControl ('', [Validators.required]),\n      imagen: new FormControl (''),\n      descuento: new FormControl ('', [Validators.required]),\n      tipo_promocion: new FormControl ('0', [Validators.required]),\n      plato_id: new FormControl (''),\n    });\n\n    this.form_promocion_combo = new FormGroup ({\n      id: new FormControl (),\n      descuento: new FormControl ('', [Validators.required])\n    });\n\n    this.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    this.database.get_empresa_by_id (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any) => {\n      this.empresa = res;\n    });\n\n    this.database.get_cartas_by_empresa (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      this.items = res;\n      this.loading = false;\n      console.log (res);\n    });\n\n    this.database.get_empresa_insumos_venta (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      this.almacen_insumos = res\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.menu_elementos = res;\n    });\n\n    this.database.get_menus ().subscribe ((res: any) => {\n      this.menus = res;\n    });\n\n    this.database.get_menus_dia (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any) => {\n      this.menus_dia = res;\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.insumos = res;\n      this._insumos = res;\n    });\n\n    this.database.get_all_platos ().subscribe ((res: any []) => {\n      this.all_platos = res;\n    });\n\n    this.database.get_all_promociones ().subscribe ((res: any []) => {\n      this.promociones = res;\n      console.log ('promociones', res);\n    });\n  }\n\n  tipoCartaChanged (val: any, data: any) {\n    data.tipo_carta = this.form.value.tipo_carta;\n    if (this.form.value.tipo_carta == '0') {\n      this.form.controls ['precio'].setValidators ([Validators.required]);\n      this.form.controls ['precio'].enable ();\n    } else {\n      this.form.controls ['precio'].setValidators ([]);\n      this.form.controls ['precio'].disable ();\n    }\n  }\n\n  uploadIMenumageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = '/Menus/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_carta (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            });\n        } else {\n          this.database.add_carta (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  submit (dialog: any, editar: any) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    console.log (data);\n    console.log (editar);\n\n    if (editar.editar) {\n      if (this.file_menu !== null) {\n        this.uploadIMenumageAsPromise (this.file_menu, data, true, dialog);\n      } else {\n        this.database.update_carta (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          });\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n      if (this.file_menu !== null) {\n        this.uploadIMenumageAsPromise (this.file_menu, data, false, dialog);\n      } else {\n        this.database.add_carta (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          });\n      }\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.controls ['tipo_carta'].enable ();\n    this.form.controls ['tipo_carta'].setValue ('0');\n    this.dialogService.open (dialog, { context: { editar: false, tipo_carta: '0' } });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.avatar_preview = item.imagen;\n    this.form.controls ['tipo_carta'].disable ();\n    this.form.controls ['precio'].enable ();\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: { editar: true, tipo_carta: item.tipo_carta } });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_carta (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    this.loading = false;\n\n    dialog.close ();\n    this.form.reset ();\n    this.form_menu_dia.reset ();\n    this.file_menu = null;\n    this.avatar_preview = null;\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n\n    if (item.habilitado === true) {\n      item.habilitado = false;\n    } else {\n      item.habilitado = true;\n    }\n\n    this.database.update_carta (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  registrar_menu_dia (carta: any, menu: any, dialog: any, tipo: string = 'menu') {\n    console.log (menu);\n    this.form_menu_dia.controls ['stock'].setValue (1);\n    this.form_menu_dia.controls ['precio'].setValue (menu.precio);\n\n    let _menus: any [] = [];\n    if (tipo === 'menu') {\n      _menus = this.menus.filter ((m: any) => {\n        return (m.data.elemento_menu_id === menu.id) &&\n          (this.menu_existe (this.get_menus (carta, menu), m.data) === undefined);\n      });\n    }\n\n    this.dialogService.open (dialog, { context: {\n      carta: carta,\n      menu: menu,\n      menus: _menus,\n      tipo: tipo\n    }});\n  }\n\n  menu_existe (lista: any [], menu: any) {\n    console.log (lista.find (x => x.id === menu.id));\n    return lista.find (x => x.menu_id === menu.id);\n  }\n\n  menu_changed (tipo: string) {\n    if (tipo === 'menu') {\n      let menu = this.menus.find (x => x.data.id ===  this.form_menu_dia.value.menu_id);\n      this.form_menu_dia.controls ['menu_nombre'].setValue (menu.data.nombre);\n      this.form_menu_dia.controls ['precio'].setValue (menu.menu_elemento.precio);\n    } else {\n      let insumo_almacen = this.almacen_insumos.find (x => x.data.id ===  this.form_menu_dia.value.menu_id);\n      this.form_menu_dia.controls ['menu_nombre'].setValue (insumo_almacen.insumo.nombre);\n      this.form_menu_dia.controls ['precio'].setValue (insumo_almacen.insumo.precio);\n      this.form_menu_dia.controls ['insumo_id'].setValue (insumo_almacen.insumo.id);\n    }\n  }\n\n  submit_menu_dia (dialog: any, data: any) {\n    let request: any = this.form_menu_dia.value;\n    request.id = this.database.createId ();\n    request.carta_id = data.carta.id;\n    request.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    if (data.tipo === 'menu') {\n      request.elemento_menu_id = data.menu.id;\n    }\n\n    request.tipo = data.tipo;\n\n    this.loading = true;\n\n    this.database.add_menu_dia (request)\n      .then (() => {\n        this.cancelar (dialog);\n      }).catch ((error: any) => {\n        console.log (error);\n        this.cancelar (dialog);\n      });\n  }\n\n  get_menus (carta: any, menu: any, tipo: string='menu') {\n    if (tipo === 'menu') {\n      return this.menus_dia.filter ((i: any) => {\n        return i.carta_id === carta.id && i.elemento_menu_id === menu.id;\n      });\n    } else {\n      return this.menus_dia.filter ((i: any) => {\n        return i.carta_id === carta.id && i.tipo === tipo;\n      });\n    }\n  }\n\n  eliminar_menu_dia (menu: any) {\n    console.log (menu);\n\n    this.database.delete_menu_dia (menu)\n      .then (() => {\n\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      })\n  }\n\n  vista_registrar_plato (carta: any) {\n    console.log (carta);\n\n    this.vista = 'registrar';\n\n    this.form_plato.controls ['carta_id'].setValue (carta.id);\n    this.form_plato.controls ['empresa_id'].setValue (this.route.snapshot.paramMap.get ('id'));\n  }\n\n  onChange () {\n    console.log (this.search_text);\n    this.insumos = this._insumos;\n\n    this.insumos = this.insumos.filter ((item: any) => {\n      return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    });\n  }\n\n  agregar_para_agregar (event: any) {\n    console.log (event);\n    this.para_agregar.push ({\n      id: this.database.createId (),\n      insumo_id: event.id,\n      nombre: event.nombre,\n      cantidad: 0,\n      unidad_medida: event.unidad_medida\n    });\n  }\n\n  remove (item: any) {\n    for ( var i = 0; i < this.para_agregar.length; i++) {\n      if ( this.para_agregar[i].id === item.id) {\n        this.para_agregar.splice(i, 1);\n      }\n    }\n  }\n\n  remove_plato_promocion (item: any) {\n    for ( var i = 0; i < this.combo_list.length; i++) {\n      if ( this.combo_list[i].id === item.id) {\n        this.combo_list.splice(i, 1);\n      }\n    }\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  change_menu_Listener (event: any) {\n    this.file_menu = event.target.files[0];\n    this.getBase64 (this.file_menu);\n  }\n\n  change_combo_Listener (event: any) {\n    this.file_combo = event.target.files[0];\n    this.getBase64 (this.file_combo);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n\n    };\n  }\n\n  submit_plato () {\n    this.loading = true;\n    let data: any = this.form_plato.value;\n\n    if (this.plato_editar) {\n      if (this.file == null) {\n        this.database.update_plato (data, this.para_agregar, this._para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true);\n      }\n    } else {\n      data.id = this.database.createId ();\n\n      if (this.file == null) {\n        this.database.add_plato (data, this.para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false) {\n    const filePath = '/Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_plato (data, this.para_agregar, this._para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n        } else {\n          this.database.add_plato (data, this.para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  cambiar_estado_plato (plato: any) {\n    this.loading = true;\n    plato.habilitado = !plato.habilitado;\n    this.database.update_plato (plato, [], [])\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log (error);\n        this.loading = false;\n      });\n  }\n\n  async editar_plato (plato: any) {\n    this.para_agregar = [];\n    this._para_agregar = [];\n    console.log (plato);\n    this.avatar_preview = plato.imagen;\n    this.plato_editar = true;\n\n    let res: any [] = await this.database.get_plato_insumos_by_plato_id (plato.id).pipe (first ()).toPromise ();\n    console.log (res);\n    res.forEach ((p_i: any) => {\n      if (p_i.insumo !== undefined) {\n        this.para_agregar.push ({\n          id: p_i.data.id,\n          insumo_id: p_i.insumo.id,\n          cantidad: p_i.data.cantidad,\n          unidad_medida: p_i.insumo.unidad_medida,\n          nombre: p_i.insumo.nombre\n        });\n\n        this._para_agregar.push ({\n          id: p_i.data.id,\n          insumo_id: p_i.insumo.id,\n          cantidad: p_i.data.cantidad,\n          unidad_medida: p_i.insumo.unidad_medida,\n          nombre: p_i.insumo.nombre\n        });\n      }\n    });\n\n    console.log (this.para_agregar);\n    console.log (this._para_agregar);\n\n    this.vista = 'registrar';\n    this.form_plato.patchValue (plato);\n  }\n\n  uploadComboImageAsPromise (file: any, data: any, dialog: any) {\n    const filePath = '/Combos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n        this.database.add_promocion (data)\n          .then (() => {\n            this.form_promocion.reset ();\n            this.loading = false;\n            dialog.close ();\n            this.combo_list = [];\n            this.avatar_preview = null;\n            this.file_combo = null;\n          })\n          .catch ((error: any) => {\n            this.form_promocion.reset ();\n            console.log (error);\n            dialog.close ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file_combo = null;\n          });\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_promocion (dialog: any, data: any) {\n    this.loading = true;\n    let request: any = {\n      id: this.database.createId (),\n      nombre: this.form_promocion.value.nombre,\n      empresa_id: this.empresa_id,\n      carta_id: data.id,\n      descripcion: this.form_promocion.value.descripcion,\n      descuento: this.form_promocion.value.descuento,\n      orden: 0,\n      tipo: this.form_promocion.value.tipo_promocion,\n    };\n\n    if (this.form_promocion.value.tipo_promocion === '0') {\n      request.precio_total = this.form_promocion.value.plato_id.precio,\n      request.plato = {\n        id: this.form_promocion.value.plato_id.id,\n        nombre: this.form_promocion.value.plato_id.nombre,\n        imagen: this.form_promocion.value.plato_id.imagen,\n        tipo: 'plato'\n      }\n\n      console.log (request);\n      this.database.add_promocion (request)\n        .then (() => {\n          this.form_promocion.reset ();\n          this.loading = false;\n          dialog.close ();\n          this.combo_list = [];\n          this.avatar_preview = null;\n          this.file_combo = null;\n        })\n        .catch ((error: any) => {\n          this.form_promocion.reset ();\n          console.log (error);\n          dialog.close ();\n          this.loading = false;\n          this.avatar_preview = null;\n          this.file_combo = null;\n        });\n    } else {\n      let platos: any [] = [];\n      let precio_total = 0;\n      this.combo_list.forEach ((e: any) => {\n        precio_total += e.precio - (e.precio * (request.descuento / 100)),\n        platos.push ({\n          id: e.id,\n          empresa_id: e.empresa_id,\n          imagen: e.imagen,\n          nombre: e.nombre,\n          precio: e.precio,\n          tipo: e.tipo\n        });\n      });\n      request.platos = platos;\n      request.precio_total = precio_total;\n\n      if (this.file_combo === null) {\n        this.database.add_promocion (request)\n          .then (() => {\n            this.form_promocion.reset ();\n            this.loading = false;\n            dialog.close ();\n            this.combo_list = [];\n            this.avatar_preview = null;\n            this.file_combo = null;\n          })\n          .catch ((error: any) => {\n            this.form_promocion.reset ();\n            console.log (error);\n            dialog.close ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file_combo = null;\n          });\n      } else {\n        this.uploadComboImageAsPromise (this.file_combo, request, dialog);\n      }\n    }\n  }\n\n  abrir_registrar_promocion (dialog: any, carta: any) {\n    this.dialogService.open (dialog, {\n      context: carta\n    })\n  }\n\n  tipo_promocion_changed () {\n    // if (this.tipo_promocion == 0) {\n    //   this.form_promocion = this.form_promocion_plato;\n    //   this.form_promocion.controls ['tipo_promocion'].setValue (0);\n    // } else {\n    //   this.form_promocion = this.form_promocion_combo;\n    //   this.form_promocion.controls ['tipo_promocion'].setValue (1);\n    // }\n  }\n\n  plato_selected_changed (event: any) {\n    console.log (event);\n\n    event.tipo = 'plato';\n    if (this.combo_list.find (x => x.id == event.id) === undefined) {\n      this.combo_list.push (event);\n    }\n\n    this.plato_selected = '';\n    event = '';\n  }\n\n  insumo_selected_changed (event: any) {\n    console.log (event);\n    if (this.combo_list.find (x => x.id == event.insumo.id) === undefined) {\n      this.combo_list.push ({\n        nombre: event.insumo.nombre,\n        precio: event.insumo.precio,\n        id: event.insumo.id,\n        empresa_id: event.data.empresa_id,\n        imagen: '',\n        tipo: 'insumo'\n      });\n    }\n\n    this.insumo_selected = '';\n    event = '';\n  }\n\n  get_promociones_by_carta (carta_id: string) {\n    return this.promociones.filter ((e: any) => {\n      return e.carta_id === carta_id;\n    });\n  }\n\n  eliminar_promocion (data: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar esta promocion?\")) {\n      this.loading = true;\n      this.database.delete_promocion (data).then (() => {\n        this.loading = false;\n      }, error => {\n        console.log (error);\n        this.loading = false;\n      });\n    }\n  }\n\n  regresar_principal () {\n    this.vista = 'principal'\n    this.para_agregar = [];\n  }\n\n  eliminar_plato_validar (plato: any) {\n    if (plato ['resumen_' + moment ().format ('YYYY')] !== undefined) {\n      if (confirm ('¿Esta seguro que desea eliminar este plato?')) {\n        this.loading = true;\n        this.database.delete_plato (plato.id).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    } else {\n      this.loading = true;\n      this.database.delete_plato (plato.id).then (() => {\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  eliminar_carta_validar (carta: any) {\n    console.log (carta);\n    if (carta.data.tipo_carta === '0') {\n      let menus_dia = this.menus_dia.filter ((x: any) => {\n        return x.carta_id === carta.data.id;\n      });\n\n      this.database.delete_carta_menu (carta.data.id, menus_dia).then (() => {\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n        console.log (error);\n      });\n    } else if (carta.data.tipo_carta === '1') {\n      let promociones: any [] = [];\n      this.promociones.forEach ((promocion: any) => {\n        if (promocion.tipo === '0') {\n          if (carta.platos.find (x => x.id === promocion.plato.id) !== undefined) {\n            if (promociones.find (x => x.id === promocion.id) === undefined) {\n              promociones.push (promocion);\n            }\n          }\n        }\n\n        if (promocion.tipo === '1') {\n          promocion.platos.forEach ((plato: any) => {\n            if (carta.platos.find (x => x.id === plato.id) !== undefined) {\n              if (promociones.find (x => x.id === promocion.id) === undefined) {\n                promociones.push (promocion);\n              }\n            }\n          });\n        }\n      });\n\n      if (carta.platos.length > 0) {\n        if (confirm ('¿Esta seguro que quiere eliminar esta carta?')) {\n          console.log (promociones);\n          this.loading = true;\n          this.database.delete_carta_extra (carta.data.id, carta.platos, promociones).then (() => {\n            this.loading = false;\n          }, error => {\n            this.loading = false;\n            console.log (error);\n          });\n        }\n      } else {\n        this.loading = true;\n        console.log (promociones);\n        this.database.delete_carta_extra (carta.data.id, carta.platos, promociones).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    } else if (carta.data.tipo_carta === '2') {\n      if (confirm ('¿Esta seguro que quiere eliminar esta carta tipo promoción?')) {\n        this.loading = true;\n        let promociones: any [] = this.get_promociones_by_carta (carta.data.id);\n        console.log (promociones);\n        this.database.delete_carta_promocion (carta.data.id, promociones).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    }\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"tipo_carta\" class=\"label\">Tipo de carta:</label>\n          <nb-select formControlName=\"tipo_carta\" id=\"tipo_carta\" fullWidth (selectedChange)=\"tipoCartaChanged ($event, data)\">\n            <nb-option value='0'>Menu</nb-option>\n            <nb-option value='1'>Extra</nb-option>\n            <nb-option value='2'>Promoción</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\" *ngIf=\"data.tipo_carta == '0'\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"change_menu_Listener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"precio\" class=\"label\">Precio:</label>\n              <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Orden:</label>\n              <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_menu_dia let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_menu_dia\">\n        <div *ngIf=\"data.tipo === 'menu'\" class=\"form-group\">\n          <label for=\"menu_id\" class=\"label\">{{ data.menu.nombre }}:</label>\n          <nb-select formControlName=\"menu_id\" id=\"menu_id\" fullWidth (selectedChange)=\"menu_changed (data.tipo)\">\n            <nb-option *ngFor=\"let item of data.menus\" [value]=item.data.id>\n              {{ item.data.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div *ngIf=\"data.tipo !== 'menu'\" class=\"form-group\">\n          <label for=\"menu_id\" class=\"label\">Desde el almacen:</label>\n          <nb-select formControlName=\"menu_id\" id=\"menu_id\" fullWidth (selectedChange)=\"menu_changed (data.tipo)\">\n            <nb-option *ngFor=\"let item of almacen_insumos\" [value]=\"item.data.id\">\n              {{ item.insumo.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div *ngIf=\"data.tipo === 'menu'\" class=\"form-group\">\n          <label for=\"stock\" class=\"label\">Cantidad a vender:</label>\n          <input type=\"number\" min=\"1\" formControlName=\"stock\" id=\"stock\" nbInput fullWidth>\n        </div>\n\n        <!-- <div class=\"form-group\">\n          <label for=\"precio\" class=\"label\">Precio:</label>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit_menu_dia (ref, data)\" [disabled]=\"!form_menu_dia.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_registrar_promocion let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: -webkit-fill-available; max-height: 500px;\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_promocion\">\n        <div class=\"form-group\">\n          <label for=\"tipo_promocion\" class=\"label\">Tipo de promocion:</label>\n          <nb-select id=\"tipo_promocion\" formControlName=\"tipo_promocion\" fullWidth (selectedChange)=\"tipo_promocion_changed ()\" placeholder=\"Tipo de promocion\">\n            <nb-option value='0'>Promocionar un plato</nb-option>\n            <nb-option value='1'>Armar un combo</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\" *ngIf=\"form_promocion.value.tipo_promocion === '1'\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"change_combo_Listener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" min=1 formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"descripcion\" class=\"label\">Descripcion:</label>\n          <textarea nbInput formControlName=\"descripcion\" id=\"descripcion\" fullWidth></textarea>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"descuento\" class=\"label\">Descuento:</label>\n          <input type=\"number\" min=1 formControlName=\"descuento\" id=\"descuento\" nbInput fullWidth>\n        </div>\n\n        <div *ngIf=\"form_promocion.value.tipo_promocion === '0'\">\n          <div class=\"form-group\">\n            <label for=\"plato_id\" class=\"label\">Seleccionar un plato:</label>\n            <nb-select id=\"plato_id\" formControlName=\"plato_id\" fullWidth>\n              <nb-option *ngFor=\"let plato of all_platos\" [value]=plato>\n                <ng-container *ngIf=\"plato.empresa_id === empresa_id\">\n                  {{ plato.nombre }}\n                </ng-container>\n              </nb-option>\n            </nb-select>\n          </div>\n\n          <div class=\"form-group\">\n            <b>Precio:</b> {{ form_promocion.value?.plato_id.precio | currency:'S/. ' }}\n          </div>\n          <div class=\"form-group\">\n            <b>Descuento:</b> ({{ form_promocion.value?.descuento }}%): {{ form_promocion.value?.plato_id.precio - (form_promocion.value?.plato_id.precio * (form_promocion.value?.descuento / 100)) }}\n          </div>\n        </div>\n      </form>\n\n      <div *ngIf=\"form_promocion.value.tipo_promocion == 1\">\n        <div class=\"form-group\">\n          <label for=\"plato_selected\" class=\"label\">Registrar un plato:</label>\n          <nb-select id=\"plato_selected\" [(ngModel)]=\"plato_selected\" fullWidth (selectedChange)=\"plato_selected_changed ($event)\">\n            <nb-option *ngFor=\"let plato of all_platos\" [value]=plato>\n              {{ plato.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"plato_selected\" class=\"label\">Registrar un insumo:</label>\n          <nb-select id=\"plato_selected\" [(ngModel)]=\"insumo_selected\" fullWidth (selectedChange)=\"insumo_selected_changed ($event)\">\n            <nb-option *ngFor=\"let insumo of almacen_insumos\" [value]=insumo>\n              {{ insumo.insumo.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <table class=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Nombre</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Con descuento ({{ form_promocion.value.descuento }}%)</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of combo_list\">\n              <th scope=\"row\">{{ item.nombre }}</th>\n              <td>{{ item.precio }}</td>\n              <td>{{ item.precio - (item.precio * (form_promocion.value.descuento / 100)) }}</td>\n              <td>\n                <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove_plato_promocion (item)\"></nb-icon>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_promocion (ref, data)\" [disabled]=\"!form_promocion.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card *ngIf=\"vista === 'principal'\" [nbSpinner]=\"loading\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/home'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5>Cartas: {{ empresa?.nombre }}</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-body>\n        <div class=\"row\">\n          <div class=\"col-6\" *ngFor=\"let carta of items | orderBy: orden\">\n            <nb-card>\n              <nb-card-header>\n                <div class=\"row\">\n                  <div class=\"col-8\">\n                    <img style=\"width: 32px;\" *ngIf=\"carta.data.tipo_carta === '0'\" [src]=\"carta.data.imagen\">\n                    {{ carta.data.nombre }}\n                  </div>\n\n                  <div class=\"col-4\">\n                    <span *ngIf=\"carta.data.tipo_carta === '0'\">\n                      {{ carta.data.precio | currency:'S/. ' }}\n                    </span>\n                  </div>\n                </div>\n              </nb-card-header>\n\n              <div *ngIf=\"carta.data.tipo_carta === '0'\">\n                <nb-list *ngFor=\"let menu of menu_elementos\">\n                  <nb-list-item style=\"background-color: #d4d3d1; display: flow-root;\">\n                    {{ menu.nombre }}\n                    &nbsp;\n                    ({{ menu.precio | currency:'S/. ' }})\n                    <nb-icon class=\"plus-button\" icon=\"plus-outline\" (click)=\"registrar_menu_dia (carta.data, menu, dialog_menu_dia, 'menu')\"></nb-icon>\n                  </nb-list-item>\n\n                  <nb-list-item style=\"display: flow-root;\" *ngFor=\"let menu_dia of get_menus (carta.data, menu, 'menu')\">\n                    <div class=\"row\">\n                      <div class=\"col-10\">\n                        {{ menu_dia.stock }} Unid. - {{ menu_dia.menu_nombre }}\n                      </div>\n\n                      <div class=\"col-2\">\n                        <nb-icon (click)=\"eliminar_menu_dia (menu_dia)\" status=\"danger\" icon=\"close-outline\"></nb-icon>\n                      </div>\n                    </div>\n                  </nb-list-item>\n                </nb-list>\n              </div>\n\n              <div *ngIf=\"carta.data.tipo_carta === '1'\">\n                <div *ngFor=\"let plato of carta.platos | orderBy: orden\">\n                  <div class=\"row\" style=\"align-items: center; padding: 12px;\">\n                    <div class=\"col-3\">\n                      <img style=\"width: 64px; height: auto;\" [src]=\"plato.imagen\">\n                    </div>\n\n                    <div class=\"col-5\">\n                      {{ plato.nombre }}\n                    </div>\n\n                    <div class=\"col-1\" style=\"text-align: end; padding-right: 0px;\" (click)=\"editar_plato (plato)\">\n                      <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                    </div>\n\n                    <div class=\"col-1\" (click)=\"cambiar_estado_plato (plato)\">\n                      <nb-icon *ngIf=\"plato.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                      <nb-icon *ngIf=\"!plato.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                    </div>\n\n                    <div class=\"col-1\" (click)=\"eliminar_plato_validar (plato)\">\n                      <nb-icon status=\"danger\" icon=\"trash-2-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </div>\n\n                <nb-list-item style=\"background-color: #d4d3d1;\">\n                  Extras\n                  <nb-icon class=\"plus-button\" icon=\"plus-outline\" (click)=\"registrar_menu_dia (carta.data, null, dialog_menu_dia, 'extras')\"></nb-icon>\n                </nb-list-item>\n\n                <nb-list-item *ngFor=\"let menu_dia of get_menus (carta.data, null, 'extras')\">\n                  <div class=\"row\">\n                    <div class=\"col-10\">\n                      {{ menu_dia.stock }} Unid. - {{ menu_dia.menu_nombre }}<br>{{ menu_dia.precio | currency:'S/. ' }}\n                    </div>\n\n                    <div class=\"col-2\">\n                      <nb-icon (click)=\"eliminar_menu_dia (menu_dia)\" status=\"danger\" icon=\"close-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </nb-list-item>\n              </div>\n\n              <nb-list *ngIf=\"carta.data.tipo_carta === '2'\">\n                <nb-list-item *ngFor=\"let promocion of get_promociones_by_carta (carta.data.id)\">\n                  <div class=\"row\" style=\"display: contents;\">\n                    <div class=\"col-3\">\n                      <img style=\"width: 48px;\" *ngIf=\"promocion.tipo === '1'\"[src]=\"promocion.imagen\">\n                      <img style=\"width: 48px;\" *ngIf=\"promocion.tipo === '0'\"[src]=\"promocion.plato.imagen\">\n                    </div>\n                    <div class=\"col-7\">\n                      {{ promocion.nombre }} {{ promocion.precio_total }}\n                    </div>\n\n                    <div class=\"col-2\">\n                      <nb-icon status=\"danger\" (click)=\"eliminar_promocion (promocion)\" icon=\"close-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </nb-list-item>\n              </nb-list>\n\n              <nb-card-footer style=\"display: inline-flex;\">\n                <button *ngIf=\"carta.data.tipo_carta === '2'\" title=\"Crear combo\" nbButton fullWidth size=\"small\" ghost (click)=\"abrir_registrar_promocion (dialog_registrar_promocion, carta.data)\">\n                  <nb-icon status=\"primary\" icon=\"plus-outline\"></nb-icon>\n                </button>\n\n                <button *ngIf=\"carta.data.tipo_carta === '0'\" nbButton fullWidth size=\"small\" ghost>\n                  <nb-icon status=\"primary\" icon=\"book-open-outline\"></nb-icon>\n                </button>\n\n                <button *ngIf=\"carta.data.tipo_carta === '1'\" nbButton fullWidth size=\"small\" ghost (click)=\"vista_registrar_plato (carta.data)\">\n                  <nb-icon status=\"primary\" icon=\"plus-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (carta.data, dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (carta.data)\">\n                  <nb-icon *ngIf=\"carta.data.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                  <nb-icon *ngIf=\"!carta.data.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"eliminar_carta_validar (carta)\">\n                  <nb-icon status=\"danger\" icon=\"trash-2-outline\"></nb-icon>\n                </button>\n              </nb-card-footer>\n            </nb-card>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n\n    <nb-card *ngIf=\"vista === 'registrar'\" [nbSpinner]=\"loading\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"regresar_principal ()\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5 *ngIf=\"plato_editar === false\">Registrar Plato</h5>\n            <h5 *ngIf=\"plato_editar === true\">Editar Plato</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"submit_plato ()\" [disabled]=\"!form_plato.valid || para_agregar.length <= 0\">Continuar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-body>\n        <form [formGroup]=\"form_plato\">\n          <div class=\"row\">\n            <div class=\"col-6 offset-3\">\n              <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n                <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n              </div>\n\n              <div class=\"\" (click)=\"fileInput.click ()\">\n                <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n                <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"text\" min=\"1\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"resumen\" class=\"label\">Resumen:</label>\n            <textarea nbInput formControlName=\"resumen\" id=\"resumen\" fullWidth></textarea>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"descripcion\" class=\"label\">Descripcion:</label>\n            <textarea nbInput formControlName=\"descripcion\" id=\"descripcion\" fullWidth></textarea>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <div class=\"form-group\">\n                <label for=\"precio\" class=\"label\">Precio:</label>\n                <input type=\"number\" min=\"1\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n              </div>\n            </div>\n\n            <div class=\"col-6\">\n              <div class=\"form-group\">\n                <label for=\"orden\" class=\"label\">Orden:</label>\n                <input type=\"number\" min=\"1\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n              </div>\n            </div>\n          </div>\n\n          <!-- <nb-toggle formControlName=\"es_adicional\" labelPosition=\"start\">Es adicional</nb-toggle> -->\n          <!-- &nbsp; -->\n          <nb-toggle formControlName=\"habilitado\" labelPosition=\"start\">Habilitado</nb-toggle>\n        </form>\n      </nb-card-body>\n\n      <h5 style=\"margin-left: 1rem;\">Ingredientes</h5>\n\n      <div class=\"row\">\n        <div class=\"col-3\">\n          <input #autoInput\n            style=\"width: 100%; margin: 12px;\"\n            [(ngModel)]=\"search_text\"\n            nbInput\n            type=\"text\"\n            (ngModelChange)=\"onChange ()\"\n            placeholder=\"Buscar un insumo...\"/>\n\n          <div *ngFor=\"let item of insumos\" style=\"margin-left: 12px; padding: 6px;\">\n            <div class=\"row\">\n              <div class=\"col-8\">\n                {{ item.data.nombre }}\n              </div>\n\n              <div class=\"col-4\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"agregar_para_agregar (item.data)\">\n                  <nb-icon status=\"primary\" icon=\"arrowhead-right-outline\"></nb-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-9\" style=\"padding-right: 27px;\">\n          <table class=\"table table-bordered table-striped\" style=\"margin-top: 12px;\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Nombre</th>\n                <th scope=\"col\">Cantidad</th>\n                <th scope=\"col\">Unidad medida</th>\n                <th scope=\"col\"></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <tr *ngFor=\"let item of para_agregar\">\n                <td>\n                  {{ item.nombre }}\n                </td>\n\n                <td>\n                  <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n                </td>\n\n                <td>\n                  {{ item.unidad_medida }}\n                </td>\n\n                <td style=\"width: 12px;\">\n                  <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n                </td>\n              </tr>\n\n              <!-- <tr *ngIf=\"get_precio_total () > 0\">\n                <td colspan=\"3\">&nbsp;</td>\n                <td>\n                  {{ get_precio_total () | currency:'S/. ' }}\n                </td>\n                <td></td>\n              </tr> -->\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n\n\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-header>\n        Tipo:\n        &nbsp;\n        &nbsp;\n        <nb-select placeholder=\"Seleccione una opcion\" (selectedChange)=\"tipo_reporte_changed ()\" [(ngModel)]=\"tipo_reporte\">\n          <nb-option value=\"diario\">Reporte diario</nb-option>\n          <nb-option value=\"mensual\">Reporte mensual</nb-option>\n          <nb-option value=\"anual\">Reporte anual</nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <ng-container *ngIf=\"tipo_reporte === 'diario'\">\n          Fecha:\n          &nbsp;\n          &nbsp;\n          <input nbInput  size=\"tiny\" type=\"date\" (change)=\"mostrar_estadisticas ()\" [(ngModel)]=\"fecha_seleccionada\">\n        </ng-container>\n\n        <ng-container *ngIf=\"tipo_reporte === 'mensual'\">\n          Mes:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"mes_seleccionado\">\n            <nb-option value=\"01\">Enero</nb-option>\n            <nb-option value=\"02\">Febrero</nb-option>\n            <nb-option value=\"03\">Marzo</nb-option>\n            <nb-option value=\"04\">Abril</nb-option>\n            <nb-option value=\"05\">Mayo</nb-option>\n            <nb-option value=\"06\">Junio</nb-option>\n            <nb-option value=\"07\">Julio</nb-option>\n            <nb-option value=\"08\">Agosto</nb-option>\n            <nb-option value=\"09\">Septiembre</nb-option>\n            <nb-option value=\"10\">Obtumbre</nb-option>\n            <nb-option value=\"11\">Noviembre</nb-option>\n            <nb-option value=\"12\">Diciembre</nb-option>\n          </nb-select>\n          &nbsp;\n          &nbsp;\n          Año:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"anio_seleccionado\">\n            <nb-option value=\"2020\">2020</nb-option>\n            <nb-option value=\"2021\">2021</nb-option>\n            <nb-option value=\"2022\">2022</nb-option>\n            <nb-option value=\"2023\">2023</nb-option>\n            <nb-option value=\"2024\">2024</nb-option>\n            <nb-option value=\"2025\">2025</nb-option>\n          </nb-select>\n        </ng-container>\n\n        <ng-container *ngIf=\"tipo_reporte === 'anual'\">\n          Año:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"anio_seleccionado\">\n            <nb-option value=\"2020\">2020</nb-option>\n            <nb-option value=\"2021\">2021</nb-option>\n            <nb-option value=\"2022\">2022</nb-option>\n            <nb-option value=\"2023\">2023</nb-option>\n            <nb-option value=\"2024\">2024</nb-option>\n            <nb-option value=\"2025\">2025</nb-option>\n          </nb-select>\n        </ng-container>\n        &nbsp;\n        &nbsp;\n        Empresa:\n        &nbsp;\n        &nbsp;\n        <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"empresa_seleccionada\">\n          <nb-option *ngFor=\"let empresa of empresas\" [value]=\"empresa.id\">\n            {{ empresa.nombre }}\n          </nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <nb-card-header>\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <nb-card accent=\"primary\">\n              <nb-card-header>Ingresos</nb-card-header>\n              <nb-card-body>\n                <h2>{{ ventas_total | currency:'S/. ' }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n\n          <div class=\"col-4\">\n            <nb-card accent=\"danger\">\n              <nb-card-header>Gastos</nb-card-header>\n              <nb-card-body>\n                <h2>{{ compras_total | currency:'S/. '  }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n\n          <div class=\"col-4\">\n            <nb-card accent=\"success\">\n              <nb-card-header>Ganancias</nb-card-header>\n              <nb-card-body>\n                <h2>{{ get_ganancia () | currency:'S/. ' }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-header>\n        <nb-select [(ngModel)]=\"tipo_filtro\">\n          <nb-option value=\"ingresos\">Ingresos</nb-option>\n          <nb-option value=\"gastos\">Gastos</nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <nb-card-body *ngIf=\"tipo_filtro === 'gastos'\">\n        <div class=\"row\" style=\"padding: 6px; font-weight:bold; border-bottom:1px solid #666;\">\n          <div class=\"col\">Nombre</div>\n          <div class=\"col\">Cantidad</div>\n          <div class=\"col\">Monto (S/)</div>\n          <div class=\"col\">Historial</div>\n        </div>\n\n        <div class=\"row\" *ngFor=\"let item of gastos_map | keyvalue\" style=\"align-items: center; padding: 6px; border-bottom:1px solid #CCC;\">\n          <div class=\"col\">\n            {{ item.value.nombre }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.cantidad }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.precio | currency:'S/ ' }}\n          </div>\n\n          <div class=\"col\">\n            <button nbButton size=\"tiny\" ghost status=\"primary\">Ver historial</button>\n          </div>\n        </div>\n      </nb-card-body>\n\n      <nb-card-body *ngIf=\"tipo_filtro === 'ingresos'\">\n        <div class=\"row\" style=\"padding: 6px; font-weight:bold; border-bottom:1px solid #666;\">\n          <div class=\"col\">Nombre</div>\n          <div class=\"col\">Tipo</div>\n          <div class=\"col\">Cantidad</div>\n          <div class=\"col\">Monto (S/)</div>\n          <div class=\"col\">Historial</div>\n        </div>\n\n        <div class=\"row\" *ngFor=\"let item of ingresos_map | keyvalue\" style=\"align-items: center; padding: 6px; border-bottom:1px solid #CCC;\">\n          <div class=\"col\">\n            {{ item.value.nombre }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.tipo }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.cantidad }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.precio | currency:'S/ ' }}\n          </div>\n\n          <div class=\"col\">\n            <button nbButton size=\"tiny\" ghost status=\"primary\">Ver historial</button>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { DatabaseService } from '../../services/database.service';\nimport * as moment from 'moment';\nimport { first } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngx-estadisticas',\n  templateUrl: './estadisticas.component.html',\n  styleUrls: ['./estadisticas.component.scss']\n})\nexport class EstadisticasComponent implements OnInit {\n  tipo: string;\n  loading: boolean = false;\n\n  empresas: any [] = [];\n  meses: any [] = ['01', '02', '03', '04', '05', '06',\n                   '07', '08', '09', '10', '11', '12']\n  empresas_map: Map <string, any> = new Map <string, any> ();\n  gastos_map: Map <string, any> = new Map <string, any> ();\n  ingresos_map: Map <string, any> = new Map <string, any> ();\n  tipo_reporte: string = 'diario';\n  tipo_filtro: string = 'ingresos';\n  fecha_seleccionada: string = moment ().format ('YYYY[-]MM[-]DD');\n  mes_seleccionado: string = moment ().format ('MM');\n  anio_seleccionado: string = moment ().format ('YYYY');\n  empresa_seleccionada: any;\n  ventas_total: number = 0;\n  compras_total: number = 0;\n  constructor (\n    private route: ActivatedRoute,\n    private database: DatabaseService\n  ) { }\n\n  ngOnInit(): void {\n    this.tipo = this.route.snapshot.paramMap.get ('tipo');\n    console.log (this.tipo);\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.empresas = res;\n\n      if (res.length > 0) {\n        this.empresa_seleccionada = res [0].id;\n      }\n\n      res.forEach ((empresa: any) => {\n        this.empresas_map [empresa.id] = empresa;\n      });\n\n      this.mostrar_estadisticas ();\n    });\n  }\n\n  async mostrar_estadisticas () {\n    this.loading = true;\n    this.ventas_total = 0;\n    this.compras_total = 0;\n    this.gastos_map.clear ();\n    this.ingresos_map.clear ();\n\n    if (this.tipo_reporte === 'diario') {\n      const empresa: any = this.empresas_map [this.empresa_seleccionada];\n      const dia = this.fecha_seleccionada.split ('-') [2]\n      const mes = this.fecha_seleccionada.split ('-') [1]\n      const anio = this.fecha_seleccionada.split ('-') [0]\n\n      let res: any [] = await this.database.get_ingresos_insumo_empresa_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      res.forEach ((insumo: any) => {\n        if (this.gastos_map.has (insumo.insumo_id)) {\n          this.gastos_map.get (insumo.insumo_id).cantidad += insumo.cantidad;\n          this.gastos_map.get (insumo.insumo_id).precio += insumo.precio * insumo.cantidad;\n        } else {\n          this.gastos_map.set (insumo.insumo_id, {\n            nombre: insumo.nombre,\n            cantidad: insumo.cantidad,\n            precio: insumo.precio * insumo.cantidad\n          });\n        }\n      });\n\n      this.gastos_map.forEach ((value: any) => {\n        this.compras_total += value.precio;\n      });\n\n      res = await this.database.get_pedidos_platos_dia_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      console.log (res);\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'extra') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'menu') {\n              if (this.ingresos_map.has (plato.carta_id)) {\n                this.ingresos_map.get (plato.carta_id).cantidad += 1;\n                this.ingresos_map.get (plato.carta_id).precio += plato.precio;\n              } else {\n                this.ingresos_map.set (plato.carta_id, {\n                  nombre: plato.menu_nombre,\n                  cantidad: 1,\n                  precio: plato.precio,\n                  tipo: 'Menu'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '0') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '1') {\n              plato.platos.forEach ((element: any) => {\n                if (this.ingresos_map.has (element.id)) {\n                  this.ingresos_map.get (element.id).cantidad += plato.cantidad;\n                  this.ingresos_map.get (element.id).precio += element.precio * plato.cantidad;\n                } else {\n                  this.ingresos_map.set (element.id, {\n                    nombre: element.nombre,\n                    cantidad: plato.cantidad,\n                    precio: element.precio * plato.cantidad,\n                    tipo: 'Plato'\n                  });\n                }\n              });\n            }\n          }\n        });\n      });\n\n      res = await this.database.get_restaurante_pedidos_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      // console.log (res);\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'plato') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            }\n          }\n        });\n      });\n\n      // console.log (this.ingresos_map);\n      this.ingresos_map.forEach ((value: any) => {\n        this.ventas_total += value.precio;\n      });\n\n      this.loading = false;\n    } else if (this.tipo_reporte === 'mensual') {\n      const empresa: any = this.empresas_map [this.empresa_seleccionada];\n\n      if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n        if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_vendido_' + this.mes_seleccionado)) {\n          this.ventas_total = empresa ['resumen_' + this.anio_seleccionado] ['monto_vendido_' + this.mes_seleccionado];\n        } else {\n          this.ventas_total = 0;\n        }\n      } else {\n        this.ventas_total = 0;\n      }\n\n      if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n        if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_comprado_' + this.mes_seleccionado)) {\n          this.compras_total = empresa ['resumen_' + this.anio_seleccionado] ['monto_comprado_' + this.mes_seleccionado];\n        } else {\n          this.compras_total = 0;\n        }\n      } else {\n        this.compras_total = 0;\n      }\n\n      let res: any [] = await this.database.get_ingresos_insumo_empresa_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((insumo: any) => {\n        if (this.gastos_map.has (insumo.insumo_id)) {\n          this.gastos_map.get (insumo.insumo_id).cantidad += insumo.cantidad;\n          this.gastos_map.get (insumo.insumo_id).precio += insumo.precio * insumo.cantidad;\n        } else {\n          this.gastos_map.set (insumo.insumo_id, {\n            nombre: insumo.nombre,\n            cantidad: insumo.cantidad,\n            precio: insumo.precio * insumo.cantidad\n          });\n        }\n      });\n\n      res = await this.database.get_pedidos_platos_dia_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'extra') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'menu') {\n              if (this.ingresos_map.has (plato.carta_id)) {\n                this.ingresos_map.get (plato.carta_id).cantidad += 1;\n                this.ingresos_map.get (plato.carta_id).precio += plato.precio;\n              } else {\n                this.ingresos_map.set (plato.carta_id, {\n                  nombre: plato.menu_nombre,\n                  cantidad: 1,\n                  precio: plato.precio,\n                  tipo: 'Menu'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '0') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '1') {\n              plato.platos.forEach ((element: any) => {\n                if (this.ingresos_map.has (element.id)) {\n                  this.ingresos_map.get (element.id).cantidad += plato.cantidad;\n                  this.ingresos_map.get (element.id).precio += element.precio * plato.cantidad;\n                } else {\n                  this.ingresos_map.set (element.id, {\n                    nombre: element.nombre,\n                    cantidad: plato.cantidad,\n                    precio: element.precio * plato.cantidad,\n                    tipo: 'Plato'\n                  });\n                }\n              });\n            }\n          }\n        });\n      });\n\n      res = await this.database.get_restaurante_pedidos_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'plato') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            }\n          }\n        });\n      });\n\n      this.loading = false;\n    } else if (this.tipo_reporte === 'anual') {\n      // const empresa: any = this.empresas_map [this.empresa_seleccionada];\n      // console.log (empresa);\n      // this.ventas_total = 0;\n      // this.compras_total = 0;\n      // if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n      //   this.meses.forEach ((mes: any) => {\n      //     if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_vendido_' + mes)) {\n      //       this.ventas_total += empresa ['resumen_' + this.anio_seleccionado] ['monto_vendido_' + mes];\n      //     }\n\n      //     if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_comprado_' + mes)) {\n      //       this.compras_total += empresa ['resumen_' + this.anio_seleccionado] ['monto_comprado_' + mes];\n      //     }\n      //   });\n      // }\n\n      // let res: any [] = await this.database.get_ingresos_insumo_empresa_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // console.log (res);\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'egreso',\n      //     cantidad: i.cantidad,\n      //     precio: i.precio,\n      //     nombre: i.nombre,\n      //     tipo_comprobante: i.tipo_comprobante,\n      //     nro_comprobante: i.nro_comprobante,\n      //     fecha: i.fecha\n      //   });\n      // });\n\n      // res = await this.database.get_pedidos_platos_dia_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'ingreso',\n      //     cantidad: i.platos.length,\n      //     precio: i.monto_total,\n      //     nombre: 'App Pedido',\n      //     tipo_comprobante: 'ninguno',\n      //     nro_comprobante: '',\n      //     fecha: i.fecha.substring (0, 10)\n      //   });\n      // });\n\n      // res = await this.database.get_restaurante_pedidos_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'ingreso',\n      //     cantidad: i.platos.length,\n      //     precio: i.monto_total,\n      //     nombre: 'Restaurante Pedido',\n      //     tipo_comprobante: i.tipo_comprobante,\n      //     nro_comprobante: '',\n      //     fecha: i.fecha\n      //   });\n      // });\n\n      this.loading = false;\n    }\n  }\n\n  validar_valor (object: any, value: string) {\n    if (object [value] === null || object [value] === undefined) {\n      return false;\n    }\n\n    return true;\n  }\n\n  tipo_reporte_changed () {\n    if (this.tipo_reporte === 'diario') {\n      this.fecha_seleccionada = moment ().format ('YYYY[-]MM[-]DD');\n    } else if (this.tipo_reporte === 'mensual') {\n      this.mes_seleccionado = moment ().format ('MM');\n      this.anio_seleccionado = moment ().format ('YYYY');\n    } else if (this.tipo_reporte === 'anual') {\n      this.anio_seleccionado = moment ().format ('YYYY');\n    }\n\n    this.mostrar_estadisticas ();\n  }\n\n  capitalize (name: string) {\n    if (name === undefined || name === null) {\n      return '';\n    }\n\n    return name.charAt (0).toUpperCase () + name.slice (1);\n  }\n\n  get_ganancia () {\n    return this.ventas_total - this.compras_total;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n// Servicios\nimport { AuthService } from '../../services/auth.service';\nimport { DatabaseService } from '../../services/database.service';\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-gestion-cambios-devoluciones',\n  templateUrl: './gestion-cambios-devoluciones.component.html',\n  styleUrls: ['./gestion-cambios-devoluciones.component.scss']\n})\nexport class GestionCambiosDevolucionesComponent implements OnInit {\n  es_usuario_valido: boolean = false;\n  form: FormGroup;\n  pos: any [] = [];\n  instancias: any = [];\n  pos_seleccionado;\n  fecha_seleccionada: string = '';\n  codigo: string = '';\n\n  venta: any = {\n    productos: []\n  };\n  lista_devolucion: Map <string, any> = new Map <string, any> ();\n  constructor (private auth: AuthService, private database: DatabaseService) { }\n\n  ngOnInit (): void {\n    this.form = new FormGroup ({\n      email: new FormControl ('', [Validators.required, Validators.email]),\n      password: new FormControl ('', Validators.required)\n    });\n\n    if (this.auth.usuario.tipo === 0) {\n      this.es_usuario_valido = true;\n    }\n\n    this.database.get_usuarios_by_tipo (-2).subscribe ((res: any []) => {\n      this.pos = res;\n    });\n  }\n\n  validar_usuario () {\n    this.database.validar_admin_is_valid (this.form.value.email, this.form.value.password).then ((res: any []) => {\n      if (res.length > 0) {\n        this.es_usuario_valido = true;\n      } else {\n        alert ('Este usuario no exixte o no tiene los permisos necesarios');\n      }\n    });\n  }\n\n  buscar_venta () {\n    const id = this.pos_seleccionado.id + moment (this.fecha_seleccionada).format ('[-]DD[-]MM[-]YYYY');\n    this.database.get_venta_by_pos (id, this.codigo).subscribe ((res: any) => {\n      this.venta = res;\n    });\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_total_lista (productos: any []) {\n    let total: number = 0;\n\n    productos.forEach ((producto: any) => {\n      total += producto.cantidad * producto.precio;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  verificar_producto (checked: any, item: any) {\n    console.log (checked);\n\n    if (checked.target.checked === true) {\n      this.lista_devolucion.set (item.id, item);\n    } else {\n      if (this.lista_devolucion.has (item.id)) {\n        this.lista_devolucion.delete (item.id);\n      }\n    }\n\n    console.log (this.lista_devolucion);\n  }\n\n  get_total_devolucion () {\n    let total: number = 0;\n\n    this.lista_devolucion.forEach ((producto: any) => {\n      total += producto.devolucion * producto.precio;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  generar () {\n    let productos: any [] = [];\n    this.lista_devolucion.forEach ((producto: any) => {\n      productos.push (producto);\n    });\n\n    let data: any = {\n      productos: productos,\n      total: this.get_total_devolucion (),\n      fecha: moment ().format ('L'),\n      hora: moment ().format ('h:mm'),\n      id: this.database.createId (),\n    }\n\n    console.log (data);\n\n    this.database.add_nota_credito (data).then ((_: any) => {\n      alert ('Nota de credito: ' + data.id);\n    }).catch ((error: any) => {\n      console.log (error);\n    });\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card *ngIf=\"es_usuario_valido\">\n      <nb-card-header>\n        POS:\n        &nbsp;\n        &nbsp;\n        <nb-select [(ngModel)]=\"pos_seleccionado\" placeholder=\"Seleccione una opcion\">\n          <nb-option *ngFor=\"let item of pos\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        Fecha:\n        &nbsp;\n        &nbsp;\n        <input type=\"date\" [(ngModel)]=\"fecha_seleccionada\" nbInput>\n        &nbsp;\n        &nbsp;\n        Codigo:\n        &nbsp;\n        &nbsp;\n        <input type=\"text\" nbInput [(ngModel)]=\"codigo\">\n        &nbsp;\n        &nbsp;\n        <button nbButton (click)=\"buscar_venta ()\">Buscar</button>\n      </nb-card-header>\n      <br>\n      <h6 *ngIf=\"venta?.id !== undefined\" style=\"margin-left: 1rem;\">Lista de productos</h6>\n      <table *ngIf=\"venta?.id !== undefined\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of venta?.productos\">\n            <td>\n              <nb-checkbox (change)=\"verificar_producto ($event, item)\" status=\"basic\">\n                Devolver\n              </nb-checkbox>\n            </td>\n            <td>\n              {{ venta.hora }}\n            </td>\n            <td>\n              {{ item.nombre }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.cantidad }}\n            </td>\n            <td>\n              {{ venta.cajero_nombre }}\n            </td>\n            <td>\n              {{ item.precio | currency:'S/. ' }}\n            </td>\n            <td>\n              {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"6\">Total:</td><td class=\"right\">{{ get_total_lista (venta?.productos) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <br>\n      <h6 *ngIf=\"lista_devolucion.size > 0\" style=\"margin-left: 1rem;\">Devolver</h6>\n      <table *ngIf=\"lista_devolucion.size > 0\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Devolucion</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of lista_devolucion | keyvalue\">\n            <td>\n              {{ item.value.nombre }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.cantidad }}\n            </td>\n            <td class=\"text-center\">\n              <input type=\"number\" [(ngModel)]=\"item.value.devolucion\" [max]=\"item.value.cantidad\" min=\"0\">\n            </td>\n\n            <td>\n              {{ item.value.precio | currency:'S/. ' }}\n            </td>\n            <td>\n              {{ get_total_format (item.value.precio * item.value.devolucion) | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"4\">Total:</td><td class=\"right\">{{ get_total_devolucion () | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <nb-card-footer *ngIf=\"get_total_devolucion () > 0\">\n        <button nbButton (click)=\"generar ()\">Generar nota de credito</button>\n      </nb-card-footer>\n    </nb-card>\n\n    <nb-card *ngIf=\"es_usuario_valido === false\">\n      <nb-card-body>\n        <form [formGroup]=\"form\" (ngSubmit)=\"validar_usuario ()\">\n          <div style=\"display: grid;\" class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"email\" nbInput formControlName=\"email\" placeholder=\"Correo\">\n          </div>\n\n          <div style=\"display: grid;\" class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"password\" nbInput formControlName=\"password\" placeholder=\"Contraseña\">\n          </div>\n        </form>\n      </nb-card-body>\n      <nb-card-footer>\n        <button nbButton (click)=\"validar_usuario ()\" [disabled]=\"form.invalid\">Ingresar</button>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-categorias',\n  templateUrl: './gestionar-categorias.component.html',\n  styleUrls: ['./gestionar-categorias.component.scss']\n})\nexport class GestionarCategoriasComponent implements OnInit {\n  form: FormGroup;\n  loading: boolean = true;\n  file: any =  null;\n  avatar_preview: any = null;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Imagen', 'Productos', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>,\n    private af_storage: AngularFireStorage,\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      console.log (res);\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {},\n      };\n      data.data ['data'] = i;\n      data.data ['Imagen'] = i.imagen;\n      data.data ['Nombre'] = i.nombre;\n      data.data ['Productos'] = i.cantidad_productos;\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    console.log (returned);\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  validURL (str: string) {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n    return !!pattern.test(str);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_tienda_categoria (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true, dialog);\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.cantidad_productos = 0;\n\n      if (this.file == null) {\n        this.database.add_tienda_categoria (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, false, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = 'Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_tienda_categoria (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        } else {\n          this.database.add_tienda_categoria (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    if (dialog !== null || dialog !== undefined) {\n      this.form.reset ();\n      this.dialogService.open (dialog, { context: false });\n    }\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.avatar_preview = item.imagen;\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.avatar_preview = null;\n    this.file = null;\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n      console.log (error);\n    };\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n        <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n      </div>\n\n      <div class=\"\" (click)=\"fileInput.click ()\">\n        <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n        <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n      </div>\n      <br>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Categorias</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar categoria...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <ng-container *ngIf=\"row.data [column] !== 'accion'\">\n                <ng-container *ngIf=\"column === 'Imagen'\">\n                  <img [src]=\"row.data [column]\">\n                </ng-container>\n                <ng-container *ngIf=\"column !== 'Imagen'\">\n                  {{ row.data [column] }}\n                </ng-container>\n              </ng-container>\n\n              <ng-container *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </ng-container>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-marcas',\n  templateUrl: './gestionar-marcas.component.html',\n  styleUrls: ['./gestionar-marcas.component.scss']\n})\nexport class GestionarMarcasComponent implements OnInit {\n  form: FormGroup;\n  avatar_preview: any = null;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Productos', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_tienda_marcas ().subscribe ((res: any []) => {\n      console.log (res);\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {},\n      };\n      data.data ['data'] = i;\n      data.data ['Nombre'] = i.nombre;\n      data.data ['Productos'] = i.cantidad_productos;\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    console.log (returned);\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_tienda_marca (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      data.cantidad_productos = 0;\n      this.database.add_tienda_marca (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Marcas</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar marcas...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                {{ row.data [column] }}\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'ngx-gestionar-mesas',\n  templateUrl: './gestionar-mesas.component.html',\n  styleUrls: ['./gestionar-mesas.component.scss']\n})\nexport class GestionarMesasComponent implements OnInit {\n  subscribe_01: any;\n  items: any [] = [];\n  is_loading: boolean = true;\n  show_nuevo: boolean = false;\n  is_nuevo_loading: boolean = false;\n  nuevo: string = \"\";\n  empresa_id: string;\n\n  constructor(private database: DatabaseService, private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    this.subscribe_01 = this.database.get_mesas_empresas (this.empresa_id).subscribe ((response: any []) => {\n      this.items = response.reverse ();\n      this.is_loading = false;\n    });\n  }\n\n  ngOnDestroy () {\n    if (this.subscribe_01 !== null && this.subscribe_01 !== undefined) {\n      this.subscribe_01.unsubscribe ();\n    }\n  }\n\n  eliminar (item: any) {\n    var opcion = confirm(\"Eliminar?\");\n    if (opcion == true) {\n      this.database.delete_mesa (item);\n    } else {\n      console.log (\"Cancelar\");\n    }\n  }\n\n  editar (item: any) {\n    item.edit = true;\n  }\n\n  cancel (item: any) {\n    item.edit = false;\n  }\n\n  guardar (item: any) {\n    let nombre = (<HTMLInputElement> document.getElementById (item.id)).value;\n\n    if (nombre !== \"\") {\n      item.nombre = nombre;\n\n      this.database.update_mesa (item)\n        .then (() => {\n          console.log (\"Actualizado\");\n          item.edit = false;\n        })\n        .catch ((error) => {\n          console.log (\"error\", error);\n          item.edit = false;\n        });\n    } else {\n    }\n  }\n\n  cancel_nuevo () {\n    this.show_nuevo = false;\n    this.nuevo = \"\";\n  }\n\n  guardar_nuevo () {\n    if (this.nuevo != \"\") {\n      this.is_nuevo_loading = true;\n\n      let item: any = {\n        id: this.database.createId (),\n        empresa_id: this.empresa_id,\n        nombre: this.nuevo,\n        habilitado: true,\n        fecha_agregada: new Date ().toISOString ()\n      };\n\n      this.database.add_mesa (item)\n        .then (() => {\n          this.nuevo = \"\";\n          this.show_nuevo = false;\n          this.is_nuevo_loading = false;\n        })\n        .catch (error => {\n\n        });\n    } else {\n\n    }\n  }\n\n  agregar_nuevo () {\n    this.show_nuevo = true;\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        <div class=\"row\">\n          <div class=\"col-10\">\n            {{ items.length }} Mesas\n          </div>\n\n          <div class=\"col-2\">\n            <button nbButton fullWidth size=\"tiny\" (click)=\"agregar_nuevo ()\">Agregar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-list>\n        <nb-list-item *ngIf=\"show_nuevo\" [nbSpinner]=\"is_nuevo_loading\" nbSpinnerStatus=\"primary\">\n          <div class=\"row\" style=\"width: 100%;\">\n            <div class=\"col-8 align-self-center\">\n              <input type=\"text\" fieldSize=\"small\" nbInput fullWidth placeholder=\"Nombre\" [(ngModel)]=\"nuevo\">\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"danger\" (click)=\"cancel_nuevo ()\">Cancelar</button>\n            </div>\n\n            <div class=\"col-2  align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"success\" [disabled]=\"nuevo === ''\" (click)=\"guardar_nuevo ()\">Guardar</button>\n            </div>\n          </div>\n        </nb-list-item>\n\n        <nb-list-item *ngFor=\"let item of items\">\n          <div class=\"row\" style=\"width: 100%;\" *ngIf=\"item.edit === false || item.edit === undefined\">\n            <div class=\"col-8 align-self-center\">\n              {{ item.nombre }}\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton fullWidth size=\"tiny\" ghost (click)=\"editar (item)\">\n                <nb-icon icon=\"edit-outline\"></nb-icon>Editar\n              </button>\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton status=\"danger\" fullWidth size=\"tiny\" ghost (click)=\"eliminar (item)\"><nb-icon icon=\"trash-outline\"></nb-icon>Eliminar</button>\n            </div>\n          </div>\n\n          <div class=\"row\" style=\"width: 100%;\" *ngIf=\"item.edit === true\">\n            <div class=\"col-8 align-self-center\">\n              <input type=\"text\" [id]=\"item.id\" [value]=\"item.nombre\" fieldSize=\"small\" nbInput fullWidth placeholder=\"Nombre\">\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"danger\" (click)=\"cancel (item)\">Cancelar</button>\n            </div>\n\n            <div class=\"col-2  align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"success\" (click)=\"guardar (item)\">Guardar</button>\n            </div>\n          </div>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-gestionar-productos',\n  templateUrl: './gestionar-productos.component.html',\n  styleUrls: ['./gestionar-productos.component.scss']\n})\nexport class GestionarProductosComponent implements OnInit {\n  categorias: any [] = [];\n  subcategorias: any [] = [];\n  _subcategorias: any [] = [];\n  productos: any [] = [];\n  marcas: any [] = [];\n  producto_seleccionado: any;\n  form: FormGroup;\n  form_movimiento: FormGroup;\n  loading: boolean = false;\n  file: any =  null;\n  avatar_preview: any = null;\n  productos_para_registrar: any [] = [];\n\n  categorias_subscribe: any = null;\n  marcas_subscribe: any = null;\n  subcategorias_subscribe: any = null;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'SKU', 'Imagen', 'Categoria', 'Sub Categoria', 'Marca', 'Precio', 'Stock', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  selectedItem: any;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>,\n    private af_storage: AngularFireStorage,\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      sku: new FormControl (''),\n      nombre: new FormControl ('', [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required]),\n      subcategoria_id: new FormControl ('', [Validators.required]),\n      marca_id: new FormControl (0),\n      precio_compra: new FormControl ('', [Validators.required]),\n      precio_venta: new FormControl ('', [Validators.required]),\n      medida: new FormControl ('', [Validators.required]),\n    });\n\n    this.form_movimiento = new FormGroup ({\n      fecha: new FormControl ('', [Validators.required]),\n      anio: new FormControl ('', [Validators.required]),\n      mes: new FormControl ('', [Validators.required]),\n      dia: new FormControl ('', [Validators.required]),\n      tipo_comprobante: new FormControl ('boleta'),\n      nro_comprobante: new FormControl (''),\n    });\n\n    this.categorias_subscribe = this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      this.categorias = res;\n      if (res.length > 0) {\n        this.selectedItem = res [0];\n        this.categoriaSelected (this.selectedItem);\n      }\n      this.check_loading ();\n    });\n\n    this.marcas_subscribe = this.database.get_tienda_marcas ().subscribe ((res: any) => {\n      this.marcas = res;\n      this.check_loading ();\n    });\n\n    this.subcategorias_subscribe = this.database.get_tienda_sub_categorias ().subscribe ((res: any) => {\n      this._subcategorias = res;\n      this.check_loading ();\n    });\n  }\n\n  check_loading () {\n    if (this.categorias_subscribe !== null && this.marcas_subscribe !== null && this.subcategorias_subscribe !== null) {\n      this.database.get_tienda_productos ().subscribe ((res: any []) => {\n        this.loading = false;\n        this.productos = res;\n        console.log (res);\n      });\n    }\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {}\n      };\n      data.data ['data'] = i;\n      if (i.sku !== undefined) {\n        data.data ['SKU'] = i.sku;\n      }\n\n      data.data ['Imagen'] = i.imagen;\n      data.data ['Nombre'] = i.nombre;\n\n      data.data ['Categoria'] = this.categorias.find ((x => x.id === i.categoria_id)).nombre;\n      data.data ['Sub Categoria'] = this._subcategorias.find ((x => x.id === i.subcategoria_id)).nombre;\n      if (i.marca_id !== null) {\n        data.data ['Marca'] = this.marcas.find ((x => x.id === i.marca_id)).nombre;\n      }\n      data.data ['Precio'] = i.precio_venta;\n      data.data ['Stock'] = i.stock;\n\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_tienda_producto (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true, dialog);\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.stock = 0;\n      data.habilitado = true;\n\n      if (this.file == null) {\n        this.database.add_tienda_producto (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, false, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = 'Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n        data.imagen = downloadURL;\n        if (editar) {\n          this.database.update_tienda_producto (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        } else {\n          this.database.add_tienda_producto (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.onCategoriaSelected (item.categoria_id);\n    this.avatar_preview = item.imagen;\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.avatar_preview = null;\n    this.file = null;\n    this.form.reset ();\n  }\n\n  onCategoriaSelected (categoria_id: string) {\n    this.loading = true;\n    this.database.get_tienda_sub_categorias_by_categoria (categoria_id).subscribe ((res: any []) => {\n      this.subcategorias = res;\n      this.loading = false;\n    });\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64 (file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n      console.log (error);\n    };\n  }\n\n  fecha_cambio () {\n    this.form_movimiento.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form_movimiento.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form_movimiento.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n  }\n\n  open_registrar_movimiento_dialog (dialog: any) {\n    this.form_movimiento.reset ();\n    this.form_movimiento.controls ['tipo_comprobante'].setValue ('boleta');\n    this.form_movimiento.controls ['nro_comprobante'].setValue ('');\n\n    this.dialogService.open (dialog);\n  }\n\n  selectProducto (producto: any) {\n    let p = this.productos.find (x => x.id === producto);\n\n    if (this.productos_para_registrar.find (x => x.id === p.id) === undefined) {\n      this.productos_para_registrar.push ({\n        id: p.id,\n        nombre: p.nombre,\n        cantidad: 0,\n        precio: p.precio_venta\n      });\n    }\n\n    this.producto_seleccionado = '';\n  }\n\n  get_precio_total () {\n    let total: number = 0;\n\n    this.productos_para_registrar.forEach ((i: any) => {\n      total += i.cantidad * i.precio;\n    });\n\n    return total;\n  }\n\n  remove (item: any) {\n    for( var i = 0; i < this.productos_para_registrar.length; i++) {\n      if ( this.productos_para_registrar[i].id === item.id) {\n        this.productos_para_registrar.splice(i, 1);\n      }\n    }\n  }\n\n  registrar_ingresos_insumo (dialog: any) {\n    this.productos_para_registrar.forEach ((i: any) => {\n      i.fecha = this.form_movimiento.value.fecha,\n      i.anio = this.form_movimiento.value.anio,\n      i.mes = this.form_movimiento.value.mes,\n      i.dia = this.form_movimiento.value.dia,\n      i.tipo_comprobante = this.form_movimiento.value.tipo_comprobante,\n      i.nro_comprobante = this.form_movimiento.value.nro_comprobante\n    });\n\n    console.log (this.productos_para_registrar);\n\n    this.database.add_ingresos_tieda_producto (this.productos_para_registrar)\n      .then (() => {\n        this.productos_para_registrar = [];\n        dialog.close ();\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      });\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n    console.log (item);\n    item.habilitado = !item.habilitado;\n    this.database.update_tienda_producto (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  categoriaSelected (event: any) {\n    this.loading = true;\n\n    this.database.get_tienda_productos_by_categoria (event.id).subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: 500px;\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n        <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n      </div>\n\n      <div class=\"\" (click)=\"fileInput.click ()\">\n        <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n        <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n      </div>\n      <br>\n\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"sku\" class=\"label\">SKU:</label>\n          <input type=\"text\" formControlName=\"sku\" id=\"sku\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"categoria\" class=\"label\">Categoria:</label>\n              <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth (selectedChange)=\"onCategoriaSelected($event)\">\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"subcategoria_id\" class=\"label\">Sub Categoria:</label>\n              <nb-select formControlName=\"subcategoria_id\" id=\"subcategoria_id\" fullWidth>\n                <nb-option *ngFor=\"let item of subcategorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"marca_id\" class=\"label\">Marcas:</label>\n              <nb-select formControlName=\"marca_id\" id=\"marca_id\" fullWidth>\n                <nb-option *ngFor=\"let item of marcas\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"medida\" class=\"label\">Und. Medida:</label>\n              <nb-select formControlName=\"medida\" id=\"medida\" fullWidth>\n                <nb-option value=\"Kg\">Kilogramos</nb-option>\n                <nb-option value=\"g\">Gramos</nb-option>\n                <nb-option value=\"L\">Litro</nb-option>\n                <nb-option value=\"gal\">Galones</nb-option>\n                <nb-option value=\"Paquete\">Paquete</nb-option>\n                <nb-option value=\"uds.\">Unidad</nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <div>\n                <label for=\"precio_compra\" class=\"label\">Precio Compra:</label>\n                &nbsp;\n              </div>\n              <input type=\"number\" formControlName=\"precio_compra\" id=\"precio_compra\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <div>\n                <label for=\"precio_venta\" class=\"label\">Precio Venta:</label>\n              </div>\n              <input type=\"number\" formControlName=\"precio_venta\" id=\"precio_venta\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_registrar_movimiento let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: 500px;\">\n    <nb-card-header>\n      Registrar movimiento\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_movimiento\">\n        <div class=\"form-group\" style=\"display: block;\">\n          <label for=\"fecha\" class=\"label\">Fecha:</label>\n          <input\n            type=\"date\"\n            nbInput\n            fullWidth\n            formControlName=\"fecha\"\n            (ngModelChange)=\"fecha_cambio ()\"\n            id=\"fecha\">\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\" class=\"label\">Tipo comprobante:</label>\n              <nb-select formControlName=\"tipo_comprobante\" id=\"tipo_comprobante\" fullWidth>\n                <nb-option value=\"ninguno\">Ninguno</nb-option>\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"nombre\" class=\"label\">N° comprobante:</label>\n              <input type=\"text\" formControlName=\"nro_comprobante\" id=\"nombre\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n\n      <div class=\"form-group\">\n        <label for=\"producto_seleccionado\" class=\"label\">Añada un producto:</label>\n        <input nbInput fullWidth type=\"text\"\n          list=\"productos\" [(ngModel)]='producto_seleccionado'\n          id=\"producto_seleccionado\"\n          (change)=\"selectProducto (producto_seleccionado)\"/>\n        <datalist id=\"productos\">\n          <select>\n            <option *ngFor=\"let producto of productos\" [value]=\"producto.id\">\n              {{ producto.nombre }}\n            </option>\n          </select>\n        </datalist>\n      </div>\n\n      <table class=\"table table-bordered table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Nombre</th>\n            <th scope=\"col\" style=\"width: 124px;\">Cantidad</th>\n            <th scope=\"col\" style=\"width: 102px;\">Precio (S/)</th>\n            <th scope=\"col\">Total</th>\n            <th scope=\"col\"></th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr *ngFor=\"let item of productos_para_registrar\">\n            <td>\n              {{ item.nombre }}\n            </td>\n\n            <td>\n              <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n            </td>\n            <td>\n              <input style=\"width: 100px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.precio\">\n            </td>\n\n            <td style=\"width: 128px;\">\n              {{ item.cantidad * item.precio | currency:'S/. ' }}\n            </td>\n\n            <td style=\"width: 12px;\">\n              <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n            </td>\n          </tr>\n\n          <tr *ngIf=\"get_precio_total () > 0\">\n            <td colspan=\"3\">Total</td>\n            <td>\n              {{ get_precio_total () | currency:'S/. ' }}\n            </td>\n            <td></td>\n          </tr>\n        </tbody>\n      </table>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_ingresos_insumo (ref)\" [disabled]=\"!form_movimiento.valid || get_precio_total () <= 0\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-2\">\n              <h5>Productos</h5>\n            </div>\n\n            <div class=\"col-4\">\n              <nb-select placeholder=\"Seleccione una categoria\" (selectedChange)=\"categoriaSelected($event)\" [(selected)]=\"selectedItem\">\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n              <!-- <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar producto...\"> -->\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"open_registrar_movimiento_dialog (dialog_registrar_movimiento)\">Registrar ingreso</button>\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">\n                  {{ row.data [column] | currency:'S/. ' }}\n                </span>\n\n                <span *ngIf=\"column === 'Imagen'\">\n                  <img style=\"width: 64px; height: auto;\" [src]=\"row.data [column]\">\n                </span>\n\n                <span *ngIf=\"column !== 'Precio' && column !== 'Imagen'\">\n                  {{ row.data [column] }}\n                </span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (row.data ['data'])\">\n                  <nb-icon *ngIf=\"row.data ['data'].habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                  <nb-icon *ngIf=\"!row.data ['data'].habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ngx-gestionar-restaurante-mesas',\n  templateUrl: './gestionar-restaurante-mesas.component.html',\n  styleUrls: ['./gestionar-restaurante-mesas.component.scss']\n})\nexport class GestionarRestauranteMesasComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>gestionar-restaurante-mesas works!</p>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-sub-categorias',\n  templateUrl: './gestionar-sub-categorias.component.html',\n  styleUrls: ['./gestionar-sub-categorias.component.scss']\n})\nexport class GestionarSubCategoriasComponent implements OnInit {\n  categorias: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Categorias', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required]),\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      this.categorias = res;\n    });\n\n    this.database.get_tienda_sub_categorias ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Categorias: this.categorias.find ((x => x.id === i.categoria_id)).nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_tienda_sub_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_tienda_sub_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo_categoria (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"categoria\" class=\"label\">Categoria:</label>\n          <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth>\n            <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Sub Categorias</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n                <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport { first } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { NbComponentStatus, NbDialogService, NbIconConfig, NbToastrService } from '@nebular/theme';\nimport { StockService } from '../../services/stock.service';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'ngx-gestionar-ventas-restaurante',\n  templateUrl: './gestionar-ventas-restaurante.component.html',\n  styleUrls: ['./gestionar-ventas-restaurante.component.scss']\n})\nexport class GestionarVentasRestauranteComponent implements OnInit {\n  usuario: any;\n  empresa_pos: any = {\n    id: '',\n    nombre: '',\n    instancia_actual: null,\n    caja_abierta: false\n  };\n\n  // Forms\n  form_abrir_caja: FormGroup;\n  form_venta: FormGroup;\n\n  // Selectables\n  mesa_seleccionada: any = null;\n\n  // Auxiliares\n  cartas: any [] = [];\n  mesas: any [] = [];\n  carta: any = {\n    platos: []\n  };\n\n  // Loading\n  loading: boolean = false;\n  cartas_loading: boolean = false;\n  mesas_loading: boolean = false;\n\n  constructor (\n    private database: DatabaseService,\n    private auth: AuthService,\n    private toastrService: NbToastrService,\n    private dialogService: NbDialogService,\n    private stock: StockService) { }\n\n  async ngOnInit () {\n    this.form_abrir_caja = new FormGroup ({\n      monto_apertura: new FormControl ('', [Validators.required, Validators.min (1)]),\n      admi_correo: new FormControl ('', [Validators.required, Validators.email]),\n      admi_password: new FormControl ('', [Validators.required])\n    });\n\n    this.form_venta = new FormGroup ({\n      // tipo: new FormControl ('rapido', [Validators.required]),\n      importe: new FormControl ('', [Validators.required]),\n      fecha: new FormControl (''),\n      anio: new FormControl (''),\n      mes: new FormControl (''),\n      dia: new FormControl (''),\n      tipo_comprobante: new FormControl ('boleta'),\n      tipo_pago: new FormControl ('efectivo'),\n      tarjeta_cod_ref: new FormControl (''),\n      nro_comprobante: new FormControl (''),\n      cliente_nombre: new FormControl (''),\n      // imprimir_ticket: new FormControl (true)\n    });\n\n    this.auth.authState ().subscribe ((usuario: firebase.User) => {\n      if (usuario) {\n        this.database.get_usuario_by_id (usuario.uid).subscribe ((res: any) => {\n          if (res !== undefined) {\n            this.usuario = res;\n            this.get_data ();\n          }\n        });\n      } else {\n\n      }\n    });\n  }\n\n  get_data () {\n    this.stock.init_stock (this.usuario.empresa_id);\n\n    this.database.get_restaurante_venta_data (this.usuario.empresa_id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      if (res !== undefined) {\n        this.empresa_pos = res;\n      }\n    });\n\n    this.cartas_loading = true;\n    this.database.get_cartas_by_empresa (this.usuario.empresa_id).subscribe ((res: any []) => {\n      this.cartas = res.filter ((i: any) => {\n        return i.data.habilitado === true;\n      });\n\n      if (this.cartas.length > 0) {\n        this.carta = this.cartas [0];\n      }\n\n      this.cartas_loading = false;\n    });\n\n    this.mesas_loading = true;\n    this.database.get_mesas_empresas (this.usuario.empresa_id).subscribe ((res: any []) => {\n      this.mesas = res;\n      this.mesas_loading = false;\n    });\n  }\n\n  async seleccionar_carta (item: any) {\n    this.carta = item;\n\n    if (item.data.tipo_carta === '0') {\n      this.carta.menus_dia = await this.database.get_menu_elementos_by_carta (item.data.id).pipe (first ()).toPromise ();\n    }\n\n    if (item.data.tipo_carta === '2') {\n      this.carta.promociones = await this.database.get_promociones_by_carta (item.data.id).pipe (first ()).toPromise ();\n    }\n  }\n\n  abrir_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  validar_admi (ref: any) {\n    // this.loading = true;\n    // const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    // const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    // if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.abri_caja_data (ref);\n    // } else {\n    //   this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n    //     if (res.length > 0) {\n    //       this.abri_caja_data (ref);\n    //     } else {\n    //       this.loading = false;\n    //       alert ('Usuario invalido');\n    //     }\n    //   }).catch ((error: any) => {\n    //     this.loading = false;\n    //     console.log (error);\n    //   });\n    // }\n  }\n\n  abri_caja_data (ref: any) {\n    let data: any = {\n      id: this.usuario.empresa_id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      fecha: moment ().format ('DD[-]MM[-]YYYY'),\n      hora: moment ().format ('h:mm'),\n      instancia_actual: {\n        tmp_id: this.database.createId (),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura,\n        fecha_apertura: moment ().format ('L'),\n        hora_apertura: moment ().format ('h:mm')\n      },\n      caja_abierta: true,\n    };\n\n    this.database.add_post_empresa_data (data).then (() => {\n      this.showToast ('La caja se abrio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  showToast (mensaje: string, preventDuplicates, status: NbComponentStatus) {\n    const iconConfig: NbIconConfig = { icon: 'checkmark-circle-outline', pack: 'eva' };\n    this.toastrService.show (\n      mensaje,\n      'Mensaje',\n      { preventDuplicates, status });\n  }\n\n  async select_mesa (mesa: any) {\n    if (mesa.disponible === true || mesa.disponible === undefined) {\n      this.mesa_seleccionada = {\n        id: this.database.createId (),\n        mesa_id: mesa.id,\n        nombre: mesa.nombre,\n        platos: [],\n        estado: 0\n      };\n    } else {\n      this.mesa_seleccionada = await this.database.get_restaurante_pedido_by_id (mesa.pedido_id);\n    }\n\n    this.mesa_seleccionada.platos.forEach ((plato: any) => {\n      if (plato.tipo === 'menu') {\n        this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n      }\n    });\n  }\n\n  validar_estado () {\n    let returned: boolean = true;\n\n    // if (this.mesa_seleccionada.estado === 1) {\n    //   returned = confirm (\"¿Esta seguro que desea agregar este plato al pedido?\");\n    // }\n\n    return returned;\n  }\n\n  async add_plato_actualizar (plato: any) {\n    if (plato.tipo === 'plato') {\n      this.add_plato (plato.id);\n    } else {\n      this.add_menu_dia_carrito (plato);\n    }\n  }\n\n  async add_plato (plato_id: any) {\n    if (this.mesa_seleccionada !== null) {\n      this.cartas_loading = true;\n\n      let plato: any = await this.database.get_plato_by_id (plato_id).pipe (first ()).toPromise ();\n\n      if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id)) {\n        let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id).cantidad;\n        if (this.stock.check_valid (plato [0].data, plato [0].insumos, cantidad + 1)) {\n          this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id).cantidad++;\n\n          if (this.mesa_seleccionada.estado === 1) {\n            this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n              this.cartas_loading = false;\n              this.showToast ('El plato se agrego correctamente', true, 'success');\n            }, error => {\n              this.cartas_loading = false;\n              console.log (error);\n            });\n          } else {\n            this.showToast ('El plato se agrego correctamente', true, 'success');\n            this.cartas_loading = false;\n          }\n        } else {\n          this.cartas_loading = false;\n          this.showToast ('Stock no disponible', true, 'danger');\n        }\n      } else {\n        if (this.stock.check_valid (plato [0].data, plato [0].insumos, 1)) {\n          if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n            this.mesa_seleccionada.platos = [];\n          }\n\n          this.mesa_seleccionada.platos.push ({\n            id: plato_id,\n            carta_id: plato [0].data.carta_id,\n            plato_id: plato [0].data.id,\n            empresa_id: this.usuario.empresa_id,\n            precio: plato [0].data.precio,\n            nombre: plato [0].data.nombre,\n            cantidad: 1,\n            orden: this.mesa_seleccionada.platos.length + 1,\n            insumos: plato [0].insumos,\n            tipo: 'plato'\n          });\n\n          this.showToast ('El plato se agrego correctamente', true, 'success');\n        } else {\n          this.showToast ('Stock no disponible', true, 'danger');\n        }\n\n        this.cartas_loading = false;\n      }\n    }\n  }\n\n  get_total () {\n    let cantidad: number = 0;\n    let menus_cartas: Map <string, any []> = new Map <string, any []> ();\n\n    if (this.mesa_seleccionada.platos instanceof Array) {\n      this.mesa_seleccionada.platos.forEach ((e: any) => {\n        if (e.tipo === 'plato') {\n          cantidad += e.precio * e.cantidad;\n        } else if (e.tipo === 'menu') {\n          if (menus_cartas.has (e.carta_id)) {\n            menus_cartas.get (e.carta_id).push (e);\n          } else {\n            menus_cartas.set (e.carta_id, [e]);\n          }\n        }\n      });\n    }\n\n    cantidad += this.calcular_precio_por_carta (menus_cartas);\n\n    return this.get_total_format (cantidad);\n  }\n\n  calcular_precio_por_carta (cartas: Map <string, any []>) {\n    let total: number = 0;\n\n    cartas.forEach ((value: any [], key: string) => {\n      total += this.get_precio_menu_carta (key, value);\n    });\n\n    return total;\n  }\n\n  get_precio_menu_carta (key: string, values: any []) {\n    let total: number = 0;\n    let cantidad_elementos_menu_tmp = this.stock.get_cantidad_elementos_menu_tmp ();\n    let menus_completos: number = 0;\n\n    values.forEach ((value: any) => {\n      cantidad_elementos_menu_tmp [value.elemento_menu_id] = value.cantidad\n    });\n\n    menus_completos = this.calcular_menus_completos (cantidad_elementos_menu_tmp);\n\n    values.forEach ((value: any) => {\n      total += (value.cantidad - menus_completos) * value.precio;\n    });\n\n    return total + (menus_completos * this.cartas.find (x => x.data.id === key).data.precio);\n  }\n\n  calcular_menus_completos (cantidad_elementos_menu_tmp: any []) {\n    let mayor = 0;\n    for  (let key in cantidad_elementos_menu_tmp) {\n      if (cantidad_elementos_menu_tmp [key] > mayor) {\n        mayor = cantidad_elementos_menu_tmp [key];\n      }\n    }\n\n    let menus_completos: number = mayor;\n    for (let index = mayor; index > 0; index--) {\n      let completo: boolean = true;\n      for (let key in cantidad_elementos_menu_tmp) {\n        if (cantidad_elementos_menu_tmp [key] < index) {\n          completo = false;\n          menus_completos--;\n          break;\n        }\n      }\n    }\n\n    return menus_completos;\n  }\n\n  get_platos_format (list: any []) {\n    if (list instanceof Array) {\n      let returned: any [] = [];\n      let menus_cartas: Map <string, any []> = new Map <string, any []> ();\n\n      list.forEach ((e: any) => {\n        if (e.tipo === 'plato' || e.tipo === 'menu-completo' || e.tipo === 'promocion') {\n          returned.push (e);\n        } else if (e.tipo === 'menu') {\n          if (menus_cartas.has (e.carta_id)) {\n            menus_cartas.get (e.carta_id).push (e);\n          } else {\n            menus_cartas.set (e.carta_id, [e]);\n          }\n        }\n      });\n\n      menus_cartas.forEach ((values: any [], key: string) => {\n        let cantidad_elementos_menu_tmp = this.stock.get_cantidad_elementos_menu_tmp ();\n        let menus_completos: number = 0;\n\n        values.forEach ((value: any) => {\n          cantidad_elementos_menu_tmp [value.elemento_menu_id] = value.cantidad\n        });\n\n        menus_completos = this.calcular_menus_completos (cantidad_elementos_menu_tmp);\n\n        values.forEach ((value: any) => {\n          if (value.cantidad - menus_completos > 0) {\n            value.menus_completos = menus_completos;\n            returned.push (value)\n          }\n        });\n\n        for (let index = 0; index < menus_completos; index++) {\n          if (returned.find (x => x.id === key)) {\n            returned.find (x => x.id === key).cantidad++;\n          } else {\n            returned.push ({\n              id: this.cartas.find (x => x.data.id === key).data.id,\n              nombre: this.cartas.find (x => x.data.id === key).data.nombre,\n              carta_id: this.cartas.find (x => x.data.id === key).data.id,\n              empresa_id: this.usuario.empresa_id,\n              carta_precio: this.carta.data.precio,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: this.cartas.find (x => x.data.id === key).data.precio,\n              tipo: 'menu-completo',\n              menus: values\n            });\n          }\n        }\n      });\n      return returned;\n    } else {\n      return [];\n    }\n  }\n\n  get_total_format (value: number) {\n    return Math.round (value * 100) / 100;\n  }\n\n  eliminar_producto (plato: any) {\n    if (plato.tipo === 'menu') {\n      this.stock.remove_menu (plato);\n    }\n\n    for (let index = 0; index < this.mesa_seleccionada.platos.length; index++) {\n      if (this.mesa_seleccionada.platos [index].id === plato.id) {\n        this.mesa_seleccionada.platos.splice (index, 1);\n      }\n    }\n\n    if (this.mesa_seleccionada.estado === 1) {\n      this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n        // if (plato.tipo === 'menu') {\n        //   this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n        // }\n      }, error => {\n        console.log (error);\n      });\n    }\n  }\n\n  remove_plato (plato: any) {\n    // if (confirm (\"¿Esta seguro que desea descontar este plato al pedido?\")) {-\n      plato.cantidad--;\n      this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n        // if (plato.tipo === 'menu') {\n        //   this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n        // }\n      }, error => {\n        console.log (error);\n      });\n    // }\n  }\n\n  crear_pedido () {\n    let request: any = {};\n    request.id = this.mesa_seleccionada.id;\n    request.mesa_id = this.mesa_seleccionada.mesa_id;\n    request.nombre = this.mesa_seleccionada.nombre;\n    request.estado = 1;\n    request.tmp_id = this.empresa_pos.instancia_actual.tmp_id;\n\n    request.platos = this.get_platos_format (this.mesa_seleccionada.platos);\n\n    console.log (request);\n\n    this.database.registrar_restaurante_pedido (this.usuario.empresa_id, request).then (() => {\n      this.cancelar ();\n      this.showToast ('Tu pedido fue procesado', true, 'success');\n    }).catch ((error: any) => {\n      console.log (error);\n    });\n  }\n\n  cancelar () {\n    this.mesa_seleccionada = null;\n    this.stock.clean_cache ();\n  }\n\n  open_pago (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  calcular_cambio () {\n    return this.form_venta.value.importe - this.get_total ();\n  }\n\n  validar_cobrar () {\n    let returned: boolean = true;\n    if (this.form_venta.value.tipo_pago === 'efectivo') {\n      if (this.calcular_cambio () > 0 && this.form_venta.value.importe !== 0) {\n        returned = false;\n      }\n    } else {\n      returned = this.form_venta.invalid;\n    }\n\n    return returned;\n  }\n\n  cambiar_tipo_pago (tipo: string) {\n    this.form_venta.controls ['tipo_pago'].setValue (tipo);\n\n    this.form_venta.controls ['importe'].setValue (null);\n    this.form_venta.controls ['tarjeta_cod_ref'].setValue (null);\n\n    if (tipo === 'efectivo') {\n      this.form_venta.controls ['importe'].setValidators ([Validators.required]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([]);\n    } else {\n      this.form_venta.controls ['importe'].setValidators ([]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([Validators.required]);\n    }\n\n    this.form_venta.controls ['tarjeta_cod_ref'].updateValueAndValidity ();\n    this.form_venta.controls ['importe'].updateValueAndValidity ();\n  }\n\n  submit (ref: any) {\n    this.mesa_seleccionada.estado = 2;\n    this.mesa_seleccionada.pedido_id = '';\n    this.mesa_seleccionada.disponible = true;\n    this.mesa_seleccionada.importe = this.form_venta.value.importe;\n    this.mesa_seleccionada.tipo_comprobante = this.form_venta.value.tipo_comprobante;\n    // this.mesa_seleccionada.nro_comprobante = this.form_venta.value.nro_comprobante;\n    this.mesa_seleccionada.monto_total = this.get_total ();\n    this.mesa_seleccionada.fecha = moment ().format ('YYYY[-]MM[-]DD');\n    this.mesa_seleccionada.hora = moment ().format ('HH:mm');\n    this.mesa_seleccionada.mes = moment ().format ('MM');\n    this.mesa_seleccionada.dia = moment ().format ('DD');\n    this.mesa_seleccionada.anio = moment ().format ('YYYY');\n    this.mesa_seleccionada.empresa_id = this.usuario.empresa_id;\n\n    this.database.finalizar_restaurante_pedido (this.usuario.empresa_id, this.mesa_seleccionada).then (() => {\n      ref.close ();\n      this.cancelar ();\n      this.form_venta.reset ();\n      this.form_abrir_caja.reset ();\n    }, error => {\n      console.log (error);\n      ref.close ();\n    });\n  }\n\n  add_menu_dia_carrito (menu_dia: any) {\n    if (this.mesa_seleccionada !== null) {\n      if (this.validar_estado ()) {\n        if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id)) {\n          let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id).cantidad;\n          if (this.stock.check_menu (menu_dia, cantidad + 1)) {\n            this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id).cantidad++;\n\n            if (this.mesa_seleccionada.estado === 1) {\n              this.database.update_restaurante_pedido (this.mesa_seleccionada);\n            }\n          } else {\n            this.showToast ('Stock no disponible', true, 'danger');\n          }\n        } else {\n          if (this.stock.check_menu (menu_dia, 1)) {\n            if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n              this.mesa_seleccionada.platos = [];\n            }\n\n            this.mesa_seleccionada.platos.push ({\n              id: menu_dia.id,\n              menu_id: menu_dia.menu_id,\n              nombre: menu_dia.menu_nombre,\n              carta_id: menu_dia.carta_id,\n              empresa_id: this.usuario.empresa_id,\n              carta_precio: this.carta.data.precio,\n              elemento_menu_id: menu_dia.elemento_menu_id,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: this.stock.get_menu_elemento_precio (menu_dia.elemento_menu_id),\n              tipo: 'menu'\n            });\n          } else {\n            this.showToast ('Stock no disponible', true, 'danger');\n          }\n        }\n      }\n    }\n  }\n\n  get_tipo_plato_lista (tipo: string) {\n    if (tipo === 'menu') {\n      return 'Plato';\n    } else if (tipo === 'plato') {\n      return 'Extra';\n    } else if (tipo === 'menu-completo') {\n      return 'Menu Completo';\n    }\n\n    return '';\n  }\n\n  add_promocion (plato: any) {\n    console.log (plato);\n\n    if (this.mesa_seleccionada !== null) {\n      if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id)) {\n        let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id).cantidad;\n          if (this.stock.verificar_agregar_carrito_promocion (plato.empresa_id, plato.insumos, cantidad + 1)) {\n            this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id).cantidad++;\n          } else {\n            console.log ('No Stock');\n          }\n      } else {\n        if (plato.tipo === '0') {\n          if (this.stock.verificar_agregar_carrito_promocion (plato.empresa_id, plato.insumos, 1)) {\n            if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n              this.mesa_seleccionada.platos = [];\n            }\n\n            this.mesa_seleccionada.platos.push ({\n              id: plato.id,\n              nombre: plato.nombre,\n              carta_id: plato.carta_id,\n              empresa_id: plato.empresa_id,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: plato.precio_total,\n              tipo: 'promocion',\n              promocion_tipo: plato.tipo\n            });\n          } else {\n            console.log ('No Stock');\n          }\n        } else if (plato.tipo === '1') {\n\n        }\n      }\n    }\n  }\n\n  async confirmar_cerrar_caja (dialog: any) {\n    let ventas = await this.database.get_restaurante_ventas_instancia (this.empresa_pos.instancia_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: ventas\n      }\n    });\n  }\n\n  cerrar_caja (ref: any, data: any) {\n    console.log (data);\n    console.log (this.empresa_pos);\n\n    this.database.cerrar_caja_post_empresa (this.empresa_pos).then (() => {\n      ref.close ();\n    }).catch ((error: any) => {\n      console.log (error);\n      ref.close ();\n    });\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      total += venta.monto_total;\n    });\n\n    return this.get_total_format (total);\n  }\n}\n","<ng-template #dialog_abrir_caja let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_abrir_caja\" [nbSpinner]=\"loading\" autocomplete=\"off\">\n    <nb-card-header>\n      <h6>Apertura de caja</h6>\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"form-group\">\n        <label for=\"monto_apertura\"><b>Monto de apertura</b></label>\n        <input formControlName=\"monto_apertura\" nbInput fullWidth id=\"monto_apertura\" type=\"number\">\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"admi_correo\"><b>Correo</b></label>\n        <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"admi_password\"><b>Contraseña</b></label>\n        <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"form_abrir_caja.invalid\" (click)=\"validar_admi (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cobro let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_venta\" [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Realizar pedido</h6>\n        </div>\n\n        <!-- <div class=\"col-6 text-right\">\n          <nb-select placeholder=\"Seleccione una opcion\" formControlName=\"tipo\">\n            <nb-option value=\"rapido\">Rapido</nb-option>\n            <nb-option value=\"completo\">Completo</nb-option>\n          </nb-select>\n        </div> -->\n      </div>\n\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"text-center\">\n        <h3>{{ get_total () | currency:'S/. ' }}</h3>\n      </div>\n      <br>\n      <div class=\"linked text-center\">\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'efectivo' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('efectivo')\"\n          nbButton>\n          <nb-icon icon=\"npm-outline\"></nb-icon>\n          Efectivo\n        </button>\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'tarjeta' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('tarjeta')\"\n          nbButton>\n          <nb-icon icon=\"credit-card-outline\"></nb-icon>\n          Tarjeta de credito\n        </button>\n      </div>\n      <br>\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'efectivo'\">\n        <div>\n          <label><b>Pago con:</b></label>\n        </div>\n        <div class=\"linked\">\n          <input nbInput fieldSize=\"medium\" type=\"number\" min=\"0\" style=\"width: 120px;\" formControlName=\"importe\">\n          <button\n            [status]=\"form_venta.value.importe === 10 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (10)\"\n            status=\"primary\"\n            *ngIf=\"get_total () < 10\"\n            nbButton>S/. 10\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 20 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (20)\"\n            *ngIf=\"get_total () < 20\"\n            nbButton>S/. 20\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 50 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (50)\"\n            *ngIf=\"get_total () < 50\"\n            nbButton>S/. 50\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 100 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (100)\"\n            *ngIf=\"get_total () < 100\"\n            nbButton>S/. 100\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 200 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (200)\"\n            *ngIf=\"get_total () < 200\"\n            nbButton>S/. 200\n          </button>\n        </div>\n        <br>\n        <div>\n          <label><b>Su cambio:</b></label>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () < 0\">\n          Ingrese un importe valido\n          <br>\n          <br>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () > 0\">\n          <h6>{{ calcular_cambio () | currency:'S/. ' }}</h6>\n        </div>\n      </ng-container>\n\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'tarjeta'\">\n        <div>\n          <label><b>Codigo:</b></label>\n        </div>\n        <input nbInput fullWidth fieldSize=\"medium\" type=\"text\" formControlName=\"tarjeta_cod_ref\">\n        <br>\n        <br>\n      </ng-container>\n\n      <!-- <div>\n        <nb-checkbox formControlName=\"imprimir_ticket\">Imprimir ticket</nb-checkbox>\n      </div> -->\n\n      <br>\n      <!-- <div *ngIf=\"form_venta.value.tipo === 'completo'\">\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\"><b>Tipo de comprobante</b></label>\n              <nb-select fullWidth id=\"tipo_comprobante\" placeholder=\"Seleccione una opcion\" formControlName=\"tipo_comprobante\">\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"nro_comprobante\"><b>N° de comprobante</b></label>\n              <input nbInput fullWidth id=\"nro_comprobante\" formControlName=\"nro_comprobante\" type=\"text\">\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"cliente_nombre\"><b>Nombre del cliente</b></label>\n              <input nbInput fullWidth id=\"cliente_nombre\" formControlName=\"cliente_nombre\" type=\"text\">\n            </div>\n          </div>\n        </div>\n      </div> -->\n\n      <div>\n        <button nbButton status=\"success\" [disabled]=\"validar_cobrar ()\" (click)=\"submit (ref)\" fullWidth>Cobrar</button>\n      </div>\n    </nb-card-body>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cerrar_caja let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cerrar caja</h6>\n        </div>\n\n        <!-- <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div> -->\n      </div>\n    </nb-card-header>\n\n    <nb-card-body [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ empresa_pos.instancia_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + empresa_pos.instancia_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <!-- <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div> -->\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" (click)=\"cerrar_caja (ref, data)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout [nbSpinner]=\"loading\">\n  <nb-layout-header>\n    <button *ngIf=\"empresa_pos.caja_abierta === false\" nbButton status=\"primary\" (click)=\"abrir_caja (dialog_abrir_caja)\">\n      Abrir caja\n    </button>\n\n    <div *ngIf=\"empresa_pos.caja_abierta === true\" style=\"display: grid;\">\n      <span class=\"cajero-nombre\"><b>Caja abierta</b></span>\n      <span class=\"cajero-tiempo\">Conectado a: {{ empresa_pos?.instancia_actual.hora_apertura }} {{ empresa_pos?.instancia_actual.fecha_apertura }}</span>\n    </div>\n\n    <button *ngIf=\"empresa_pos.caja_abierta === true\" nbButton [nbPopover]=\"templateRef\" nbPopoverPlacement=\"bottom\" ghost><nb-icon icon=\"settings-2-outline\"></nb-icon></button>\n      <ng-template #templateRef>\n        <div style=\"display: table-caption;\">\n          <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cerrar_caja (dialog_cerrar_caja)\">\n            <nb-icon icon=\"close-circle-outline\"></nb-icon>Cerrar caja\n          </button>\n        </div>\n      </ng-template>\n  </nb-layout-header>\n\n  <nb-layout-column>\n    <nb-card *ngIf=\"empresa_pos.caja_abierta === true && mesa_seleccionada === null\" [nbSpinner]=\"mesas_loading\">\n      <nb-card-header>\n        Seleccione una mesa\n      </nb-card-header>\n\n      <div class=\"row align-items-center justify-content-center\">\n        <div class=\"col-3 mesa\" *ngFor=\"let mesa of mesas\" (click)=\"select_mesa (mesa)\">\n          {{ mesa.nombre }}\n          <span *ngIf=\"mesa.disponible === true || mesa.disponible === undefined\">Disponible</span>\n          <span *ngIf=\"mesa.disponible === false\">No Disponible</span>\n        </div>\n      </div>\n    </nb-card>\n\n    <nb-card size=\"small\" *ngIf=\"mesa_seleccionada !== null\">\n      <nb-card-header>\n        Mesa: {{ mesa_seleccionada.nombre }}\n      </nb-card-header>\n\n      <nb-card-header style=\"display: flex; align-items: center;\">\n        <div style=\"width: 100%;\">Orden</div>\n      </nb-card-header>\n\n      <div style=\"height: 100%;\">\n        <table class=\"table table-sm table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">N°</th>\n              <th scope=\"col\">Tipo</th>\n              <th scope=\"col\">Producto</th>\n              <th scope=\"col\">Unidades</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Total</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let plato of get_platos_format (mesa_seleccionada.platos)\">\n              <th scope=\"row\">{{ plato.orden }}</th>\n              <td>{{ get_tipo_plato_lista (plato.tipo) }}</td>\n              <td>\n                <div *ngIf=\"plato.tipo === 'menu-completo'\">\n                  <p style=\"margin-bottom: 0px;\">{{ plato.nombre }}</p>\n                  <ul>\n                    <li *ngFor=\"let menu of plato.menus\">\n                      {{ menu.nombre }}\n                    </li>\n                  </ul>\n                </div>\n                <div *ngIf=\"plato.tipo !== 'menu-completo'\">\n                  {{ plato.nombre }}\n                </div>\n              </td>\n              <td>\n                <ng-container *ngIf=\"plato.tipo === 'menu'\">\n                  {{ plato.cantidad - plato.menus_completos }}\n                </ng-container>\n                <ng-container *ngIf=\"plato.tipo !== 'menu'\">\n                  {{ plato.cantidad }}\n                </ng-container>\n                <button [disabled]=\"plato.cantidad <= 1\" (click)=\"remove_plato (plato)\">-</button>\n                <button (click)=\"add_plato_actualizar (plato)\">+</button>\n              </td>\n              <td>\n                {{ plato.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (plato.precio * plato.cantidad) | currency:'S/. ' }}\n              </td>\n              <td class=\"text-right\">\n                <button nbButton ghost size=\"small\" status=\"danger\" (click)=\"eliminar_producto (plato)\">\n                  <nb-icon icon=\"close-outline\"></nb-icon>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <nb-card-footer style=\"display: flex; align-items: center;\">\n        <button nbTooltip=\"Limpiar\" nbButton outline status=\"danger\" (click)=\"cancelar ()\">\n          Atras\n        </button>\n\n        <!-- <button nbTooltip=\"Imprimir\" style=\"margin-left: 1rem;\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"printer\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Registrar nota de credito\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"file-text\"></nb-icon>\n        </button> -->\n\n        <!-- <button nbTooltip=\"Registrar ingreso/egreso\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"plus-square\"></nb-icon>\n        </button> -->\n\n        <div *ngIf=\"mesa_seleccionada.estado === 1\" style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline status=\"success\" (click)=\"open_pago (dialog_cobro)\">\n            Cobrar:\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n\n        <div *ngIf=\"mesa_seleccionada.estado === 0\" style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline status=\"success\" (click)=\"crear_pedido ()\">\n            Agregar pedido\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n\n  <nb-layout-column>\n    <nb-card *ngIf=\"empresa_pos.caja_abierta === true && mesa_seleccionada !== null\" [nbSpinner]=\"cartas_loading\">\n      <nb-card-header style=\"display: flex; overflow: auto;\">\n        <ng-container *ngFor=\"let carta of cartas\">\n          <button (click)=\"seleccionar_carta (carta)\" style=\"margin: 6px;\" nbButton size=\"tiny\">\n            {{ carta.data.nombre }}\n          </button>\n        </ng-container>\n      </nb-card-header>\n\n      <!-- <nb-list-item *ngIf=\"carta.data.tipo_carta === '0'\" style=\"border: none;\" (click)=\"agregar_menu_completo ()\">\n        <button nbButton ghost status=\"primary\">\n          <nb-icon icon=\"plus-outline\"></nb-icon>\n        </button>\n        &nbsp;\n        &nbsp;\n        &nbsp;\n        <nb-user name=\"Menu completo\" showTitle=false shape=\"rectangle\">\n        </nb-user>\n      </nb-list-item> -->\n\n      <nb-accordion *ngIf=\"carta.data.tipo_carta === '0'\">\n        <nb-accordion-item *ngFor=\"let menu_dia of carta?.menus_dia\">\n          <nb-accordion-item-header>{{ menu_dia.data.nombre }}</nb-accordion-item-header>\n          <nb-accordion-item-body>\n            <nb-list-item style=\"border: none; padding: 0px;\" *ngFor=\"let menu of menu_dia.menus_dia\">\n              <button nbButton ghost status=\"primary\" (click)=\"add_menu_dia_carrito (menu)\">\n                <nb-icon icon=\"plus-outline\"></nb-icon>\n              </button>\n              &nbsp;\n              &nbsp;\n              &nbsp;\n              <nb-user [name]=\"menu.menu_nombre\" showTitle=false shape=\"rectangle\">\n              </nb-user>\n            </nb-list-item>\n          </nb-accordion-item-body>\n        </nb-accordion-item>\n      </nb-accordion>\n\n      <nb-list *ngIf=\"carta.data.tipo_carta === '1'\">\n        <nb-list-item *ngFor=\"let plato of carta.platos\">\n          <button nbButton ghost status=\"primary\" (click)=\"add_plato (plato.id)\">\n            <nb-icon icon=\"plus-outline\"></nb-icon>\n          </button>\n          &nbsp;\n          &nbsp;\n          &nbsp;\n          <nb-user [name]=\"plato.nombre\" showTitle=false [picture]=\"plato.imagen\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item>\n      </nb-list>\n\n      <nb-list *ngIf=\"carta.data.tipo_carta === '2'\">\n        <nb-list-item *ngFor=\"let plato of carta.promociones\">\n          <button nbButton ghost status=\"primary\" (click)=\"add_promocion (plato [0])\">\n            <nb-icon icon=\"plus-outline\"></nb-icon>\n          </button>\n          &nbsp;\n          &nbsp;\n          &nbsp;\n          <nb-user [name]=\"plato [0].nombre\" showTitle=false [picture]=\"plato[0].imagen\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, ElementRef, AfterViewInit, ViewChild, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { elementAt, filter, finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbToastrService, NbGlobalPosition, NbComponentStatus, NbIconConfig } from '@nebular/theme';\nimport * as moment from 'moment';\nimport { fromEvent } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\n\n\n// AlgoliaSearch’\nconst algoliasearch = require('algoliasearch');\nimport { environment } from '../../../environments/environment';\n\n@Component({\n  selector: 'ngx-gestionar-ventas',\n  templateUrl: './gestionar-ventas.component.html',\n  styleUrls: ['./gestionar-ventas.component.scss']\n})\nexport class GestionarVentasComponent implements OnInit {\n  @ViewChild('input') input: ElementRef;\n\n  search_text: string = '';\n  loading: boolean = false;\n  search_loading: boolean = false;\n  ver_ventas: boolean = false;\n  productos_busqueda: any [] = [];\n  form_venta: FormGroup;\n  form_abrir_caja: FormGroup;\n\n  lista: Map<string, any> = new Map<string, any> ();\n  client: any;\n  algolia_index: any;\n\n  caja_data: any = {\n    id: '',\n    nombre: '',\n    instancia_actual: null,\n    cajero_actual: null,\n    caja_abierta: false\n  };\n  cajeros: any [] = [];\n  productos: any [] = [];\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private toastrService: NbToastrService,\n    private auth: AuthService\n  ) {\n  }\n\n  ngOnInit (): void {\n    this.form_venta = new FormGroup ({\n      tipo: new FormControl ('rapido', [Validators.required]),\n      importe: new FormControl ('', [Validators.required]),\n      fecha: new FormControl (''),\n      anio: new FormControl (''),\n      mes: new FormControl (''),\n      dia: new FormControl (''),\n      tipo_comprobante: new FormControl ('boleta'),\n      tipo_pago: new FormControl ('efectivo'),\n      tarjeta_cod_ref: new FormControl (''),\n      nro_comprobante: new FormControl (''),\n      cliente_nombre: new FormControl (''),\n      imprimir_ticket: new FormControl (true)\n    });\n\n    this.form_abrir_caja = new FormGroup ({\n      monto_apertura: new FormControl ('', [Validators.required, Validators.min (1)]),\n      admi_correo: new FormControl ('', [Validators.required, Validators.email]),\n      admi_password: new FormControl ('', [Validators.required]),\n      cajero_actual: new FormControl ('', [Validators.required])\n    });\n\n    this.client = algoliasearch (environment.algolia.appId, environment.algolia.apiKey, { protocol: 'https:' });\n    this.algolia_index = this.client.initIndex(environment.algolia.indexName);\n\n    this.database.get_pos_data (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      console.log (res);\n      this.caja_data = res;\n    });\n\n    this.database.get_usuarios_by_tipo (-1).subscribe ((res: any []) => {\n      this.cajeros = res;\n    });\n  }\n\n  get_cajeros_validos (lista: any []) {\n    return lista.filter ((e: any) => {\n      return e.id !== this.caja_data.cajero_actual.cajero_id;\n    });\n  }\n\n  ngAfterViewInit () {\n    // server-side search\n    fromEvent (this.input.nativeElement, 'keyup')\n      .pipe(\n          filter(Boolean),\n          debounceTime(0),\n          distinctUntilChanged(),\n          tap ((text) => {\n            if (this.input.nativeElement.value.trim () !== '' && this.input.nativeElement.value.length > 1) {\n              this.onSearchType (this.input.nativeElement.value);\n            }\n          })\n      )\n      .subscribe();\n  }\n\n  cambiar_tipo_pago (tipo: string) {\n    this.form_venta.controls ['tipo_pago'].setValue (tipo);\n\n    this.form_venta.controls ['importe'].setValue (null);\n    this.form_venta.controls ['tarjeta_cod_ref'].setValue (null);\n\n    if (tipo === 'efectivo') {\n      this.form_venta.controls ['importe'].setValidators ([Validators.required]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([]);\n    } else {\n      this.form_venta.controls ['importe'].setValidators ([]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([Validators.required]);\n    }\n\n    this.form_venta.controls ['tarjeta_cod_ref'].updateValueAndValidity ();\n    this.form_venta.controls ['importe'].updateValueAndValidity ();\n  }\n\n  async selectProducto (producto: any) {\n    if (this.lista.get (producto.objectID) === undefined) {\n      let p: any = await this.database.get_producto_by_id (producto.objectID);\n      this.lista.set (p.id, {\n        id: p.id,\n        nombre: p.nombre,\n        cantidad: 1,\n        orden: this.lista.size + 1,\n        precio: p.precio_venta,\n        stock: p.stock,\n        categoria_id: p.categoria_id,\n        marca_id: p.marca_id,\n        subcategoria_id: p.subcategoria_id\n      });\n    } else {\n      this.lista.get (producto.objectID).cantidad++;\n    }\n\n    this.input.nativeElement.value = \"\";\n    this.input.nativeElement.focus ();\n    this.showToast ('El propucto se agrego correctamente', true, 'basic');\n  }\n\n  eliminar_producto (producto_id: string) {\n    this.lista.delete (producto_id);\n  }\n\n  get_total () {\n    let total: number = 0;\n    this.lista.forEach (element => {\n      total += element.precio * element.cantidad;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  onSearchType (value: string) {\n    this.search_loading = true;\n    this.productos_busqueda = [];\n\n    this.algolia_index.search (value)\n    .then ((data: any)=>{\n      this.search_loading = false;\n\n      if (data.hits.find ((x: any) => x.id === value) !== undefined) {\n        console.log (data.hits.find ((x: any) => x.id === value));\n        this.selectProducto (data.hits.find ((x: any) => x.id === value));\n        return;\n      }\n\n      if (data.hits.find ((x: any) => x.sku === value) !== undefined) {\n        this.selectProducto (data.hits.find ((x: any) => x.sku === value));\n        return;\n      }\n\n      this.productos_busqueda = data.hits;\n    })\n    .catch ((err: any) => {\n      this.search_loading = false;\n      console.log (err);\n    });\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_cantidad_articulos () {\n    let cantidad: number = 0;\n    this.lista.forEach ((i: any) => {\n      cantidad += i.cantidad;\n    });\n\n    return cantidad;\n  }\n\n  cobrar_confirmar (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  calcular_cambio () {\n    return this.form_venta.value.importe - this.get_total ();\n  }\n\n  descartar_confirm () {\n    if (confirm ('¿Esta seguro que desea descartar esta Orden?')) {\n      this.descartar ();\n    }\n  }\n\n  descartar () {\n    this.lista.clear ();\n    this.form_venta.reset ();\n\n    this.form_venta.controls ['tipo'].setValue ('rapido');\n    this.form_venta.controls ['tipo_pago'].setValue ('efectivo');\n    this.form_venta.controls ['tipo_comprobante'].setValue ('boleta');\n    this.form_venta.controls ['imprimir_ticket'].setValue (true);\n  }\n\n  validar_cobrar () {\n    let returned: boolean = true;\n    if (this.form_venta.value.tipo_pago === 'efectivo') {\n      if (this.calcular_cambio () > 0 && this.form_venta.value.importe !== 0) {\n        returned = false;\n      }\n    } else {\n      returned = this.form_venta.invalid;\n    }\n\n    return returned;\n  }\n\n  showToast (mensaje: string, preventDuplicates, status: NbComponentStatus) {\n    const iconConfig: NbIconConfig = { icon: 'checkmark-circle-outline', pack: 'eva' };\n    this.toastrService.show (\n      mensaje,\n      'Mensaje',\n      { preventDuplicates, status });\n  }\n\n  abrir_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  validar_admi (ref: any) {\n    this.loading = true;\n    const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.abri_caja_data (ref);\n    } else {\n      this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n        if (res.length > 0) {\n          this.abri_caja_data (ref);\n        } else {\n          this.loading = false;\n          alert ('Usuario invalido');\n        }\n      }).catch ((error: any) => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  abri_caja_data (ref: any) {\n    let data: any = {\n      id: this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      fecha: moment ().format ('DD[-]MM[-]YYYY'),\n      hora: moment ().format ('h:mm'),\n      nombre: this.auth.usuario.nombre,\n      cajero_actual: {\n        tmp_id: this.database.createId (),\n        cajero_id: this.form_abrir_caja.value.cajero_actual.id,\n        nombre: this.form_abrir_caja.value.cajero_actual.nombre,\n        fecha_entrada: moment ().format ('L'),\n        hora_entrada: moment ().format ('h:mm'),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura\n      },\n      instancia_actual: {\n        tmp_id: this.database.createId (),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura,\n        fecha_apertura: moment ().format ('L'),\n        hora_apertura: moment ().format ('h:mm'),\n      },\n      caja_abierta: true,\n    };\n\n    this.database.add_post_data (data).then (() => {\n      this.showToast ('La caja se abrio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  caja_abierta () {\n    if (this.caja_data === undefined) {\n      return false;\n    }\n\n    if (this.caja_data.cajero_actual !== null && this.caja_data.caja_abierta === true) {\n      return true;\n    }\n\n    return false;\n  }\n\n  submit (ref: any) {\n    this.loading = true;\n\n    let lista: any [] = [];\n    this.lista.forEach ((value: any) => {\n      lista.push (value);\n    });\n\n    let data: any = {\n      id: this.database.createId (),\n      fecha: moment ().format ('YYYY[-]MM[-]DD'),\n      hora: moment ().format ('HH:mm'),\n      importe: this.form_venta.value.importe,\n      pos_id: this.caja_data.id,\n      pos_nombre: this.caja_data.nombre,\n      cajero_id: this.caja_data.cajero_actual.cajero_id,\n      cajero_tmp_id: this.caja_data.cajero_actual.tmp_id,\n      cajero_nombre: this.caja_data.cajero_actual.nombre,\n      instancia_id: this.caja_data.instancia_actual.tmp_id,\n      total: this.get_total (),\n      tipo_comprobante: this.form_venta.value.tipo_comprobante,\n      nro_comprobante: this.form_venta.value.nro_comprobante,\n      cliente_nombre: this.form_venta.value.cliente_nombre,\n      productos: lista\n    };\n\n    this.database.registrar_venta (this.caja_data, data)\n      .then (() => {\n        this.loading = false;\n        console.log ('Registrado correctamente');\n        this.showToast ('Registro exitoso', false, 'success');\n        this.descartar ();\n        ref.close ();\n      })\n      .catch (() => {\n        this.loading = false;\n        ref.close ();\n      });\n  }\n\n  get_registrar_nombre () {\n    return 'Registrar ' + this.search_text;\n  }\n\n  async confirmar_cambio_cajero (dialog: any) {\n    const res = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      venta.productos.forEach ((producto: any) => {\n        total += producto.cantidad * producto.precio;\n      });\n    });\n\n    return this.get_total_format (total);\n  }\n\n  cambiar_cajero (ref: any) {\n    this.loading = true;\n    this.loading = true;\n    const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.cambiar_caja_data (ref);\n    } else {\n      this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n        if (res.length > 0) {\n          this.cambiar_caja_data (ref);\n        } else {\n          this.loading = false;\n          alert ('Usuario invalido');\n        }\n      }).catch ((error: any) => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  cambiar_caja_data (ref: any) {\n    let data: any = {\n      id: this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      nombre: this.auth.usuario.nombre,\n      monto_apertura: this.form_abrir_caja.value.monto_apertura,\n      fecha_apertura: moment ().format ('L'),\n      hora_apertura: moment ().format ('h:mm'),\n      cajero_actual: {\n        tmp_id: this.database.createId (),\n        cajero_id: this.form_abrir_caja.value.cajero_actual.id,\n        nombre: this.form_abrir_caja.value.cajero_actual.nombre,\n        fecha_entrada: moment ().format ('L'),\n        hora_entrada: moment ().format ('h:mm'),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura\n      },\n      caja_abierta: true\n    };\n\n    this.database.update_post_data (data).then (() => {\n      this.showToast ('La caja se cambio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  valid_max_min (value: number, max: number, min: number) {\n    if (value > max) {\n      value = max;\n    }\n\n    if (value < min) {\n      value = min;\n    }\n  }\n\n  validar_cambiar_cajero (total: any) {\n    let returned: boolean = true;\n    let value = (total + this.caja_data.cajero_actual.monto_apertura) - this.form_abrir_caja.value.monto_apertura;\n    if (this.form_abrir_caja.valid && value >= 0) {\n      returned = false;\n    }\n\n    return returned;\n  }\n\n  async reporte_cajero (dialog: any) {\n    let res = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  async reporte_total (dialog: any) {\n    let res = await this.database.get_ventas_total (this.caja_data.id, this.caja_data.instancia_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  confirmar_cerrar_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  cerrar_caja (ref: any) {\n    this.loading = true;\n\n    this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password)\n    .then ((res: any []) => {\n      if (res.length > 0) {\n        this.database.cerrar_pos (this.caja_data)\n          .then (() => {\n            this.showToast ('La caja se cerro correctamente', false, 'success');\n            this.loading = false;\n            ref.close ();\n          })\n          .catch ((error: any) => {\n            this.loading = false;\n            console.log (error);\n          });\n      } else {\n        this.loading = false;\n        alert (\"!Usuario invalido¡\");\n      }\n    })\n    .catch ((error: any) => {\n      this.loading = false;\n      console.log (error);\n    });\n  }\n\n  async agregar_nota_credito () {\n    let id = prompt ('Ingrese la nota de credito');\n    let nota_c: any = await this.database.get_nota_credito (id);\n    console.log (nota_c);\n\n    this.lista.set (nota_c.id, {\n      id: nota_c.id,\n      nombre: 'Nota de credito',\n      cantidad: 1,\n      orden: this.lista.size + 1,\n      precio: -nota_c.total,\n      stock: 1,\n      categoria_id: '',\n      marca_id: '',\n      subcategoria_id: '',\n      es_producto: false\n    });\n  }\n}\n","<ng-template #dialog_cobro let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_venta\" [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Realizar pedido</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-select placeholder=\"Seleccione una opcion\" formControlName=\"tipo\">\n            <nb-option value=\"rapido\">Rapido</nb-option>\n            <nb-option value=\"completo\">Completo</nb-option>\n          </nb-select>\n        </div>\n      </div>\n\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"text-center\">\n        <h3>{{ get_total () | currency:'S/. ' }}</h3>\n      </div>\n      <br>\n      <div class=\"linked text-center\">\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'efectivo' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('efectivo')\"\n          nbButton>\n          <nb-icon icon=\"npm-outline\"></nb-icon>\n          Efectivo\n        </button>\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'tarjeta' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('tarjeta')\"\n          nbButton>\n          <nb-icon icon=\"credit-card-outline\"></nb-icon>\n          Tarjeta de credito\n        </button>\n      </div>\n      <br>\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'efectivo'\">\n        <div>\n          <label><b>Pago con:</b></label>\n        </div>\n        <div class=\"linked\">\n          <input nbInput fieldSize=\"medium\" type=\"number\" min=\"0\" style=\"width: 120px;\" formControlName=\"importe\">\n          <button\n            [status]=\"form_venta.value.importe === 10 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (10)\"\n            status=\"primary\"\n            *ngIf=\"get_total () < 10\"\n            nbButton>S/. 10\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 20 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (20)\"\n            *ngIf=\"get_total () < 20\"\n            nbButton>S/. 20\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 50 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (50)\"\n            *ngIf=\"get_total () < 50\"\n            nbButton>S/. 50\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 100 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (100)\"\n            *ngIf=\"get_total () < 100\"\n            nbButton>S/. 100\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 200 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (200)\"\n            *ngIf=\"get_total () < 200\"\n            nbButton>S/. 200\n          </button>\n        </div>\n        <br>\n        <div>\n          <label><b>Su cambio:</b></label>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () < 0\">\n          Ingrese un importe valido\n          <br>\n          <br>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () > 0\">\n          <h6>{{ calcular_cambio () | currency:'S/. ' }}</h6>\n        </div>\n      </ng-container>\n\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'tarjeta'\">\n        <div>\n          <label><b>Codigo:</b></label>\n        </div>\n        <input nbInput fullWidth fieldSize=\"medium\" type=\"text\" formControlName=\"tarjeta_cod_ref\">\n        <br>\n        <br>\n      </ng-container>\n\n      <div>\n        <nb-checkbox formControlName=\"imprimir_ticket\">Imprimir ticket</nb-checkbox>\n      </div>\n      <br>\n      <div *ngIf=\"form_venta.value.tipo === 'completo'\">\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\"><b>Tipo de comprobante</b></label>\n              <nb-select fullWidth id=\"tipo_comprobante\" placeholder=\"Seleccione una opcion\" formControlName=\"tipo_comprobante\">\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"nro_comprobante\"><b>N° de comprobante</b></label>\n              <input nbInput fullWidth id=\"nro_comprobante\" formControlName=\"nro_comprobante\" type=\"text\">\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"cliente_nombre\"><b>Nombre del cliente</b></label>\n              <input nbInput fullWidth id=\"cliente_nombre\" formControlName=\"cliente_nombre\" type=\"text\">\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <button nbButton status=\"success\" [disabled]=\"validar_cobrar ()\" (click)=\"submit (ref)\" fullWidth>Cobrar</button>\n      </div>\n    </nb-card-body>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_abrir_caja let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_abrir_caja\" [nbSpinner]=\"loading\" autocomplete=\"off\">\n    <nb-card-header>\n      <h6>Apertura de caja</h6>\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"form-group\">\n        <label for=\"monto_apertura\"><b>Monto de apertura</b></label>\n        <input formControlName=\"monto_apertura\" nbInput fullWidth id=\"monto_apertura\" type=\"number\">\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"cajero_actual\"><b>Cajero</b></label>\n        <nb-select fullWidth id=\"cajero_actual\" placeholder=\"Seleccione una opcion\" formControlName=\"cajero_actual\">\n          <nb-option *ngFor=\"let item of cajeros\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n      <br>\n      <div class=\"form-group\">\n        <label for=\"admi_correo\"><b>Correo</b></label>\n        <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"admi_password\"><b>Contraseña</b></label>\n        <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"form_abrir_caja.invalid\" (click)=\"validar_admi (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cambio_cajero let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cambio de cajero</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <nb-card-body *ngIf=\"!ver_ventas\" [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Monto a retirar:</b> {{ (get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura) - form_abrir_caja.value.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"monto_apertura\"><b>Dejar en caja</b></label>\n              <input\n                formControlName=\"monto_apertura\"\n                nbInput fullWidth id=\"monto_apertura\"\n                type=\"number\">\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"cajero_actual\"><b>Cajero</b></label>\n              <nb-select fullWidth id=\"cajero_actual\" placeholder=\"Seleccione una opcion\" formControlName=\"cajero_actual\">\n                <nb-option *ngFor=\"let item of get_cajeros_validos (cajeros)\" [value]=\"item\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <br>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"validar_cambiar_cajero (get_total_lista (data.ventas))\" (click)=\"cambiar_cajero (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_reporte let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <h6>Reporte</h6>\n    </nb-card-header>\n\n    <div style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.cajero_nombre }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n      </table>\n    </div>\n\n    <nb-card-footer style=\"display: inline-flex;\">\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      <div style=\"width: 100%; text-align: end; align-self: center;\">\n        <h6>Total: {{ get_total_lista (data.ventas) | currency:'S/. ' }}</h6>\n      </div>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cerrar_caja let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cerrar caja</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <nb-card-body *ngIf=\"!ver_ventas\" [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" (click)=\"cerrar_caja (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout [nbSpinner]=\"loading\">\n  <nb-layout-header>\n    <div class=\"row\" style=\"width: 100%;\" *ngIf=\"caja_abierta () === true\">\n      <div class=\"col-10\" style=\"display: grid;\">\n        <span class=\"cajero-nombre\">{{ caja_data?.cajero_actual.nombre }}</span>\n        <span class=\"cajero-tiempo\">Conectado a: {{ caja_data?.cajero_actual.hora_entrada }} {{ caja_data?.cajero_actual.fecha_entrada }}</span>\n      </div>\n\n      <div class=\"col-2 text-right\">\n        <button nbButton [nbPopover]=\"templateRef\" nbPopoverPlacement=\"bottom\" ghost><nb-icon icon=\"settings-2-outline\"></nb-icon></button>\n        <ng-template #templateRef>\n          <div style=\"display: table-caption;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cambio_cajero (dialog_cambio_cajero)\">\n              <nb-icon icon=\"flip-2-outline\"></nb-icon>Cambiar cajero\n            </button>\n            <hr style=\"margin: 0px;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"reporte_cajero (dialog_reporte)\">\n              <nb-icon icon=\"book-outline\"></nb-icon>Reporte cajero\n            </button>\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"reporte_total (dialog_reporte)\">\n              <nb-icon icon=\"book-outline\"></nb-icon>Reporte venta total\n            </button>\n            <hr style=\"margin: 0px;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cambio_cajero (dialog_cerrar_caja)\">\n              <nb-icon icon=\"close-circle-outline\"></nb-icon>Cerrar caja\n            </button>\n          </div>\n        </ng-template>\n      </div>\n    </div>\n\n    <div class=\"row\" *ngIf=\"caja_abierta () === false\">\n      <button nbButton status=\"primary\" style=\"margin-left: 1rem;\" (click)=\"abrir_caja (dialog_abrir_caja)\">\n        Abrir caja\n      </button>\n    </div>\n  </nb-layout-header>\n\n  <nb-layout-column>\n    <nb-card size=\"small\">\n      <nb-card-header>\n        <input [(ngModel)]=\"search_text\" style=\"border-radius: 6px 0px 0px 6px; width: 100%;\" type=\"search\" #input nbInput autofocus placeholder=\"Busca algun producto...\">\n      </nb-card-header>\n\n      <nb-list [nbSpinner]=\"search_loading\">\n        <!-- <nb-list-item *ngIf=\"productos_busqueda.length <= 0 && search_text !== '' && search_loading === false\">\n          <nb-user [name]=\"get_registrar_nombre ()\" showTitle=false picture=\"https://simpleicon.com/wp-content/uploads/plus-256x256.png\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item> -->\n\n        <nb-list-item *ngFor=\"let item of productos_busqueda\">\n          <nb-user [name]=\"item.nombre\" showTitle=false [picture]=\"item.imagen\" shape=\"rectangle\">\n          </nb-user>\n          <button nbButton ghost status=\"primary\" (click)=\"selectProducto (item)\">\n            <nb-icon icon=\"arrow-forward-outline\"></nb-icon>\n          </button>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n\n  <nb-layout-column>\n    <nb-card size=\"small\">\n      <nb-card-header style=\"display: flex; align-items: center;\">\n        <h6 style=\"width: 100%;\">Lista de orden</h6>\n        <div style=\"width: 100%;\" class=\"text-right\">\n          <h6>{{ get_cantidad_articulos () }} articulos</h6>\n        </div>\n      </nb-card-header>\n\n      <div style=\"overflow-y: scroll; height: 100%;\">\n        <table class=\"table table-sm table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">N°</th>\n              <th scope=\"col\">Producto</th>\n              <th scope=\"col\">Unidades</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Total</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of lista | keyvalue\">\n              <th scope=\"row\">{{ item.value.orden }}</th>\n              <td>{{ item.value.nombre }}</td>\n              <td>\n                <input [min]=\"1\" [max]=\"item.value.stock\" type=\"number\" style=\"width: 84px;\" fieldSize=\"small\" [(ngModel)]=\"item.value.cantidad\" nbInput>\n              </td>\n              <td>\n                {{ item.value.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.value.precio * item.value.cantidad) | currency:'S/. ' }}\n              </td>\n              <td>\n                <button nbButton ghost size=\"small\" status=\"danger\" (click)=\"eliminar_producto (item.value.id)\">\n                  <nb-icon icon=\"close-outline\"></nb-icon>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <nb-card-footer style=\"display: flex; align-items: center;\">\n        <button nbTooltip=\"Limpiar\" nbButton outline status=\"danger\" (click)=\"descartar_confirm ()\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"trash-2\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Imprimir\" style=\"margin-left: 1rem;\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"printer\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Registrar nota de credito\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"file-text\"></nb-icon>\n        </button>\n\n        <!-- <button nbTooltip=\"Registrar ingreso/egreso\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"plus-square\"></nb-icon>\n        </button> -->\n\n        <div style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline size=\"giant\" status=\"success\" (click)=\"cobrar_confirmar (dialog_cobro)\" [disabled]=\"lista.size <= 0 || caja_abierta () === false || get_total () < 0\">\n            Cobrar:\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { first, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngx-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n  items: any [] = [];\n  _items: any [] = [];\n\n  avatar_preview: any = null;\n  file: any = null;\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  text: string = '';\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private af_storage: AngularFireStorage,\n    private afs: AngularFirestore\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      linea_comida: new FormControl ('', [Validators.required]),\n      logotipo: new FormControl (''),\n      telefono: new FormControl ('', [Validators.required]),\n      correo: new FormControl ('', [Validators.required]),\n      orden: new FormControl (0),\n      color: new FormControl ('#3689e6', [Validators.required]),\n      habilitado: new FormControl (true)\n    });\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.items = res;\n      this._items = res;\n      this.loading = false;\n      console.log (res);\n    });\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_empresa (data)\n        .then (() => {\n          this.cancelar (dialog);\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          this.cancelar (dialog);\n        });\n      } else {\n        this.uploadImageAsPromise (this.file, data, dialog, true);\n      }\n    } else {\n      data.id = this.database.createId ();\n\n      if (this.file === null) {\n        this.database.add_empresa (data)\n          .then (() => {\n            this.cancelar (dialog);\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.cancelar (dialog);\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, dialog: any, edit: boolean = false) {\n    const filePath = 'Empresas/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.logotipo = downloadURL;\n\n        if (edit) {\n          this.database.update_empresa (data)\n            .then (() => {\n              this.cancelar (dialog);\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              this.cancelar (dialog);\n            });\n        } else {\n          this.database.add_empresa (data)\n          .then (() => {\n            this.cancelar (dialog);\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.cancelar (dialog);\n          });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n    this.avatar_preview = item.logotipo;\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_empresa (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    this.loading = false;\n\n    this.file = null;\n    this.avatar_preview = \"\";\n\n    dialog.close ();\n    this.form.reset ();\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n\n    item.habilitado = !item.habilitado;\n    this.database.update_empresa (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  filter () {\n    // console.log (this.search_text);\n    // console.log (this.search_text);\n\n    // this.items = this._items;\n\n    // if (this.elemento_filtro === 'todos') {\n    //   this.items = this.items.filter ((item: any) => {\n    //     return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    //   });\n    // } else {\n    //   this.items = this.items.filter ((item: any) => {\n    //     return (item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1) && item.menu_elemento.id === this.elemento_filtro;\n    //   });\n    // }\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n\n    };\n  }\n\n  getTextColor(color) {\n    let rgba: any = this.hexToRgb (color).match(/\\d+/g);\n    if ((rgba[0] * 0.299) + (rgba[1] * 0.587) + (rgba[2] * 0.114) > 186) {\n        return 'black';\n    } else {\n        return 'white';\n    }\n  }\n\n  hexToRgb (hex) {\n    var bigint = parseInt(hex, 16);\n    var r = (bigint >> 16) & 255;\n    var g = (bigint >> 8) & 255;\n    var b = bigint & 255;\n\n    return r + \",\" + g + \",\" + b;\n  }\n\n  async export () {\n    let data = await this.afs.collection ('Ventas_Tienda_Producto').valueChanges ().pipe (first ()).toPromise ();\n    const jsonContent = JSON.stringify(data);\n    console.log (jsonContent);\n  }\n\n  handleFileInput (files: FileList) {\n    console.log (files);\n  }\n\n  async import () {\n    let list: any [] = JSON.parse (this.text);\n\n    // const wordsPerLine = Math.ceil(list.length / 2)\n    // const result = [[], []]\n\n    // for (let line = 0; line < 2; line++) {\n    //   for (let i = 0; i < wordsPerLine; i++) {\n    //     const value = list[i + line * wordsPerLine]\n    //     if (!value) continue //avoid adding \"undefined\" values\n    //     result[line].push(value)\n    //   }\n    // }\n\n    // console.log (result);\n\n    // result.forEach (async (l) => {\n    //   let batch = this.afs.firestore.batch ();\n    //   l.forEach ((item: any) => {\n    //     batch.set (\n    //       this.afs.collection ('Tienda_Productos').doc (item.id).ref,\n    //       item\n    //     );\n    //   });\n\n    //   await batch.commit ().then (() => {\n    //     console.log ('Finalizado')\n    //   }, error => {\n    //     console.log (error);\n    //   });\n    // });\n\n    console.log (list);\n    let batch = this.afs.firestore.batch ();\n    list.forEach ((item: any) => {\n      batch.set (\n        this.afs.collection ('Ventas_Tienda_Producto').doc (item.id).ref,\n        item\n      );\n    });\n\n    await batch.commit ().then (() => {\n      console.log ('Finalizado')\n    }, error => {\n      console.log (error);\n    });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"row\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"linea_comida\" class=\"label\">Linea de comida:</label>\n          <input type=\"text\" formControlName=\"linea_comida\" id=\"linea_comida\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"telefono\" class=\"label\">Telefono:</label>\n              <input type=\"tel\" formControlName=\"telefono\" id=\"telefono\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Correo:</label>\n              <input type=\"email\" formControlName=\"correo\" id=\"correo\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"color\" class=\"label\">Color:</label>\n              <input\n                [colorPicker]=\"form.get('color').value\"\n                [value]=\"form.get('color').value\"\n                (colorPickerChange)=\"form.get ('color').setValue ($event)\"\n                [cpOutputFormat]=\"hex\"\n                formControlName=\"color\"\n                nbInput fullWidth type=\"text\" id=\"color\"/>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"orden\" class=\"label\">Orden:</label>\n              <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-card>\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-9\">\n        <h5>Empresas</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <div class=\"row\">\n      <div class=\"col-4\" *ngFor=\"let item of items\">\n        <nb-card>\n          <nb-card-header [ngStyle]=\"{ 'background-color': item.color }\">\n            <div class=\"row\">\n              <div class=\"col-9\" [ngStyle]=\"{ 'color': getTextColor (item.color) }\">\n                {{ item.nombre }}\n              </div>\n\n              <div class=\"col-3\">\n                <img class=\"header-image\" [src]=\"item.logotipo\">\n              </div>\n            </div>\n          </nb-card-header>\n          <nb-card-body style=\"display: grid;\">\n            <b>Telefono:</b>\n            {{ item.telefono }}\n            <b>Correo:</b>\n            {{ item.correo }}\n          </nb-card-body>\n          <nb-card-footer style=\"display: inline-flex;\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/cartas/' + item.id\">\n              <nb-icon status=\"primary\" icon=\"book-open-outline\"></nb-icon>\n            </button>\n\n            <button *ngIf=\"item.pos === true\" nbButton fullWidth size=\"small\" title=\"Gestionar Mesas\" ghost [routerLink]=\"'/pages/gestionar-mesas/' + item.id\">\n              <nb-icon status=\"primary\" icon=\"layout-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/almacen/' + item.id\">\n              <nb-icon status=\"primary\" title=\"Gestionar almacen\" icon=\"cube-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (item)\">\n              <nb-icon *ngIf=\"item.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n              <nb-icon *ngIf=\"!item.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n            </button>\n          </nb-card-footer>\n        </nb-card>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n@Component({\n  selector: 'ngx-insumos-categoria',\n  templateUrl: './insumos-categoria.component.html',\n  styleUrls: ['./insumos-categoria.component.scss']\n})\nexport class InsumosCategoriaComponent implements OnInit {\n  items: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_insumos_categoria ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_insumo_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_insumo_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo_categoria (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth placeholder=\"Nombre\">\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!-- <nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-9\">\n        <h5>Categorias de insumos</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton fullWidth status=\"success\" (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Nombre</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n\n          <td>\n            {{ item.nombre }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card> -->\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Categorias de insumos</h5>\n      </div>\n\n      <div class=\"col-6\">\n        <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar categoria...\">\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n    <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n    <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n        {{ customColumn }}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n        {{row.data [customColumn]}}\n      </td>\n    </ng-container>\n\n    <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                  [nbTreeGridColumnDef]=\"column\"\n                  [showOn]=\"getShowOn(index)\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n        {{column}}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <div *ngIf=\"row.data [column] !== 'accion'\">\n          {{ row.data [column] }}\n        </div>\n\n        <div *ngIf=\"row.data [column] === 'accion'\">\n          <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n            <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n          </button>\n        </div>\n      </td>\n    </ng-container>\n  </table>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-insumos',\n  templateUrl: './insumos.component.html',\n  styleUrls: ['./insumos.component.scss']\n})\nexport class InsumosComponent implements OnInit {\n  categorias: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Unidad', 'Precio', 'Categoria', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      unidad_medida: new FormControl ('', [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_insumos_categoria ().subscribe ((res: any []) => {\n      this.categorias = res;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i.data,\n          Nombre: i.data.nombre,\n          Unidad: i.data.unidad_medida,\n          Precio: i.data.precio,\n          Categoria: i.categoria.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  eliminar (data: any) {\n    console.log ('Eliminar', data);\n    this.database.eliminar_insumo (data.id);\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"unidad_medida\" class=\"label\">Unidad de medida:</label>\n              <nb-select formControlName=\"unidad_medida\" id=\"unidad_medida\" fullWidth>\n                <nb-option value=\"g\">Gramos</nb-option>\n                <nb-option value=\"kg\">Kilos</nb-option>\n                <nb-option value=\"L\">Litros</nb-option>\n                <nb-option value=\"uds.\">Unidades</nb-option>\n              </nb-select>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"categoria\" class=\"label\">Categoria:</label>\n              <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth>\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <!-- <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon> -->\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-body>\n    <nb-card-header>\n      <div class=\"row align-items-center\">\n        <div class=\"col-3\">\n          <h5>Insumos</h5>\n        </div>\n\n        <div class=\"col-6\">\n          <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n        </div>\n\n        <div class=\"col-3\">\n          <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n      <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n      <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n      <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n          {{ customColumn }}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n          {{row.data [customColumn]}}\n        </td>\n      </ng-container>\n\n      <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                    [nbTreeGridColumnDef]=\"column\"\n                    [showOn]=\"getShowOn(index)\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n          {{column}}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <div *ngIf=\"row.data [column] !== 'accion'\">\n            <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n            <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n          </div>\n\n          <div *ngIf=\"row.data [column] === 'accion'\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"eliminar (row.data ['data'])\">\n              E\n            </button> -->\n          </div>\n        </td>\n      </ng-container>\n    </table>\n\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-menu-elementos',\n  templateUrl: './menu-elementos.component.html',\n  styleUrls: ['./menu-elementos.component.scss']\n})\nexport class MenuElementosComponent implements OnInit {\n  items: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Orden', 'Precio', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      orden: new FormControl (0),\n      precio: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Orden: i.orden,\n          Precio: i.precio,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_menu_elemento (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_menu_elemento (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_menu_elemento (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"orden\" class=\"label\">Orden:</label>\n          <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"precio\" class=\"label\">Precio:</label>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!--nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-9\">\n        <h5>Menu elementos</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton fullWidth status=\"success\" (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <!-- <th scope=\"col\">Codigo</th>\n          <th scope=\"col\">Nombre</th>\n          <th scope=\"col\">Orden</th>\n          <th scope=\"col\">Precio</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n          <td>\n            {{ item.nombre }}\n          </td>\n\n          <td>\n            {{ item.orden }}\n          </td>\n\n          <td>\n            {{ item.precio | currency:'S/. ' }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"delete (item)\">\n              <nb-icon status=\"primary\" icon=\"trash-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card-->\n\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Menu elementos</h5>\n      </div>\n\n      <div class=\"col-6\">\n        <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar elementos...\">\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n    <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n    <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n        {{ customColumn }}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n        {{row.data [customColumn]}}\n      </td>\n    </ng-container>\n\n    <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                  [nbTreeGridColumnDef]=\"column\"\n                  [showOn]=\"getShowOn(index)\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n        {{column}}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <div *ngIf=\"row.data [column] !== 'accion'\">\n          <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n          <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n        </div>\n\n        <div *ngIf=\"row.data [column] === 'accion'\">\n          <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n            <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n          </button>\n        </div>\n      </td>\n    </ng-container>\n  </table>\n</nb-card>\n\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss']\n})\nexport class MenuComponent implements OnInit {\n  elementos: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Menu', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      // precio: new FormControl (0),\n      elemento_menu_id: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_menus ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.elementos = res;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i.data,\n          Nombre: i.data.nombre,\n          Menu: i.menu_elemento.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_menu (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_menu (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_menu (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.form.reset ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"elemento_menu_id\" class=\"label\">Menu elemento:</label>\n          <nb-select formControlName=\"elemento_menu_id\" id=\"elemento_menu_id\" fullWidth>\n            <nb-option *ngFor=\"let item of elementos\" [value]=\"item.id\">\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <!-- <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon>\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n        <!-- <div class=\"row\">\n          <div class=\"col-6\">\n\n          </div>\n          <div class=\"col-6\">\n\n          </div>\n        </div> -->\n\n\n        <!-- <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon>\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!-- <nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Menu</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <input type=\"search\" [(ngModel)]=\"search_text\" nbInput fullWidth (ngModelChange)=\"filter ()\" placeholder=\"Buscar menu...\">\n      </div>\n\n      <div class=\"col-3\">\n        <nb-select [(ngModel)]=\"elemento_filtro\" id=\"elemento_menu_id\" fullWidth (selectedChange)=\"filter ()\">\n          <nb-option value=\"todos\">\n            Todos\n          </nb-option>\n\n          <nb-option *ngFor=\"let item of elementos\" [value]=\"item.id\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Nombre</th>\n          <!-- <th scope=\"col\">Icono</th> -->\n          <!-- <th scope=\"col\">Precio</th> -->\n          <!-- <th scope=\"col\">Stock</th>\n          <th scope=\"col\">Menu elemento</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n          <!-- <td>\n            {{ item.id }}\n          </td>\n\n          <td>\n            {{ item.data.nombre }}\n          </td>\n\n          <!-- <td>\n            {{ item.icono }}\n          </td> -->\n\n          <!-- <td>\n            {{ item.data.precio | currency:'S/. ' }}\n          </td> -->\n\n          <!-- <td>\n            {{ item.stock }}\n          </td>\n\n          <td>\n            {{ item.menu_elemento.nombre }}\n          </td>\n\n          <!-- <td>\n            {{ item.precio }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item.data, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"delete (item.data)\">\n              <nb-icon status=\"primary\" icon=\"trash-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card> -->\n\n<nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row align-items-center\">\n        <div class=\"col-3\">\n          <h5>Menus</h5>\n        </div>\n\n        <div class=\"col-6\">\n          <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar menus...\">\n        </div>\n\n        <div class=\"col-3\">\n          <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n      <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n      <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n      <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n          {{ customColumn }}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n          {{row.data [customColumn]}}\n        </td>\n      </ng-container>\n\n      <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                    [nbTreeGridColumnDef]=\"column\"\n                    [showOn]=\"getShowOn(index)\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n          {{column}}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <div *ngIf=\"row.data [column] !== 'accion'\">\n            {{ row.data [column] }}\n          </div>\n\n          <div *ngIf=\"row.data [column] === 'accion'\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n          </div>\n        </td>\n      </ng-container>\n    </table>\n</nb-card>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { MiscellaneousComponent } from './miscellaneous.component';\nimport { NotFoundComponent } from './not-found/not-found.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MiscellaneousComponent,\n    children: [\n      {\n        path: '404',\n        component: NotFoundComponent,\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MiscellaneousRoutingModule {\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'ngx-miscellaneous',\n  template: `\n    <router-outlet></router-outlet>\n  `,\n})\nexport class MiscellaneousComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { NbButtonModule, NbCardModule } from '@nebular/theme';\n\nimport { ThemeModule } from '../../@theme/theme.module';\nimport { MiscellaneousRoutingModule } from './miscellaneous-routing.module';\nimport { MiscellaneousComponent } from './miscellaneous.component';\nimport { NotFoundComponent } from './not-found/not-found.component';\n\n@NgModule({\n  imports: [\n    ThemeModule,\n    NbCardModule,\n    NbButtonModule,\n    MiscellaneousRoutingModule,\n  ],\n  declarations: [\n    MiscellaneousComponent,\n    NotFoundComponent,\n  ],\n})\nexport class MiscellaneousModule { }\n","import { NbMenuService } from '@nebular/theme';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'ngx-not-found',\n  styleUrls: ['./not-found.component.scss'],\n  templateUrl: './not-found.component.html',\n})\nexport class NotFoundComponent {\n\n  constructor(private menuService: NbMenuService) {\n  }\n\n  goToHome() {\n    this.menuService.navigateHome();\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-md-12\">\n    <nb-card>\n      <nb-card-body>\n        <div class=\"flex-centered col-xl-4 col-lg-6 col-md-8 col-sm-12\">\n          <h2 class=\"title\">404 Page Not Found</h2>\n          <small class=\"sub-title\">The page you were looking for doesn't exist</small>\n          <button nbButton fullWidth (click)=\"goToHome()\" type=\"button\" class=\"home-button\">\n            Take me home\n          </button>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </div>\n</div>\n","import { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\n\nimport { PagesComponent } from './pages.component';\nimport { NotFoundComponent } from './miscellaneous/not-found/not-found.component';\nimport { InsumosComponent } from '../pages/insumos/insumos.component';\nimport { InsumosCategoriaComponent } from '../pages/insumos-categoria/insumos-categoria.component';\nimport { MenuElementosComponent } from '../pages/menu-elementos/menu-elementos.component';\nimport { MenuComponent } from '../pages/menu/menu.component';\nimport { HomeComponent } from '../pages/home/home.component';\nimport { EmpresaCartasComponent } from '../pages/empresa-cartas/empresa-cartas.component';\nimport { AlmacenComponent } from '../pages/almacen/almacen.component';\nimport { UsuariosComponent } from '../pages/usuarios/usuarios.component';\nimport { ConfiguracionComponent } from '../pages/configuracion/configuracion.component';\nimport { PedidosComponent } from '../pages/pedidos/pedidos.component';\nimport { PedidosHistorialComponent } from '../pages/pedidos-historial/pedidos-historial.component';\nimport { GestionarMarcasComponent } from '../pages/gestionar-marcas/gestionar-marcas.component';\nimport { GestionarCategoriasComponent } from '../pages/gestionar-categorias/gestionar-categorias.component';\nimport { GestionarProductosComponent } from '../pages/gestionar-productos/gestionar-productos.component';\nimport { GestionarSubCategoriasComponent } from '../pages/gestionar-sub-categorias/gestionar-sub-categorias.component';\nimport { GestionarVentasComponent } from '../pages/gestionar-ventas/gestionar-ventas.component';\nimport { GestionCambiosDevolucionesComponent } from './gestion-cambios-devoluciones/gestion-cambios-devoluciones.component';\nimport { ReportesVentaComponent } from '../pages/reportes-venta/reportes-venta.component';\nimport { GestionarVentasRestauranteComponent } from '../pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component';\nimport { GestionarMesasComponent } from '../pages/gestionar-mesas/gestionar-mesas.component';\nimport { ReportesEmpresaVentasComponent } from '../pages/reportes-empresa-ventas/reportes-empresa-ventas.component';\nimport { EstadisticasComponent } from '../pages/estadisticas/estadisticas.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: PagesComponent,\n  children: [\n    {\n      path: 'estadisticas/:tipo',\n      component: EstadisticasComponent\n    },\n    {\n      path: 'gestionar-ventas-restaurante',\n      component: GestionarVentasRestauranteComponent,\n    },\n    {\n      path: 'reportes-empresa-ventas',\n      component: ReportesEmpresaVentasComponent\n    },\n    {\n      path: 'gestionar-mesas/:id',\n      component: GestionarMesasComponent,\n    },\n    {\n      path: 'gestionar-marcas',\n      component: GestionarMarcasComponent,\n    },\n    {\n      path: 'gestionar-ventas',\n      component: GestionarVentasComponent,\n    },\n    {\n      path: 'gestionar-categorias',\n      component: GestionarCategoriasComponent,\n    },\n    {\n      path: 'gestionar-productos',\n      component: GestionarProductosComponent,\n    },\n    {\n      path: 'gestionar-sub-categorias',\n      component: GestionarSubCategoriasComponent,\n    },\n    {\n      path: 'gestion-cambios-devoluciones',\n      component: GestionCambiosDevolucionesComponent\n    },\n    {\n      path: 'reportes-venta',\n      component: ReportesVentaComponent,\n    },\n    {\n      path: 'pedidos',\n      component: PedidosComponent,\n    },\n    {\n      path: 'pedidos-historial',\n      component: PedidosHistorialComponent,\n    },\n    {\n      path: 'insumos',\n      component: InsumosComponent,\n    },\n    {\n      path: 'insumos-categoria',\n      component: InsumosCategoriaComponent,\n    },\n    {\n      path: 'home',\n      component: HomeComponent,\n    },\n    {\n      path: 'usuarios',\n      component: UsuariosComponent,\n    },\n    {\n      path: 'menu-elementos',\n      component: MenuElementosComponent,\n    },\n    {\n      path: 'menu',\n      component: MenuComponent,\n    },\n    {\n      path: 'cartas/:id',\n      component: EmpresaCartasComponent,\n    },\n    {\n      path: 'configuracion',\n      component: ConfiguracionComponent,\n    },\n    {\n      path: 'almacen/:id',\n      component: AlmacenComponent,\n    },\n    {\n      path: '',\n      redirectTo: 'home',\n      pathMatch: 'full',\n    },\n    {\n      path: '**',\n      component: NotFoundComponent,\n    },\n  ],\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PagesRoutingModule {\n}\n","import { Component } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\n@Component({\n  selector: 'ngx-pages',\n  styleUrls: ['pages.component.scss'],\n  template: `\n    <ngx-one-column-layout>\n      <nb-menu [items]=\"auth.menu\"></nb-menu>\n      <router-outlet></router-outlet>\n    </ngx-one-column-layout>\n  `,\n})\nexport class PagesComponent {\n  constructor (\n    public auth: AuthService\n  ) { }\n}\n","import { NgModule } from '@angular/core';\nimport {\n  NbMenuModule,\n  NbButtonModule,\n  NbCardModule,\n  NbDialogModule,\n  NbInputModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbSelectModule,\n  NbBadgeModule,\n  NbListModule,\n  NbAccordionModule,\n  NbTreeGridModule,\n  NbAutocompleteModule,\n  NbDatepickerModule,\n  NbToggleModule,\n  NbPopoverModule,\n  NbUserModule,\n  NbFormFieldModule,\n  NbLayoutModule,\n  NbSidebarModule,\n  NbCheckboxModule,\n  NbTooltipModule\n} from '@nebular/theme';\n\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ThemeModule } from '../@theme/theme.module';\nimport { PagesComponent } from './pages.component';\nimport { PagesRoutingModule } from './pages-routing.module';\nimport { MiscellaneousModule } from './miscellaneous/miscellaneous.module';\nimport { InsumosComponent } from './insumos/insumos.component';\nimport { InsumosCategoriaComponent } from './insumos-categoria/insumos-categoria.component';\nimport { HomeComponent } from './home/home.component';\nimport { MenuElementosComponent } from './menu-elementos/menu-elementos.component';\nimport { MenuComponent } from './menu/menu.component';\nimport { EmpresaCartasComponent } from './empresa-cartas/empresa-cartas.component';\nimport { AlmacenComponent } from './almacen/almacen.component';\nimport { UsuariosComponent } from './usuarios/usuarios.component';\nimport { OrderModule } from 'ngx-order-pipe';\nimport { ConfiguracionComponent } from './configuracion/configuracion.component';\nimport { PedidosComponent } from './pedidos/pedidos.component';\nimport { PedidosHistorialComponent } from './pedidos-historial/pedidos-historial.component';\nimport { GestionarMarcasComponent } from './gestionar-marcas/gestionar-marcas.component';\nimport { GestionarCategoriasComponent } from './gestionar-categorias/gestionar-categorias.component';\nimport { GestionarProductosComponent } from './gestionar-productos/gestionar-productos.component';\nimport { GestionarSubCategoriasComponent } from './gestionar-sub-categorias/gestionar-sub-categorias.component';\nimport { GestionarVentasComponent } from './gestionar-ventas/gestionar-ventas.component';\nimport { GestionCambiosDevolucionesComponent } from './gestion-cambios-devoluciones/gestion-cambios-devoluciones.component';\nimport { ReportesVentaComponent } from './reportes-venta/reportes-venta.component';\nimport { GestionarVentasRestauranteComponent } from './gestionar-ventas-restaurante/gestionar-ventas-restaurante.component';\nimport { GestionarRestauranteMesasComponent } from './gestionar-restaurante-mesas/gestionar-restaurante-mesas.component';\nimport { GestionarMesasComponent } from './gestionar-mesas/gestionar-mesas.component';\nimport { ReportesEmpresaVentasComponent } from './reportes-empresa-ventas/reportes-empresa-ventas.component';\nimport { EstadisticasComponent } from './estadisticas/estadisticas.component';\n\n@NgModule({\n  imports: [\n    NbDialogModule.forChild (),\n    PagesRoutingModule,\n    ThemeModule,\n    NbMenuModule,\n    MiscellaneousModule,\n    NbButtonModule,\n    NbCardModule,\n    NbInputModule,\n    FormsModule,\n    ReactiveFormsModule,\n    NbIconModule,\n    NbSpinnerModule,\n    NbTooltipModule,\n    NbSelectModule,\n    ColorPickerModule,\n    NbBadgeModule,\n    NbListModule,\n    NbAccordionModule,\n    NbTreeGridModule,\n    NbAutocompleteModule,\n    NbDatepickerModule,\n    NbToggleModule,\n    OrderModule,\n    NbPopoverModule,\n    NbUserModule,\n    NbFormFieldModule,\n    NbLayoutModule,\n    NbSidebarModule,\n    NbCheckboxModule\n  ],\n  declarations: [\n    PagesComponent,\n    InsumosComponent,\n    InsumosCategoriaComponent,\n    HomeComponent,\n    MenuElementosComponent,\n    MenuComponent,\n    EmpresaCartasComponent,\n    AlmacenComponent,\n    UsuariosComponent,\n    ConfiguracionComponent,\n    PedidosComponent,\n    PedidosHistorialComponent,\n    GestionarMarcasComponent,\n    GestionarCategoriasComponent,\n    GestionarProductosComponent,\n    GestionarSubCategoriasComponent,\n    GestionarVentasComponent,\n    GestionCambiosDevolucionesComponent,\n    ReportesVentaComponent,\n    GestionarVentasRestauranteComponent,\n    GestionarRestauranteMesasComponent,\n    GestionarMesasComponent,\n    ReportesEmpresaVentasComponent,\n    EstadisticasComponent\n  ]\n})\nexport class PagesModule {\n}\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { NbDialogService } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-pedidos-historial',\n  templateUrl: './pedidos-historial.component.html',\n  styleUrls: ['./pedidos-historial.component.scss']\n})\nexport class PedidosHistorialComponent implements OnInit {\n  items: any [] = [];\n  empresas: any [] = [];\n  repartidores: any [] = [];\n  repartidor_seleccionado: any = null;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private noti: NotificationService\n  ) { }\n\n  ngOnInit(): void {\n    this.database.get_empresas ().subscribe ((res: any) => {\n      this.empresas = res;\n      console.log (res);\n    });\n\n    this.database.get_pedidos ().subscribe ((res: any [])=> {\n      this.items = res;\n    });\n\n    this.database.get_repartidores ().subscribe ((res: any [])=> {\n      this.repartidores = res;\n      console.log (res);\n    });\n  }\n\n  ver_pedido (dialog: any, item: any) {\n    console.log (item);\n    this.dialogService.open (dialog, { context: item });\n  }\n\n  cal_tiempo_entrega (item: any) {\n    let a = moment (item.hora_entrega);\n    let b = moment (item.fecha);\n    return a.diff (b, 'minute');\n  }\n\n  get_empresa (empresa_id: string) {\n    if (empresa_id === '') {\n      return '';\n    }\n\n    let returned: string = this.empresas.find (x => x.id === empresa_id).nombre;\n    if (returned === undefined) {\n      returned = '';\n    }\n\n    return returned;\n  }\n\n  get_platos (filter: number) {\n    return this.items.filter ((x: any) => {\n      return x.estado === filter;\n    });\n  }\n\n  get_format_date (fecha: string) {\n    return moment (fecha).format ('hh:mm a');\n  }\n\n  update_estado (estado: number, data: any, dialog: any) {\n    if (confirm ('¿Confimar operacion?')) {\n      if (estado === 2) {\n        if (data.tipo_pedido === 'delivery') {\n          if (this.repartidor_seleccionado !== null) {\n            const push_data: any = {\n              titulo: 'Pedido asignado',\n              detalle: 'Se le a asignado un nuevo pedido',\n              mode: 'tokens',\n              tokens: this.repartidor_seleccionado.token_id,\n              clave: data.id\n            };\n\n            this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n              .then (() => {\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n\n                this.noti.send_notification (push_data).subscribe (response => {\n                }, error => {\n                });\n              })\n              .catch ((error: any) => {\n                console.log (error);\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n              });\n          }\n        } else {\n          console.log (data);\n          const push_data: any = {\n            titulo: 'Pedido actualizado',\n            detalle: 'Ya puede venir a recoger su pedido',\n            mode: 'tokens',\n            tokens: data.usuario_token,\n            clave: data.id\n          };\n\n          this.database.update_estado_pedidos (estado, data.id)\n            .then (() => {\n              dialog.close ();\n              this.noti.send_notification (push_data).subscribe (response => {\n              }, error => {\n              });\n            })\n            .catch ((error: any) => {\n              dialog.close ();\n            });\n        }\n      } else {\n        this.database.update_estado_pedidos (estado, data.id)\n          .then (() => {\n            dialog.close ();\n          })\n          .catch ((error: any) => {\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  cancelar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.cancelar_pedido (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  entregar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.confirmar_recojo (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  get_format (fecha: string) {\n    return moment (fecha).format ('hh:mm:ss a');\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Detalles\n      &nbsp;\n      <span>Total: {{ data.monto_total | currency:'S/. ' }}</span>\n      &nbsp;\n      <span *ngIf=\"data.tipo_pago === 'culqi'\">Pagado</span>\n      <span *ngIf=\"data.tipo_pago !== 'culqi'\">Contraentrega</span>\n    </nb-card-header>\n\n    <nb-card-body style=\"width: 750px\">\n      <div class=\"row\" style=\"margin-bottom: 1rem;\">\n        <div class=\"col-3\">\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Direccion</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Referencia</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Telefono</p>\n          <p *ngIf=\"data.estado === 4\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Entrega\n          </p>\n          <p *ngIf=\"data.estado === 5\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Cancelado\n          </p>\n          <p *ngIf=\"data.estado === 6\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Rechazado\n          </p>\n        </div>\n        <div class=\"col-9\">\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.direccion }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.referencia }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.telefono }}</p>\n          <p *ngIf=\"data.estado === 4\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_entrega) }}\n          </p>\n\n          <p *ngIf=\"data.estado === 5\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_cancelada) }}\n          </p>\n\n          <p *ngIf=\"data.estado === 6\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_rechazada) }}\n          </p>\n        </div>\n      </div>\n\n      <div class=\"row\" style=\"margin-bottom: 1rem;\" *ngFor=\"let plato of data.platos\">\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'menu'\">Menus ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'extra'\">Extras ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'promocion'\">Promocion ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <ng-container *ngIf=\"plato.tipo === 'extra'\">\n          <div class=\"col-2\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\">{{ plato.comentarios }}</p>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'menu'\">\n          <ng-container *ngFor=\"let menu of plato.menus; index as i\">\n            <ng-container *ngIf=\"menu.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ menu.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ menu.nombre }}</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                  {{ plato.comentario }}\n                </p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '1'\">\n          <ng-container *ngFor=\"let plato_p of plato.platos ; index as i\">\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato_p.nombre }} ‧ {{ get_empresa (plato_p.empresa_id) }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '0'\">\n          <ng-container>\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <ng-container *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\">\n        <div class=\"form-group\">\n          <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n          <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n            <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n              {{ repartidor.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n      </ng-container>\n    </nb-card-body>\n\n    <nb-card-footer style=\"text-align: end;\">\n      <!-- <button nbButton status=\"danger\" (click)=\"cancelar_pedido (data, ref)\">\n        Cancelar pedido\n      </button>\n      &nbsp;&nbsp;\n\n      <button *ngIf=\"data.estado === 0\" nbButton status=\"success\" (click)=\"update_estado (1, data, ref)\">\n        Pasar a cocina\n      </button>\n\n      <button *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n        Plato Listo\n      </button>\n\n      <button *ngIf=\"data.estado === 1 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n        Plato Listo\n      </button>\n\n      <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n        Entregar pedido\n      </button>\n\n      &nbsp;&nbsp; -->\n      <button nbButton (click)=\"ref.close ()\">Cerrar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<div class=\"row\">\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Entregados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (4) | orderBy: 'hora_entrega'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" statfechaus=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"warning\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"warning\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p style=\"margin-bottom: 0px;\">{{ item.direccion }}</p>\n          <p *ngIf=\"item.tipo_pedido === 'delivery'\">Tiempo de delivery: {{ cal_tiempo_entrega (item) }} min.</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Cancelados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (5) | orderBy:'hora_cancelada'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Rechazados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (6) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { NbDialogService } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-pedidos',\n  templateUrl: './pedidos.component.html',\n  styleUrls: ['./pedidos.component.scss']\n})\nexport class PedidosComponent implements OnInit {\n  items: any [] = [];\n  empresas: any [] = [];\n  repartidores: any [] = [];\n  repartidor_seleccionado: any = null;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private noti: NotificationService\n  ) { }\n\n  ngOnInit(): void {\n    this.database.get_empresas ().subscribe ((res: any) => {\n      this.empresas = res;\n      console.log (res);\n    });\n\n    this.database.get_pedidos ().subscribe ((res: any [])=> {\n      this.items = res;\n    });\n\n    this.database.get_repartidores_libres ().subscribe ((res: any [])=> {\n      this.repartidores = res;\n      console.log (res);\n    });\n  }\n\n  ver_pedido (dialog: any, item: any) {\n    console.log (item);\n    this.dialogService.open (dialog, { context: item });\n  }\n\n  get_empresa (empresa_id: string) {\n    if (empresa_id === '') {\n      return '';\n    }\n\n    let returned: string = this.empresas.find (x => x.id === empresa_id).nombre;\n    if (returned === undefined) {\n      returned = '';\n    }\n\n    return returned;\n  }\n\n  get_platos (filter: number) {\n    return this.items.filter ((x: any) => {\n      return x.estado === filter;\n    });\n  }\n\n  get_format_date (fecha: string) {\n    return moment (fecha).format ('hh:mm a');\n  }\n\n  update_estado (estado: number, data: any, dialog: any) {\n    console.log (estado);\n    console.log (data);\n\n    if (confirm ('¿Confimar operacion?')) {\n      if (estado === 2) {\n        if (data.tipo_pedido === 'delivery') {\n          if (this.repartidor_seleccionado !== null) {\n            const push_data: any = {\n              titulo: 'Pedido asignado',\n              detalle: 'Se le a asignado un nuevo pedido',\n              mode: 'tokens',\n              tokens: this.repartidor_seleccionado.token_id,\n              clave: data.id\n            };\n\n            this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n              .then (() => {\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n\n                this.noti.send_notification (push_data).subscribe (response => {\n                }, error => {\n                });\n              })\n              .catch ((error: any) => {\n                console.log (error);\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n              });\n          }\n        } else {\n          console.log (data);\n          const push_data: any = {\n            titulo: 'Pedido actualizado',\n            detalle: 'Ya puede venir a recoger su pedido',\n            mode: 'tokens',\n            tokens: data.usuario_token,\n            clave: data.id\n          };\n\n          this.database.update_estado_pedidos (estado, data.id)\n            .then (() => {\n              dialog.close ();\n              this.noti.send_notification (push_data).subscribe (response => {\n              }, error => {\n              });\n            })\n            .catch ((error: any) => {\n              dialog.close ();\n            });\n        }\n      } else {\n        this.database.update_estado_pedidos (estado, data.id)\n          .then (() => {\n            dialog.close ();\n          })\n          .catch ((error: any) => {\n            console.log (error);\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  asignar_tienda_repartidor (data: any, dialog: any) {\n    if (confirm ('¿Confimar operacion?')) {\n      if (this.repartidor_seleccionado !== null) {\n        const push_data: any = {\n          titulo: 'Pedido asignado',\n          detalle: 'Se le a asignado un nuevo pedido',\n          mode: 'tokens',\n          tokens: this.repartidor_seleccionado.token_id,\n          clave: data.id\n        };\n\n        this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n          .then (() => {\n            this.repartidor_seleccionado = null;\n            dialog.close ();\n\n            this.noti.send_notification (push_data).subscribe (response => {\n            }, error => {\n            });\n          })\n          .catch ((error: any) => {\n            console.log (error);\n            this.repartidor_seleccionado = null;\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  cancelar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.cancelar_pedido (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  entregar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.confirmar_recojo (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Detalles\n      &nbsp;\n      <span>Total: {{ data.monto_total | currency:'S/. ' }}</span>\n      &nbsp;\n      <span *ngIf=\"data.tipo_pago === 'culqi'\">Pagado</span>\n      <span *ngIf=\"data.tipo_pago !== 'culqi'\">Contraentrega</span>\n    </nb-card-header>\n\n    <nb-card-body style=\"width: 750px\">\n      <div class=\"row\" style=\"margin-bottom: 1rem;\">\n        <div class=\"col-3\">\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Direccion</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Referencia</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Telefono</p>\n        </div>\n        <div class=\"col-9\">\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.direccion }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.referencia }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.telefono }}</p>\n        </div>\n      </div>\n\n      <div class=\"row\" style=\"margin-bottom: 1rem;\" *ngFor=\"let plato of data.platos\">\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'menu'\">Menus ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'extra'\">Extras ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'promocion'\">Promocion ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <ng-container *ngIf=\"plato.tipo === 'extra'\">\n          <div class=\"col-2\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\">{{ plato.comentarios }}</p>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'menu'\">\n          <ng-container *ngFor=\"let menu of plato.menus; index as i\">\n            <ng-container *ngIf=\"menu.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ menu.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ menu.nombre }}</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                  {{ plato.comentario }}\n                </p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n\n        <ng-container *ngIf=\"plato.tipo === 'tienda'\">\n          <ng-container *ngFor=\"let producto of plato.productos; index as i\">\n            <ng-container *ngIf=\"producto.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ producto.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-10\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ producto.nombre }}</p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '1'\">\n          <ng-container *ngFor=\"let plato_p of plato.platos ; index as i\">\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato_p.nombre }} ‧ {{ get_empresa (plato_p.empresa_id) }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '0'\">\n          <ng-container>\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"data.estado === 0 && data.tipo === 'tienda' && data.tipo_pedido === 'delivery'\">\n        <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n        <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n          <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n            {{ repartidor.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\">\n        <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n        <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n          <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n            {{ repartidor.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton status=\"danger\" (click)=\"cancelar_pedido (data, ref)\">\n        Cancelar pedido\n      </button>\n      &nbsp;&nbsp;\n\n      <ng-container *ngIf=\"data.tipo === 'restaurante'\">\n        <button *ngIf=\"data.estado === 0 && data.tipo === 'restaurante'\" nbButton status=\"success\" (click)=\"update_estado (1, data, ref)\">\n          Pasar a cocina\n        </button>\n\n        <button *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Plato Listo\n        </button>\n\n        <button *ngIf=\"data.estado === 1 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Plato Listo\n        </button>\n\n        <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n          Entregar pedido\n        </button>\n      </ng-container>\n\n      <ng-container *ngIf=\"data.tipo === 'tienda'\">\n        <button *ngIf=\"data.estado === 0 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"asignar_tienda_repartidor (data, ref)\">\n          Pedido listo\n        </button>\n\n        <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n          Entregar pedido\n        </button>\n\n        <button *ngIf=\"data.estado === 0 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Pedido listo\n        </button>\n      </ng-container>\n      &nbsp;&nbsp;\n      <button nbButton (click)=\"ref.close ()\">Cerrar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<div class=\"row\">\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Solicitados\n      </nb-card-header>\n      <div\n        *ngFor=\"let item of get_platos (0) | orderBy: 'fecha'\"\n        class=\"row\" class=\"horizontal\"\n        (click)=\"ver_pedido (dialog, item)\"\n        [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"warning\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"warning\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Preparando\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (1) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\" [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Listo para enviar / Recoger\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (2) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\" [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'ngx-reportes-empresa-ventas',\n  templateUrl: './reportes-empresa-ventas.component.html',\n  styleUrls: ['./reportes-empresa-ventas.component.scss']\n})\nexport class ReportesEmpresaVentasComponent implements OnInit {\n  usuario: any;\n\n  // Aux\n  ventas: any [] = [];\n  empresas: any [] = [];\n  instancias: any [] = [];\n  reporte_tipo: string = 'diario';\n  empresa_reporte: any = null;\n  instancia_seleccionada: any = null;\n\n  constructor (private database: DatabaseService, private auth: AuthService) { }\n\n  ngOnInit(): void {\n    this.auth.authState ().subscribe ((usuario: firebase.User) => {\n      if (usuario) {\n        this.database.get_usuario_by_id (usuario.uid).subscribe ((res: any) => {\n          if (res !== undefined) {\n            this.usuario = res;\n            this.get_data ();\n          }\n        });\n      } else {\n\n      }\n    });\n  }\n\n  get_data () {\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      console.log (res);\n      this.empresas = res;\n    });\n  }\n\n  get_total_ventas () {\n    return 0;\n  }\n\n  fecha_changed (event: Date) {\n    let day = this.padLeft (event.getDate ());\n    let month = this.padLeft (event.getMonth () + 1);\n    let year = event.getFullYear ()\n\n    const id: string = this.empresa_reporte.id + '-' + day + '-' + month + '-' + year;\n\n    this.database.get_instancias_por_restaurante_venta (id).subscribe ((res: any []) => {\n      console.log (res);\n      this.instancias = res;\n    });\n  }\n\n  padLeft (n: any) {\n    return (\"00\" + n).slice (-2);\n  }\n\n  async instancia_cambia (event: any) {\n    this.ventas = await this.database.get_restaurante_ventas_instancia (event.tmp_id);\n    console.log (this.ventas);\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        <h6>Ventas - {{ get_total_ventas () | currency:'S/. ' }}</h6>\n      </nb-card-header>\n\n      <nb-card-header>\n        <nb-select placeholder=\"Empresa\" [(selected)]=\"empresa_reporte\">\n          <nb-option *ngFor=\"let item of empresas\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <nb-select *ngIf=\"empresa_reporte !== null\" placeholder=\"Select Showcase\" [(selected)]=\"reporte_tipo\">\n          <nb-option value=\"diario\">Reporte diario</nb-option>\n          <nb-option value=\"mensual\">Reporte mensual</nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <ng-container *ngIf=\"reporte_tipo === 'diario' && empresa_reporte !== null\">\n          <input nbInput placeholder=\"Seleccione una fecha\" [nbDatepicker]=\"dateTimePicker\">\n          <nb-datepicker (dateChange)=\"fecha_changed ($event)\" #dateTimePicker></nb-datepicker>\n        </ng-container>\n        &nbsp;\n        &nbsp;\n        <nb-select *ngIf=\"instancias.length > 0\" placeholder=\"Seleccione una instancia\" [(selected)]=\"instancia_seleccionada\" (selectedChange)=\"instancia_cambia ($event)\">\n          <nb-option *ngFor=\"let instancia of instancias\" [value]=\"instancia\">\n            {{ instancia.hora_apertura }} - <span *ngIf=\"instancia.hora_cierre === undefined\"> ? </span><span *ngIf=\"instancia.hora_cierre !== undefined\">{{ instancia.hora_cierre }}</span>\n          </nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">N°</th>\n            <th scope=\"col\">Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let venta of ventas; let i = index\">\n            <th scope=\"row\">{{ i +1 }}</th>\n            <th>{{ venta.hora }}</th>\n            <th>\n              <ul *ngFor=\"let plato of venta.platos\">\n                <li *ngIf=\"plato.tipo === 'plato'\">\n                  {{ plato.nombre }}\n                </li>\n              </ul>\n            </th>\n            <th>{{ venta.monto_total | currency:'S/. ' }}</th>\n          </tr>\n        </tbody>\n      </table>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-reportes-venta',\n  templateUrl: './reportes-venta.component.html',\n  styleUrls: ['./reportes-venta.component.scss']\n})\nexport class ReportesVentaComponent implements OnInit {\n  cajeros: any [] = [];\n  categorias: any [] = [];\n  cajero_seleccionado: any = '0';\n  caja_data: any;\n  reporte_tipo: string = 'productos';\n\n  lista: any [] = [];\n  _lista: any [] = [];\n  lista_respuesta: any [] = [];\n  mapa_respuesta: Map <string, any> = new Map <string, any []> ();\n\n  hora_inicio: any = '';\n  hora_fin: any = '';\n  constructor (private database: DatabaseService, private auth: AuthService) { }\n\n  ngOnInit (): void {\n    this.database.get_pos_data (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      this.caja_data = res;\n\n      this.database.get_ventas_total_subscribe (this.caja_data.id).subscribe ((res: any) => {\n        this.lista = res;\n        this._lista = res;\n        console.log (res);\n      });\n    });\n\n    this.database.get_cajeros_por_pos (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any []) => {\n      this.cajeros = res;\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any) => {\n      this.categorias = res;\n    });\n  }\n\n  async get_ventas_por_client_tmp () {\n    this.lista = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n  }\n\n  async get_ventas_total () {\n    // this.lista = await this.database.get_ventas_total (this.caja_data.id);\n    // console.log (this.lista);\n  }\n\n  async submit () {\n    this.lista = this._lista;\n    this.lista_respuesta = [];\n    this.mapa_respuesta.clear ();\n\n    if (this.reporte_tipo === 'productos') {\n      this.lista_respuesta = this.lista.filter ((item: any) => {\n        console.log (item);\n        console.log ('Valor: ', this.validar_cajero (item) || this.validar_fecha (item));\n        return this.validar_item (item);\n      });\n    } else if (this.reporte_tipo === 'categorias') {\n      console.log ('enbtro aqui', this.lista);\n      this.lista.forEach ((venta: any) => {\n        console.log (venta);\n\n        venta.productos.forEach ((producto: any) => {\n          if (this.mapa_respuesta.get (producto.categoria_id) === undefined) {\n            this.mapa_respuesta.set (producto.categoria_id, {\n              cantidad: producto.cantidad,\n              precio: producto.precio * producto.cantidad\n            });\n          } else {\n            let update = this.mapa_respuesta.get (producto.categoria_id);\n            update.cantidad += producto.cantidad;\n            update.precio += producto.precio * producto.cantidad;\n            this.mapa_respuesta.set (producto.categoria_id, update);\n          }\n        });\n      });\n\n      console.log (this.mapa_respuesta);\n    }\n  }\n\n  validar_item (item: any) {\n    let s_date = moment (item.fecha + ' ' + this.hora_inicio);\n    let f_date = moment (item.fecha + ' ' + this.hora_fin);\n    let tiempo_valid = s_date.isValid () && f_date.isValid () && this.hora_inicio !== '' && this.hora_fin !== '';\n\n    if (this.cajero_seleccionado !== '0' && tiempo_valid) {\n      return this.validar_cajero (item) && this.validar_fecha (item);\n    } else {\n      if (this.cajero_seleccionado !== '0' && tiempo_valid === false) {\n        return this.validar_cajero (item);\n      } else if (this.cajero_seleccionado !== '0' && tiempo_valid === true) {\n        return this.validar_fecha (item);\n      } else if (this.cajero_seleccionado === '0' && tiempo_valid === true) {\n        return this.validar_fecha (item);\n      } else {\n        return true;\n      }\n    }\n  }\n\n  validar_cajero (item: any) {\n    if (this.cajero_seleccionado === '0') {\n      return true;\n    }\n\n    return item.cajero_tmp_id === this.cajero_seleccionado;\n  }\n\n  validar_fecha (item: any) {\n    let s_date = moment (item.fecha + ' ' + this.hora_inicio);\n    let f_date = moment (item.fecha + ' ' + this.hora_fin);\n\n    if (s_date.isValid () && f_date.isValid ()) {\n      return moment (item.fecha + ' ' + item.hora).isBetween (s_date, f_date);\n    }\n\n    return true;\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      venta.productos.forEach ((producto: any) => {\n        total += producto.cantidad * producto.precio;\n      });\n    });\n\n    return this.get_total_format (total);\n  }\n\n  limpiar () {\n    this.lista = [];\n  }\n\n  get_nombre (key: string) {\n    return this.categorias.find ((x => x.id === key)).nombre;\n  }\n\n  get_total_map () {\n    let total: number = 0;\n\n    this.mapa_respuesta.forEach ((value: any, key: string) => {\n        total += value.cantidad * value.precio;\n    });\n\n    return total;\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        Reportes\n        &nbsp;\n        &nbsp;\n        <nb-select (selectedChange)=\"limpiar ()\" [(ngModel)]=\"reporte_tipo\" size=\"small\" placeholder=\"Seleccione una opcion\">\n          <nb-option value=\"productos\">Productos</nb-option>\n          <nb-option value=\"categorias\">Categorias</nb-option>\n          <!-- <nb-option value=\"subcategorias\">Subcategorias</nb-option>\n          <nb-option value=\"marcas\">Marcas</nb-option> -->\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <button nbButton size=\"small\" status=\"success\" (click)=\"submit ()\">Consultar</button>\n      </nb-card-header>\n\n      <nb-card-header *ngIf=\"reporte_tipo === 'productos'\">\n        Cajero:\n        &nbsp;\n        &nbsp;\n        <nb-select size=\"small\" [(ngModel)]=\"cajero_seleccionado\">\n          <nb-option value=\"0\">\n            Ninguno\n          </nb-option>\n\n          <nb-option [value]=\"caja_data?.cajero_actual?.tmp_id\">\n            Cajero actual - {{ caja_data?.cajero_actual?.nombre }}\n          </nb-option>\n\n          <nb-option *ngFor=\"let item of cajeros\" [value]=\"item.tmp_id\">\n            <span *ngIf=\"item.tmp_id !== caja_data?.cajero_actual?.tmp_id\">\n              {{ item.nombre }} - {{ item.hora_entrada }}\n            </span>\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        Hora inicio:\n        &nbsp;\n        &nbsp;\n        <input [(ngModel)]=\"hora_inicio\" nbInput  size=\"tiny\" type=\"time\">\n        &nbsp;\n        &nbsp;\n        Hora fin:\n        &nbsp;\n        &nbsp;\n        <input [(ngModel)]=\"hora_fin\" nbInput  size=\"tiny\" type=\"time\">\n        &nbsp;\n        &nbsp;\n      </nb-card-header>\n\n      <table *ngIf=\"reporte_tipo === 'productos'\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of lista_respuesta\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ venta.cajero_nombre }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"5\">Total:</td><td class=\"right\">{{ get_total_lista (lista_respuesta) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n\n      <table *ngIf=\"reporte_tipo === 'categorias'\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Nombre</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of mapa_respuesta | keyvalue\">\n            <td>\n              {{ get_nombre (item.key) }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.cantidad }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.precio | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"2\">Total:</td><td class=\"right\">{{ get_total_map () | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-usuarios',\n  templateUrl: './usuarios.component.html',\n  styleUrls: ['./usuarios.component.scss']\n})\nexport class UsuariosComponent implements OnInit {\n  usuarios: any [] = [];\n  empresas: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Dirección', 'Tipo de usuario', 'Correo', 'Habilitado', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      correo: new FormControl ('', [Validators.required]),\n      password: new FormControl ('', [Validators.required]),\n      direccion: new FormControl ('', [Validators.required]),\n      tipo: new FormControl ('', [Validators.required]),\n      habilitado: new FormControl (true, [Validators.required]),\n      empresa_id: new FormControl ('')\n    });\n\n    this.database.get_usuarios ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.empresas = res;\n      console.log (res);\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {};\n\n      data ['data'] = i;\n      data ['Nombre'] = i.nombre;\n      data ['Dirección'] = i.direccion;\n      let tipo_usuario: string = 'Admin';\n      if (i.tipo === 1) {\n        tipo_usuario = 'Repartidor'\n      } else if (i.tipo === -1) {\n        tipo_usuario = 'Cajero';\n      } else if (i.tipo === -2) {\n        tipo_usuario = 'POS';\n      }\n      data ['Tipo de usuario'] = tipo_usuario;\n      data ['Correo'] = i.correo;\n\n      let habilitado: string = 'No';\n      if (i.habilitado) {\n        habilitado = 'Si';\n      }\n      data ['Habilitado'] = habilitado;\n      data ['Acciones'] = 'accion';\n\n      returned.push ({\n        data: data\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  change (event: any) {\n    console.log (event);\n    if (event === -3) {\n      this.form.controls ['empresa_id'].setValidators ([Validators.required]);\n    } else {\n      this.form.controls ['empresa_id'].setValidators ([]);\n    }\n\n    this.form.controls ['empresa_id'].updateValueAndValidity ();\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n    data.habilitado = true;\n    data.tipo = Number (this.form.value.tipo);\n\n    console.log (data);\n\n    if (editar) {\n      this.database.update_usuario (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_usuario (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.form.controls ['correo'].disable ();\n    this.form.controls ['password'].disable ();\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_usuario (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  update_usuario (item: any) {\n    item.habilitado = !item.habilitado;\n    this.loading = true;\n\n    this.database.update_usuario (item)\n        .then (() => {\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          this.loading = false;\n        });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"direccion\" class=\"label\">Direccion:</label>\n              <input type=\"text\" formControlName=\"direccion\" id=\"direccion\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"tipo\" class=\"label\">Tipo de usuario:</label>\n              <nb-select formControlName=\"tipo\" id=\"tipo\" fullWidth (selectedChange)=\"change ($event)\">\n                <nb-option value=0>Administrador</nb-option>\n                <nb-option value=1>Repartidor</nb-option>\n                <nb-option value=-1>Cajero</nb-option>\n                <nb-option value=-3>Cajero Restaurante</nb-option>\n                <nb-option value=-2>POS (Punto de venta)</nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div *ngIf=\"form.value.tipo === '-3'\" class=\"form-group\">\n          <label for=\"tipo\" class=\"label\">Empresa:</label>\n          <nb-select formControlName=\"empresa_id\" id=\"tipo\" fullWidth>\n            <nb-option *ngFor=\"let item of empresas\" [value]=item.id>\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Correo:</label>\n              <input type=\"email\" formControlName=\"correo\" id=\"correo\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"password\" class=\"label\">Contraseña:</label>\n              <input type=\"password\" formControlName=\"password\" id=\"password\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"form.invalid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Usuarios</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar usuario...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <container-element [ngSwitch]=\"column\">\n                <some-element *ngSwitchCase=\"'Habilitado'\">\n                  <button nbButton fullWidth size=\"small\" ghost (click)=\"update_usuario (row.data.data)\">\n                    {{ row.data [column] }}\n                    <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                  </button>\n                </some-element>\n                <some-element *ngSwitchCase=\"'Acciones'\">\n                  <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                    <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                  </button>\n                </some-element>\n                <some-element *ngSwitchDefault>\n                  {{ row.data [column] }}\n                </some-element>\n              </container-element>\n              <!-- <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n              <span *ngIf=\"column !== 'Precio'\"></span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n\n              </div> -->\n            </td>\n          </ng-container>\n        </table>\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Injectable } from '@angular/core';\nimport { DatabaseService } from '../services/database.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StockService {\n  // Stock\n  empresas_insumos = new Map <string, number> ();\n  menus_dia = new Map <string, number> ();\n\n  // Tmp\n  carrito_insumos_tmp: Map <string, number> = new Map <string, number> ();\n  carrito_menus_tmp: Map <string, number> = new Map <string, number> ();\n  cantidad_elementos_menu_tmp: any [] = [];\n  elementos_menu: any [] = [];\n\n  constructor (private database: DatabaseService) { }\n\n  init_stock (empresa_id: string) {\n    this.database.get_empresa_insumos_ventas (empresa_id).subscribe ((res: any []) => {\n      res.forEach ((i: any) => {\n        this.empresas_insumos.set (i.empresa_id + '-' + i.insumo_id, i.stock);\n      });\n\n      console.log (this.empresas_insumos);\n    });\n\n    this.database.get_menus_dia_stock ().subscribe ((res: any []) => {\n      res.forEach ((i: any) => {\n        this.menus_dia.set (i.carta_id + '-' + i.menu_id, i.stock);\n      });\n\n      console.log ('menus_dia', this.menus_dia);\n    });\n\n    this.database.get_menus_elementos ().subscribe ((res: any []) => {\n      this.elementos_menu = res;\n      res.forEach ((i: any) => {\n        this.cantidad_elementos_menu_tmp [i.id] = 0;\n      });\n    });\n  }\n\n  get_cantidad_elementos_menu_tmp () {\n    let cantidad_elementos_menu_tmp: any [] = [];\n\n    this.elementos_menu.forEach ((i: any) => {\n      cantidad_elementos_menu_tmp [i.id] = 0;\n    });\n\n    return cantidad_elementos_menu_tmp;\n  }\n\n  check_valid (plato: any, insumos: any [], cantidad: number) {\n    let valid = true;\n\n    insumos.forEach ((i: any) => {\n      console.log (i);\n\n      let pedidos = 0;\n      let pedidos_acuales = cantidad * i.cantidad;\n      let stock = this.check_elemento (plato.empresa_id + '-' + i.insumo_id);\n\n      if (this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id) !== undefined) {\n        pedidos = this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id);\n      }\n\n      if (stock === undefined || stock < pedidos_acuales + pedidos) {\n        valid = false;\n      }\n    });\n\n    if (valid) {\n      insumos.forEach ((i: any) => {\n        if (this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id) === undefined) {\n          this.carrito_insumos_tmp.set (plato.empresa_id + '-' + i.insumo_id, i.cantidad * cantidad);\n        } else {\n          let c = this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id);\n          this.carrito_insumos_tmp.set (plato.empresa_id + '-' + i.insumo_id, (c + i.cantidad * cantidad));\n        }\n      });\n    }\n\n    return valid;\n  }\n\n  check_elemento_menu (id: string) {\n    return this.menus_dia.get (id);\n  }\n\n  check_menu (menu_dia: any, cantidad: number) {\n    let valid = true;\n\n    // let pedidos = 0;\n    let pedidos_acuales = cantidad;\n    let stock = this.check_elemento_menu (menu_dia.carta_id + '-' + menu_dia.menu_id);\n\n    // if (this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id) !== undefined) {\n    //   pedidos = this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id);\n    // }\n\n    if (stock === undefined || stock < pedidos_acuales) {\n      valid = false;\n    }\n\n    if (valid) {\n      this.cantidad_elementos_menu_tmp [menu_dia.elemento_menu_id] = this.cantidad_elementos_menu_tmp [menu_dia.elemento_menu_id] + 1;\n      // if (this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id) === undefined) {\n      //   this.carrito_menus_tmp.set (menu_dia.carta_id + '-' + menu_dia.id, cantidad);\n      // } else {\n      //   this.carrito_menus_tmp.set (menu_dia.carta_id + '-' + menu_dia.id, cantidad);\n      // }\n    }\n\n    console.log (this.cantidad_elementos_menu_tmp);\n    console.log (this.carrito_menus_tmp);\n\n    return valid;\n  }\n\n  remove_menu (menu: any) {\n    this.cantidad_elementos_menu_tmp [menu.elemento_menu_id] -= menu.cantidad;\n    let c = this.carrito_menus_tmp.get (menu.carta_id + '-' + menu.id);\n    this.carrito_menus_tmp.set (menu.carta_id + '-' + menu.id, c - menu.cantidad);\n  }\n\n  calcular_menus_completos () {\n    let mayor = 0;\n    for  (let key in this.cantidad_elementos_menu_tmp) {\n      if (this.cantidad_elementos_menu_tmp [key] > mayor) {\n        mayor = this.cantidad_elementos_menu_tmp [key];\n      }\n    }\n\n    let menus_completos: number = mayor;\n    for (let index = mayor; index > 0; index--) {\n      let completo: boolean = true;\n      for (let key in this.cantidad_elementos_menu_tmp) {\n        if (this.cantidad_elementos_menu_tmp [key] < index) {\n          completo = false;\n          menus_completos--;\n          break;\n        }\n      }\n    }\n\n    return menus_completos;\n  }\n\n  calcular_cantidad_elementos_menu_tmp_precio () {\n    let precio = 0;\n\n    this.elementos_menu.forEach ((i: any) => {\n      precio += (this.cantidad_elementos_menu_tmp [i.id] - this.calcular_menus_completos ()) * i.precio;\n    });\n\n    return precio;\n  }\n\n  check_elemento (id: string) {\n    return this.empresas_insumos.get (id);\n  }\n\n  clean_cache () {\n    this.carrito_insumos_tmp.clear ();\n    this.carrito_menus_tmp.clear ();\n    this.elementos_menu.forEach ((i: any) => {\n      this.cantidad_elementos_menu_tmp [i.id] = 0;\n    });\n  }\n\n  get_menu_elemento_precio (id: string) {\n    let returned = 0;\n\n    this.elementos_menu.forEach ((i: any) => {\n      if (i.id === id) {\n        returned = i.precio;\n      }\n    });\n\n    return returned;\n  }\n\n  verificar_agregar_carrito_promocion (empresa_id: string, insumos: any [], cantidad: number) {\n    let valid = true;\n\n    insumos.forEach ((i: any) => {\n      let pedidos = 0;\n      let pedidos_acuales = cantidad * i.cantidad;\n      let stock = this.check_elemento (empresa_id + '-' + i.insumo_id);\n\n      if (this.carrito_insumos_tmp.get (empresa_id + '-' + i.insumo_id) !== undefined) {\n        pedidos = this.carrito_insumos_tmp.get (empresa_id + '-' + i.insumo_id);\n      }\n\n      if (stock === undefined || stock < pedidos_acuales + pedidos) {\n        valid = false;\n      }\n    });\n\n    if (valid) {\n      insumos.forEach ((i: any) => {\n        if (this.carrito_insumos_tmp.get (i.empresa_id + '-' + i.insumo_id) === undefined) {\n          this.carrito_insumos_tmp.set (i.empresa_id + '-' + i.insumo_id, i.cantidad * cantidad);\n        } else {\n          let c = this.carrito_insumos_tmp.get (i.empresa_id + '-' + i.insumo_id);\n          this.carrito_insumos_tmp.set (i.empresa_id + '-' + i.insumo_id, c + (i.cantidad * cantidad));\n        }\n      });\n    }\n    // if (!valid) {\n    //   this.presentToast ('El pedido excede a nuestro stock', 'danger');\n    // }\n\n    return valid;\n  }\n}\n"]}