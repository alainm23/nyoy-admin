{"version":3,"sources":["./node_modules/@angular/fire/__ivy_ngcc__/fesm2015/angular-fire-storage.js","./node_modules/@firebase/storage/dist/index.esm.js","./node_modules/algoliasearch/dist/algoliasearch.umd.js","./node_modules/firebase/storage/dist/index.esm.js","./src/app/pages/almacen/almacen.component.ts","./src/app/pages/almacen/almacen.component.html","./src/app/pages/configuracion/configuracion.component.ts","./src/app/pages/configuracion/configuracion.component.html","./src/app/pages/empresa-cartas/empresa-cartas.component.ts","./src/app/pages/empresa-cartas/empresa-cartas.component.html","./src/app/pages/estadisticas/estadisticas.component.ts","./src/app/pages/estadisticas/estadisticas.component.html","./src/app/pages/gestion-cambios-devoluciones/gestion-cambios-devoluciones.component.ts","./src/app/pages/gestion-cambios-devoluciones/gestion-cambios-devoluciones.component.html","./src/app/pages/gestionar-categorias/gestionar-categorias.component.ts","./src/app/pages/gestionar-categorias/gestionar-categorias.component.html","./src/app/pages/gestionar-marcas/gestionar-marcas.component.ts","./src/app/pages/gestionar-marcas/gestionar-marcas.component.html","./src/app/pages/gestionar-mesas/gestionar-mesas.component.ts","./src/app/pages/gestionar-mesas/gestionar-mesas.component.html","./src/app/pages/gestionar-productos/gestionar-productos.component.ts","./src/app/pages/gestionar-productos/gestionar-productos.component.html","./src/app/pages/gestionar-restaurante-mesas/gestionar-restaurante-mesas.component.ts","./src/app/pages/gestionar-restaurante-mesas/gestionar-restaurante-mesas.component.html","./src/app/pages/gestionar-sub-categorias/gestionar-sub-categorias.component.ts","./src/app/pages/gestionar-sub-categorias/gestionar-sub-categorias.component.html","./src/app/pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component.ts","./src/app/pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component.html","./src/app/pages/gestionar-ventas/gestionar-ventas.component.ts","./src/app/pages/gestionar-ventas/gestionar-ventas.component.html","./src/app/pages/home/home.component.ts","./src/app/pages/home/home.component.html","./src/app/pages/insumos-categoria/insumos-categoria.component.ts","./src/app/pages/insumos-categoria/insumos-categoria.component.html","./src/app/pages/insumos/insumos.component.ts","./src/app/pages/insumos/insumos.component.html","./src/app/pages/menu-elementos/menu-elementos.component.ts","./src/app/pages/menu-elementos/menu-elementos.component.html","./src/app/pages/menu/menu.component.ts","./src/app/pages/menu/menu.component.html","./src/app/pages/miscellaneous/miscellaneous-routing.module.ts","./src/app/pages/miscellaneous/miscellaneous.component.ts","./src/app/pages/miscellaneous/miscellaneous.module.ts","./src/app/pages/miscellaneous/not-found/not-found.component.ts","./src/app/pages/miscellaneous/not-found/not-found.component.html","./src/app/pages/pages-routing.module.ts","./src/app/pages/pages.component.ts","./src/app/pages/pages.module.ts","./src/app/pages/pedidos-historial/pedidos-historial.component.ts","./src/app/pages/pedidos-historial/pedidos-historial.component.html","./src/app/pages/pedidos/pedidos.component.ts","./src/app/pages/pedidos/pedidos.component.html","./src/app/pages/reportes-empresa-ventas/reportes-empresa-ventas.component.ts","./src/app/pages/reportes-empresa-ventas/reportes-empresa-ventas.component.html","./src/app/pages/reportes-venta/reportes-venta.component.ts","./src/app/pages/reportes-venta/reportes-venta.component.html","./src/app/pages/usuarios/usuarios.component.ts","./src/app/pages/usuarios/usuarios.component.html","./src/app/services/stock.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4C;AACe;AAC+E;AACO;AACvH;;AAE1B;AACA;AACA,cAAc,uFAAuF;AACrG;AACA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACwC;AACxC;AACA,eAAe,+CAAU;AACzB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA,mBAAmB,EAAE;AACrB;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,cAAc,uFAAuF;AACrG;AACA;AACA;AACA;AACA,kCAAkC;AAClC,WAAW,EAkCV;AACD;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,0BAA0B,0DAAG;AAC7B,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,uFAAuF;AACrG;AACA;AACA;AACA;AACA,wCAAwC;AACxC,WAAW,EAwCV;AACD;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,+CAAE,iBAAiB,gEAAS,6BAA6B,gEAAS;AAChF,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,+CAAE,QAAQ,gEAAS,6BAA6B,gEAAS;AACvE,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,iDAAI;AAClB;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,mCAAmC;AACnC;AACA,aAAa,2DAA2D;AACxE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,6BAA6B,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,gBAAgB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,UAAU;AACtB;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,4CAA4C,uCAAuC,EAAE;AACrF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8CAA8C,EAAE;AAChD;AACA;AACA;AACA;AACA,kCAAkC,mDAAmD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,oBAAoB,EAAE;AACvF;AACA;AACA,eAAe,uDAAS;AACxB;AACA;AACA,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,6BAA6B,EAAE,eAAe,6BAA6B,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,iBAAiB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,eAAe,aAAa,EAAE;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,4DAAc;AACtE;AACA;AACA;AACA;AACA,wDAAwD,4DAAc;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oDAAQ,mBAAmB,oDAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6DAAS;AACrD;AACA;AACA;AACA;AACA,gBAAgB,oDAAQ;;AAEG;AAC3B;;;;;;;;;;;;ACz/GA;AACA,eAAe,KAAoD,oBAAoB,SAA6E,CAAC,kBAAkB,aAAa,kBAAkB,yCAAyC,kDAAkD,WAAW,gBAAgB,qBAAqB,iCAAiC,sCAAsC,4BAA4B,uDAAuD,sBAAsB,SAAS,cAAc,YAAY,mBAAmB,KAAK,yCAAyC,yCAAyC,YAAY,qIAAqI,gEAAgE,GAAG,SAAS,gBAAgB,oBAAoB,wBAAwB,oBAAoB,YAAY,kBAAkB,QAAQ,WAAW,wCAAwC,SAAS,MAAM,iCAAiC,sCAAsC,QAAQ,WAAW,yFAAyF,SAAS,gBAAgB,mBAAmB,6BAA6B,mBAAmB,oGAAoG,4BAA4B,IAAI,iCAAiC,2DAA2D,OAAO,SAAS,SAAS,QAAQ,IAAI,8BAA8B,QAAQ,cAAc,SAAS,kBAAkB,4EAA4E,GAAG,cAAc,mBAAmB,qBAAqB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","file":"pages-pages-module-es2015.js","sourcesContent":["import { Observable, of, from } from 'rxjs';\nimport { map, observeOn, switchMap } from 'rxjs/operators';\nimport { InjectionToken, Injectable, Inject, Optional, PLATFORM_ID, NgZone, ɵɵdefineInjectable, ɵɵinject, NgModule } from '@angular/core';\nimport { ɵAngularFireSchedulers, ɵkeepUnstableUntilFirstFactory, ɵfirebaseAppFactory, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire';\nimport 'firebase/storage';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @param {?} task\n * @return {?}\n */\nimport * as ɵngcc0 from '@angular/core';\nfunction fromTask(task) {\n    return new Observable((/**\n     * @param {?} subscriber\n     * @return {?}\n     */\n    subscriber => {\n        /** @type {?} */\n        const progress = (/**\n         * @param {?} snap\n         * @return {?}\n         */\n        (snap) => subscriber.next(snap));\n        /** @type {?} */\n        const error = (/**\n         * @param {?} e\n         * @return {?}\n         */\n        e => subscriber.error(e));\n        /** @type {?} */\n        const complete = (/**\n         * @return {?}\n         */\n        () => subscriber.complete());\n        task.on('state_changed', progress, error, complete);\n        return (/**\n         * @return {?}\n         */\n        () => task.cancel());\n    }));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n */\nfunction AngularFireUploadTask() { }\nif (false) {\n    /** @type {?} */\n    AngularFireUploadTask.prototype.task;\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.snapshotChanges = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.percentageChanges = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.pause = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.cancel = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.resume = function () { };\n    /**\n     * @param {?=} onFulfilled\n     * @param {?=} onRejected\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.then = function (onFulfilled, onRejected) { };\n    /**\n     * @param {?} onRejected\n     * @return {?}\n     */\n    AngularFireUploadTask.prototype.catch = function (onRejected) { };\n}\n/**\n * Create an AngularFireUploadTask from a regular UploadTask from the Storage SDK.\n * This method creates an observable of the upload and returns on object that provides\n * multiple methods for controlling and monitoring the file upload.\n * @param {?} task\n * @return {?}\n */\nfunction createUploadTask(task) {\n    /** @type {?} */\n    const inner$ = fromTask(task);\n    return {\n        task: task,\n        then: task.then.bind(task),\n        catch: task.catch.bind(task),\n        pause: task.pause.bind(task),\n        cancel: task.cancel.bind(task),\n        resume: task.resume.bind(task),\n        snapshotChanges: (/**\n         * @return {?}\n         */\n        () => inner$),\n        percentageChanges: (/**\n         * @return {?}\n         */\n        () => inner$.pipe(map((/**\n         * @param {?} s\n         * @return {?}\n         */\n        s => s.bytesTransferred / s.totalBytes * 100))))\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n */\nfunction AngularFireStorageReference() { }\nif (false) {\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.getDownloadURL = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.getMetadata = function () { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.delete = function () { };\n    /**\n     * @param {?} path\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.child = function (path) { };\n    /**\n     * @param {?} meta\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.updateMetadata = function (meta) { };\n    /**\n     * @param {?} data\n     * @param {?=} metadata\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.put = function (data, metadata) { };\n    /**\n     * @param {?} data\n     * @param {?=} format\n     * @param {?=} metadata\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.putString = function (data, format, metadata) { };\n    /**\n     * @return {?}\n     */\n    AngularFireStorageReference.prototype.listAll = function () { };\n}\n/**\n * Create an AngularFire wrapped Storage Reference. This object\n * creates observable methods from promise based methods.\n * @param {?} ref\n * @param {?} schedulers\n * @param {?} keepUnstableUntilFirst\n * @return {?}\n */\nfunction createStorageRef(ref, schedulers, keepUnstableUntilFirst) {\n    return {\n        getDownloadURL: (/**\n         * @return {?}\n         */\n        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**\n         * @return {?}\n         */\n        () => ref.getDownloadURL())), keepUnstableUntilFirst)),\n        getMetadata: (/**\n         * @return {?}\n         */\n        () => of().pipe(observeOn(schedulers.outsideAngular), switchMap((/**\n         * @return {?}\n         */\n        () => ref.getMetadata())), keepUnstableUntilFirst)),\n        delete: (/**\n         * @return {?}\n         */\n        () => from(ref.delete())),\n        child: (/**\n         * @param {?} path\n         * @return {?}\n         */\n        (path) => createStorageRef(ref.child(path), schedulers, keepUnstableUntilFirst)),\n        updateMetadata: (/**\n         * @param {?} meta\n         * @return {?}\n         */\n        (meta) => from(ref.updateMetadata(meta))),\n        put: (/**\n         * @param {?} data\n         * @param {?=} metadata\n         * @return {?}\n         */\n        (data, metadata) => {\n            /** @type {?} */\n            const task = ref.put(data, metadata);\n            return createUploadTask(task);\n        }),\n        putString: (/**\n         * @param {?} data\n         * @param {?=} format\n         * @param {?=} metadata\n         * @return {?}\n         */\n        (data, format, metadata) => {\n            /** @type {?} */\n            const task = ref.putString(data, format, metadata);\n            return createUploadTask(task);\n        }),\n        listAll: (/**\n         * @return {?}\n         */\n        () => from(ref.listAll()))\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nconst BUCKET = new InjectionToken('angularfire2.storageBucket');\n/**\n * AngularFireStorage Service\n *\n * This service is the main entry point for this feature module. It provides\n * an API for uploading and downloading binary files from Cloud Storage for\n * Firebase.\n */\nclass AngularFireStorage {\n    /**\n     * @param {?} options\n     * @param {?} nameOrConfig\n     * @param {?} storageBucket\n     * @param {?} platformId\n     * @param {?} zone\n     */\n    constructor(options, nameOrConfig, storageBucket, platformId, zone) {\n        this.schedulers = new ɵAngularFireSchedulers(zone);\n        this.keepUnstableUntilFirst = ɵkeepUnstableUntilFirstFactory(this.schedulers, platformId);\n        this.storage = zone.runOutsideAngular((/**\n         * @return {?}\n         */\n        () => {\n            /** @type {?} */\n            const app = ɵfirebaseAppFactory(options, zone, nameOrConfig);\n            return app.storage(storageBucket || undefined);\n        }));\n    }\n    /**\n     * @param {?} path\n     * @return {?}\n     */\n    ref(path) {\n        return createStorageRef(this.storage.ref(path), this.schedulers, this.keepUnstableUntilFirst);\n    }\n    /**\n     * @param {?} path\n     * @param {?} data\n     * @param {?=} metadata\n     * @return {?}\n     */\n    upload(path, data, metadata) {\n        /** @type {?} */\n        const storageRef = this.storage.ref(path);\n        /** @type {?} */\n        const ref = createStorageRef(storageRef, this.schedulers, this.keepUnstableUntilFirst);\n        return ref.put(data, metadata);\n    }\n}\nAngularFireStorage.ɵfac = function AngularFireStorage_Factory(t) { return new (t || AngularFireStorage)(ɵngcc0.ɵɵinject(FIREBASE_OPTIONS), ɵngcc0.ɵɵinject(FIREBASE_APP_NAME, 8), ɵngcc0.ɵɵinject(BUCKET, 8), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(ɵngcc0.NgZone)); };\n/** @nocollapse */\nAngularFireStorage.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [FIREBASE_OPTIONS,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [FIREBASE_APP_NAME,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [BUCKET,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: NgZone }\n];\n/** @nocollapse */ AngularFireStorage.ɵprov = ɵɵdefineInjectable({ factory: function AngularFireStorage_Factory() { return new AngularFireStorage(ɵɵinject(FIREBASE_OPTIONS), ɵɵinject(FIREBASE_APP_NAME, 8), ɵɵinject(BUCKET, 8), ɵɵinject(PLATFORM_ID), ɵɵinject(NgZone)); }, token: AngularFireStorage, providedIn: \"any\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorage, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'any'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [FIREBASE_OPTIONS]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [FIREBASE_APP_NAME]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [BUCKET]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: ɵngcc0.NgZone }]; }, null); })();\nif (false) {\n    /** @type {?} */\n    AngularFireStorage.prototype.storage;\n    /** @type {?} */\n    AngularFireStorage.prototype.keepUnstableUntilFirst;\n    /** @type {?} */\n    AngularFireStorage.prototype.schedulers;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nclass AngularFireStorageModule {\n}\nAngularFireStorageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularFireStorageModule });\nAngularFireStorageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularFireStorageModule_Factory(t) { return new (t || AngularFireStorageModule)(); }, providers: [AngularFireStorage] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularFireStorageModule, [{\n        type: NgModule,\n        args: [{\n                providers: [AngularFireStorage]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { AngularFireStorage, AngularFireStorageModule, BUCKET, createStorageRef, createUploadTask, fromTask };\n\n//# sourceMappingURL=angular-fire-storage.js.map","import firebase from '@firebase/app';\nimport { __awaiter, __generator, __spreadArrays } from 'tslib';\nimport { Component } from '@firebase/component';\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n/**\r\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\r\n * enough for us to use it directly.\r\n */\r\nvar MIN_SAFE_INTEGER = -9007199254740991;\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            return this.message_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw 'Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].';\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isInteger(p) {\r\n    return isNumber(p) && Number.isInteger(p);\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(headers)) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (isDef(body)) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var firebaseStorageHost = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var firebaseStoragePath = '(/([^?#]*).*)?$';\r\n        var firebaseStorageRegExp = new RegExp(\"^https?://\" + firebaseStorageHost + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + firebaseStoragePath, 'i');\r\n        var firebaseStorageIndices = { bucket: 1, path: 3 };\r\n        var cloudStorageHost = '(?:storage.googleapis.com|storage.cloud.google.com)';\r\n        var cloudStoragePath = '([^?#]*)';\r\n        var cloudStorageRegExp = new RegExp(\"^https?://\" + cloudStorageHost + \"/\" + bucketDomain + \"/\" + cloudStoragePath, 'i');\r\n        var cloudStorageIndices = { bucket: 1, path: 2 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            {\r\n                regex: firebaseStorageRegExp,\r\n                indices: firebaseStorageIndices,\r\n                postModify: httpModify\r\n            },\r\n            {\r\n                regex: cloudStorageRegExp,\r\n                indices: cloudStorageIndices,\r\n                postModify: httpModify\r\n            }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            // @ts-ignore TODO: remove once typescript is upgraded to 3.5.x\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (isDef(size)) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, authWrapper) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return authWrapper.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(authWrapper, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, authWrapper);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(authWrapper, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(authWrapper, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        if (p.hasOwnProperty(key)) {\r\n            var val = p[key];\r\n            if (key === 'customMetadata') {\r\n                if (!isObject(val)) {\r\n                    throw 'Expected object for \\'customMetadata\\' mapping.';\r\n                }\r\n            }\r\n            else {\r\n                if (isNonNullObject(val)) {\r\n                    throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_RESULTS_KEY = 'maxResults';\r\nvar MAX_MAX_RESULTS = 1000;\r\nvar PAGE_TOKEN_KEY = 'pageToken';\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(authWrapper, bucket, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(authWrapper, bucket, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(authWrapper, bucket, resource);\r\n}\r\nfunction listOptionsValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected ListOptions object.';\r\n    }\r\n    for (var key in p) {\r\n        if (key === MAX_RESULTS_KEY) {\r\n            if (!isInteger(p[MAX_RESULTS_KEY]) ||\r\n                p[MAX_RESULTS_KEY] <= 0) {\r\n                throw 'Expected maxResults to be a positive number.';\r\n            }\r\n            if (p[MAX_RESULTS_KEY] > 1000) {\r\n                throw \"Expected maxResults to be less than or equal to \" + MAX_MAX_RESULTS + \".\";\r\n            }\r\n        }\r\n        else if (key === PAGE_TOKEN_KEY) {\r\n            if (p[PAGE_TOKEN_KEY] && !isString(p[PAGE_TOKEN_KEY])) {\r\n                throw 'Expected pageToken to be string.';\r\n            }\r\n        }\r\n        else {\r\n            throw 'Unknown option: ' + key;\r\n        }\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(authWrapper, bucket) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(authWrapper, bucket, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(authWrapper, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, listHandler(authWrapper, location.bucket), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(authWrapper, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(authWrapper, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str =\r\n                str +\r\n                    Math.random()\r\n                        .toString()\r\n                        .slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(authWrapper, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(error) ||\r\n            isDef(complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error || null;\r\n            this.complete = complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(validator, optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var chainedValidator;\r\n    if (validator) {\r\n        chainedValidator = and_(stringValidator, validator);\r\n    }\r\n    else {\r\n        chainedValidator = stringValidator;\r\n    }\r\n    return new ArgSpec(chainedValidator, optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(optional) {\r\n    return new ArgSpec(metadataValidator, optional);\r\n}\r\nfunction listOptionSpec(optional) {\r\n    return new ArgSpec(listOptionsValidator, optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(validator, optional) {\r\n    function isLooseObjectValidator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (validator !== undefined && validator !== null) {\r\n            validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(isLooseObjectValidator, optional);\r\n}\r\nfunction nullFunctionSpec(optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, optional);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.authWrapper_ = authWrapper;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded) { return _this.updateProgress_(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.authWrapper_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        function typeValidator() {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        var i = this.observers_.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers_.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = this.observers_.slice();\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(authWrapper, location) {\r\n        this.authWrapper = authWrapper;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (authWrapper, location) {\r\n        return new Reference(authWrapper, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.authWrapper, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.authWrapper.service();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value The string to upload.\r\n     * @param format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [stringSpec(), stringSpec(formatValidator, true), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, value);\r\n        var metadataClone = Object.assign({}, metadata);\r\n        if (!isDef(metadataClone['contentType']) &&\r\n            isDef(data.contentType)) {\r\n            metadataClone['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadataClone);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        var _this = this;\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(_this.authWrapper, _this.location);\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @return A Promise that resolves with all the items and prefixes under\r\n     *      the current storage reference. `prefixes` contains references to\r\n     *      sub-directories and `items` contains references to objects in this\r\n     *      folder. `nextPageToken` is never returned.\r\n     */\r\n    Reference.prototype.listAll = function () {\r\n        validate('listAll', [], arguments);\r\n        var accumulator = {\r\n            prefixes: [],\r\n            items: []\r\n        };\r\n        return this.listAllHelper(accumulator).then(function () { return accumulator; });\r\n    };\r\n    Reference.prototype.listAllHelper = function (accumulator, pageToken) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var opt, nextPage;\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        opt = {\r\n                            // maxResults is 1000 by default.\r\n                            pageToken: pageToken\r\n                        };\r\n                        return [4 /*yield*/, this.list(opt)];\r\n                    case 1:\r\n                        nextPage = _c.sent();\r\n                        (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                        (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                        if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.listAllHelper(accumulator, nextPage.nextPageToken)];\r\n                    case 2:\r\n                        _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure.\r\n     * Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options See ListOptions for details.\r\n     * @return A Promise that resolves with the items and prefixes.\r\n     *      `prefixes` contains references to sub-folders and `items`\r\n     *      contains references to objects in this folder. `nextPageToken`\r\n     *      can be used to get the rest of the results.\r\n     */\r\n    Reference.prototype.list = function (options) {\r\n        validate('list', [listOptionSpec(true)], arguments);\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var op = options || {};\r\n            var requestInfo = list(self.authWrapper, self.location, \r\n            /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        var _this = this;\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        var _this = this;\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(_this.authWrapper, _this.location, metadata, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        var _this = this;\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\n\nvar RequestMap = /** @class */ (function () {\r\n    function RequestMap() {\r\n        this.map = new Map();\r\n        this.id = MIN_SAFE_INTEGER;\r\n    }\r\n    /**\r\n     * Registers the given request with this map.\r\n     * The request is unregistered when it completes.\r\n     *\r\n     * @param request The request to register.\r\n     */\r\n    RequestMap.prototype.addRequest = function (request) {\r\n        var _this = this;\r\n        var id = this.id;\r\n        this.id++;\r\n        this.map.set(id, request);\r\n        request.getPromise().then(function () { return _this.map.delete(id); }, function () { return _this.map.delete(id); });\r\n    };\r\n    /**\r\n     * Cancels all registered requests.\r\n     */\r\n    RequestMap.prototype.clear = function () {\r\n        this.map.forEach(function (v) {\r\n            v && v.cancel(true);\r\n        });\r\n        this.map.clear();\r\n    };\r\n    return RequestMap;\r\n}());\n\n/**\r\n * @param app If null, getAuthToken always resolves with null.\r\n * @param service The storage service associated with this auth wrapper.\r\n *     Untyped to avoid circular type dependencies.\r\n * @struct\r\n */\r\nvar AuthWrapper = /** @class */ (function () {\r\n    function AuthWrapper(app, authProvider, maker, requestMaker, service, pool) {\r\n        var _a;\r\n        this.bucket_ = null;\r\n        this.appId_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        if (this.app_ !== null) {\r\n            var options = this.app_.options;\r\n            if (isDef(options)) {\r\n                this.bucket_ = AuthWrapper.extractBucket_(options);\r\n                this.appId_ = (_a = options.appId) !== null && _a !== void 0 ? _a : null;\r\n            }\r\n        }\r\n        this.authProvider_ = authProvider;\r\n        this.storageRefMaker_ = maker;\r\n        this.requestMaker_ = requestMaker;\r\n        this.pool_ = pool;\r\n        this.service_ = service;\r\n        this.maxOperationRetryTime_ = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this.maxUploadRetryTime_ = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this.requestMap_ = new RequestMap();\r\n    }\r\n    AuthWrapper.extractBucket_ = function (config) {\r\n        var bucketString = config[CONFIG_STORAGE_BUCKET_KEY] || null;\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        var loc = Location.makeFromBucketSpec(bucketString);\r\n        return loc.bucket;\r\n    };\r\n    AuthWrapper.prototype.getAuthToken = function () {\r\n        var auth = this.authProvider_.getImmediate({ optional: true });\r\n        if (auth) {\r\n            return auth.getToken().then(function (response) {\r\n                if (response !== null) {\r\n                    return response.accessToken;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }, function () { return null; });\r\n        }\r\n        else {\r\n            return Promise.resolve(null);\r\n        }\r\n    };\r\n    AuthWrapper.prototype.bucket = function () {\r\n        if (this.deleted_) {\r\n            throw appDeleted();\r\n        }\r\n        else {\r\n            return this.bucket_;\r\n        }\r\n    };\r\n    /**\r\n     * The service associated with this auth wrapper. Untyped to avoid circular\r\n     * type dependencies.\r\n     */\r\n    AuthWrapper.prototype.service = function () {\r\n        return this.service_;\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return Actually a firebaseStorage.Reference, typing not allowed\r\n     *     because of circular dependency problems.\r\n     */\r\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\r\n        return this.storageRefMaker_(this, loc);\r\n    };\r\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\r\n        if (!this.deleted_) {\r\n            var request = this.requestMaker_(requestInfo, this.appId_, authToken, this.pool_);\r\n            this.requestMap_.addRequest(request);\r\n            return request;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    AuthWrapper.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requestMap_.clear();\r\n    };\r\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\r\n        return this.maxUploadRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\r\n        return this.maxOperationRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    return AuthWrapper;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\nfunction addGmpidHeader_(headers, appId) {\r\n    if (appId) {\r\n        headers['X-Firebase-GMPID'] = appId;\r\n    }\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, appId, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addGmpidHeader_(headers, appId);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar Service = /** @class */ (function () {\r\n    function Service(app, authProvider, pool, url) {\r\n        this.bucket_ = null;\r\n        function maker(authWrapper, loc) {\r\n            return new Reference(authWrapper, loc);\r\n        }\r\n        this.authWrapper_ = new AuthWrapper(app, authProvider, maker, makeRequest, this, pool);\r\n        this.app_ = app;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            var authWrapperBucket = this.authWrapper_.bucket();\r\n            if (authWrapperBucket != null) {\r\n                this.bucket_ = new Location(authWrapperBucket, '');\r\n            }\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    Service.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (typeof path !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this.authWrapper_, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    Service.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (typeof p !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this.authWrapper_, url);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxUploadRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxUploadRetryTime(time);\r\n    };\r\n    Service.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxOperationRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Service;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.authWrapper_.deleteApp();\r\n        return Promise.resolve();\r\n    };\r\n    return ServiceInternals;\r\n}());\n\nvar name = \"@firebase/storage\";\nvar version = \"0.3.32\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(container, url) {\r\n    // Dependencies\r\n    var app = container.getProvider('app').getImmediate();\r\n    var authProvider = container.getProvider('auth-internal');\r\n    return new Service(app, authProvider, new XhrIoPool(), url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: Service,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerComponent(new Component(STORAGE_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterStorage(firebase);\n\nexport { registerStorage };\n//# sourceMappingURL=index.esm.js.map\n","/*! algoliasearch.umd.js | 4.6.0 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){e(r,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},o=function(){return JSON.parse(n().getItem(r)||\"{}\")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=o()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=a(e,2),n=t[0],o=t[1];return Promise.all([n,o||r.miss(n)])})).then((function(e){return a(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var a=o();return a[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(a)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=o();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=o(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return a(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,a).catch((function(){return i({caches:t}).get(e,n,a)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var u=n(),i=a&&a.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===m.WithinHeaders?n:{}},queryParameters:function(){return e===m.WithinQueryParameters?n:{}}}}function f(e){var t=0;return e((function r(){return t++,new Promise((function(n){setTimeout((function(){n(e(r))}),Math.min(100*t,1e3))}))}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(r){return d(e.then((function(e){return Promise.all([t(e,r),e])})).then((function(e){return e[1]})))}})}function l(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function p(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function h(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[a++])}))}var m={WithinQueryParameters:0,WithinHeaders:1};function y(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var g={Read:1,Write:2,Any:3},v=1,b=2,P=3;function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function j(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:g.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||g.Any}}var w=\"DELETE\",I=\"GET\",x=\"POST\",q=\"PUT\";function D(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(O(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===v||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===P&&Date.now()-e.lastUpdate<=12e4}(e)})),a=[].concat(o(r),o(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:a.length>0?a.map((function(e){return j(e)})):t}}))}function S(e,t,n,a){var u=[],i=function(e,t){if(e.method===I||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,a),s=function(e,t){var n=r(r({},e.headers),t.headers),a={};return Object.keys(n).forEach((function(e){var t=n[e];a[e.toLowerCase()]=t})),a}(e,a),c=n.method,f=n.method!==I?{}:r(r({},n.data),a.data),d=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),f),a.queryParameters),l=0,p=function t(r,o){var f=r.pop();if(void 0===f)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.\",transporterStackTrace:A(u)};var p={data:i,headers:s,method:c,url:N(f,n.path,d),connectTimeout:o(l,e.timeouts.connect),responseTimeout:o(l,a.timeout)},h=function(e){var t={request:p,response:e,host:f,triesLeft:r.length};return u.push(t),t},m={onSucess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var a=h(n);return n.isTimedOut&&l++,Promise.all([e.logger.info(\"Retryable failure\",E(a)),e.hostsCache.set(f,O(f,n.isTimedOut?P:b))]).then((function(){return t(r,o)}))},onFail:function(e){throw h(e),function(e,t){var r=e.content,n=e.status,a=r;try{a=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(a,n,t)}(e,A(u))}};return e.requester.send(p).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e)}(e,m)}))};return D(e.hostsCache,t).then((function(e){return p(o(e.statelessHosts).reverse(),e.getTimeout)}))}function k(e){var t=e.hostsCache,r=e.logger,n=e.requester,o=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,f=e.queryParameters,d={hostsCache:t,logger:r,requester:n,requestsCache:o,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:f,hosts:c.map((function(e){return j(e)})),read:function(e,t){var r=y(t,d.timeouts.read),n=function(){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&g.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var o={request:e,mappedRequestOptions:r,transporter:{queryParameters:d.queryParameters,headers:d.headers}};return d.responsesCache.get(o,(function(){return d.requestsCache.get(o,(function(){return d.requestsCache.set(o,n()).then((function(e){return Promise.all([d.requestsCache.delete(o),e])}),(function(e){return Promise.all([d.requestsCache.delete(o),Promise.reject(e)])})).then((function(e){var t=a(e,2);t[0];return t[1]}))}))}),{miss:function(e){return d.responsesCache.set(o,e)}})},write:function(e,t){return S(d,d.hosts.filter((function(e){return 0!=(e.accept&g.Write)})),e,y(t,d.timeouts.write))}};return d}function T(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function N(e,t,r){var n=R(r),a=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(a+=\"?\".concat(n)),a}function R(e){return Object.keys(e).map((function(t){return h(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return E(e)}))}function E(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var C=function(e){return function(t,r){return e.transporter.write({method:x,path:\"2/abtests\",data:t},r)}},U=function(e){return function(t,r){return e.transporter.write({method:w,path:h(\"2/abtests/%s\",t)},r)}},J=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"2/abtests/%s\",t)},r)}},z=function(e){return function(t){return e.transporter.read({method:I,path:\"2/abtests\"},t)}},F=function(e){return function(t,r){return e.transporter.write({method:x,path:h(\"2/abtests/%s/stop\",t)},r)}},H=function(e){return function(t){return e.transporter.read({method:I,path:\"1/strategies/personalization\"},t)}},M=function(e){return function(t,r){return e.transporter.write({method:x,path:\"1/strategies/personalization\",data:t},r)}};function K(e){return function t(r){return e.request(r).then((function(n){if(void 0!==e.batch&&e.batch(n.hits),!e.shouldStop(n))return n.cursor?t({cursor:n.cursor}):t({page:(r.page||0)+1})}))}({})}var W=function(e){return function(t,a){var o=a||{},u=o.queryParameters,i=n(o,[\"queryParameters\"]),s=r({acl:t},void 0!==u?{queryParameters:u}:{});return d(e.transporter.write({method:x,path:\"1/keys\",data:s},i),(function(t,r){return f((function(n){return Y(e)(t.key,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},B=function(e){return function(t,r,n){var a=y(n);return a.queryParameters[\"X-Algolia-User-ID\"]=t,e.transporter.write({method:x,path:\"1/clusters/mapping\",data:{cluster:r}},a)}},Q=function(e){return function(t,r,n){return e.transporter.write({method:x,path:\"1/clusters/mapping/batch\",data:{users:t,cluster:r}},n)}},G=function(e){return function(t,r,n){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:\"copy\",destination:r}},n),(function(r,n){return re(e)(t,{methods:{waitTask:et}}).waitTask(r.taskID,n)}))}},V=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Rules]}))}},L=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Settings]}))}},_=function(e){return function(t,n,a){return G(e)(t,n,r(r({},a),{},{scope:[rt.Synonyms]}))}},X=function(e){return function(t,r){return d(e.transporter.write({method:w,path:h(\"1/keys/%s\",t)},r),(function(r,n){return f((function(r){return Y(e)(t,n).then(r).catch((function(e){if(404!==e.status)throw e}))}))}))}},Y=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/keys/%s\",t)},r)}},Z=function(e){return function(t){return e.transporter.read({method:I,path:\"1/logs\"},t)}},$=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters/mapping/top\"},t)}},ee=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/clusters/mapping/%s\",t)},r)}},te=function(e){return function(t){var r=t||{},a=r.retrieveMappings,o=n(r,[\"retrieveMappings\"]);return!0===a&&(o.getClusters=!0),e.transporter.read({method:I,path:\"1/clusters/mapping/pending\"},o)}},re=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return p(n,r.methods)}},ne=function(e){return function(t){return e.transporter.read({method:I,path:\"1/keys\"},t)}},ae=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters\"},t)}},oe=function(e){return function(t){return e.transporter.read({method:I,path:\"1/indexes\"},t)}},ue=function(e){return function(t){return e.transporter.read({method:I,path:\"1/clusters/mapping\"},t)}},ie=function(e){return function(t,r,n){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:\"move\",destination:r}},n),(function(r,n){return re(e)(t,{methods:{waitTask:et}}).waitTask(r.taskID,n)}))}},se=function(e){return function(t,r){return d(e.transporter.write({method:x,path:\"1/indexes/*/batch\",data:{requests:t}},r),(function(t,r){return Promise.all(Object.keys(t.taskID).map((function(n){return re(e)(n,{methods:{waitTask:et}}).waitTask(t.taskID[n],r)})))}))}},ce=function(e){return function(t,r){return e.transporter.read({method:x,path:\"1/indexes/*/objects\",data:{requests:t}},r)}},fe=function(e){return function(t,n){var a=t.map((function(e){return r(r({},e),{},{params:R(e.params||{})})}));return e.transporter.read({method:x,path:\"1/indexes/*/queries\",data:{requests:a},cacheable:!0},n)}},de=function(e){return function(t,a){return Promise.all(t.map((function(t){var o=t.params,u=o.facetName,i=o.facetQuery,s=n(o,[\"facetName\",\"facetQuery\"]);return re(e)(t.indexName,{methods:{searchForFacetValues:Xe}}).searchForFacetValues(u,i,r(r({},a),s))})))}},le=function(e){return function(t,r){var n=y(r);return n.queryParameters[\"X-Algolia-User-ID\"]=t,e.transporter.write({method:w,path:\"1/clusters/mapping\"},n)}},pe=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/keys/%s/restore\",t)},r),(function(r,n){return f((function(r){return Y(e)(t,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},he=function(e){return function(t,r){return e.transporter.read({method:x,path:\"1/clusters/mapping/search\",data:{query:t}},r)}},me=function(e){return function(t,r){var a=Object.assign({},r),o=r||{},u=o.queryParameters,i=n(o,[\"queryParameters\"]),s=u?{queryParameters:u}:{},c=[\"acl\",\"indexes\",\"referers\",\"restrictSources\",\"queryParameters\",\"description\",\"maxQueriesPerIPPerHour\",\"maxHitsPerQuery\"];return d(e.transporter.write({method:q,path:h(\"1/keys/%s\",t),data:s},i),(function(r,n){return f((function(r){return Y(e)(t,n).then((function(e){return function(e){return Object.keys(a).filter((function(e){return-1!==c.indexOf(e)})).every((function(t){return e[t]===a[t]}))}(e)?Promise.resolve():r()}))}))}))}},ye=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/batch\",e.indexName),data:{requests:t}},r),(function(t,r){return et(e)(t.taskID,r)}))}},ge=function(e){return function(t){return K(r(r({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/browse\",e.indexName),data:r},t)}}))}},ve=function(e){return function(t){var n=r({hitsPerPage:1e3},t);return K(r(r({shouldStop:function(e){return e.hits.length<n.hitsPerPage}},n),{},{request:function(t){return Ye(e)(\"\",r(r({},n),t)).then((function(e){return r(r({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},be=function(e){return function(t){var n=r({hitsPerPage:1e3},t);return K(r(r({shouldStop:function(e){return e.hits.length<n.hitsPerPage}},n),{},{request:function(t){return Ze(e)(\"\",r(r({},n),t)).then((function(e){return r(r({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Pe=function(e){return function(t,r,a){var o=a||{},u=o.batchSize,i=n(o,[\"batchSize\"]),s={taskIDs:[],objectIDs:[]};return d(function n(){var a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=[];for(a=o;a<t.length&&(c.push(t[a]),c.length!==(u||1e3));a++);return 0===c.length?Promise.resolve(s):ye(e)(c.map((function(e){return{action:r,body:e}})),i).then((function(e){return s.objectIDs=s.objectIDs.concat(e.objectIDs),s.taskIDs.push(e.taskID),a++,n(a)}))}(),(function(t,r){return Promise.all(t.taskIDs.map((function(t){return et(e)(t,r)})))}))}},Oe=function(e){return function(t){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/clear\",e.indexName)},t),(function(t,r){return et(e)(t.taskID,r)}))}},je=function(e){return function(t){var r=t||{},a=r.forwardToReplicas,o=y(n(r,[\"forwardToReplicas\"]));return a&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/rules/clear\",e.indexName)},o),(function(t,r){return et(e)(t.taskID,r)}))}},we=function(e){return function(t){var r=t||{},a=r.forwardToReplicas,o=y(n(r,[\"forwardToReplicas\"]));return a&&(o.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/synonyms/clear\",e.indexName)},o),(function(t,r){return et(e)(t.taskID,r)}))}},Ie=function(e){return function(t,r){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/deleteByQuery\",e.indexName),data:t},r),(function(t,r){return et(e)(t.taskID,r)}))}},xe=function(e){return function(t){return d(e.transporter.write({method:w,path:h(\"1/indexes/%s\",e.indexName)},t),(function(t,r){return et(e)(t.taskID,r)}))}},qe=function(e){return function(t,r){return d(De(e)([t],r).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},De=function(e){return function(t,r){var n=t.map((function(e){return{objectID:e}}));return Pe(e)(n,tt.DeleteObject,r)}},Se=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:w,path:h(\"1/indexes/%s/rules/%s\",e.indexName,t)},u),(function(t,r){return et(e)(t.taskID,r)}))}},ke=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:w,path:h(\"1/indexes/%s/synonyms/%s\",e.indexName,t)},u),(function(t,r){return et(e)(t.taskID,r)}))}},Te=function(e){return function(t){return Ue(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},Ne=function(e){return function(t,o){var u=o||{},i=u.query,s=u.paginate,c=n(u,[\"query\",\"paginate\"]),f=0;return function n(){return _e(e)(i||\"\",r(r({},c),{},{page:f})).then((function(e){for(var r=0,o=Object.entries(e.hits);r<o.length;r++){var u=a(o[r],2),i=u[0],c=u[1];if(t(c))return{object:c,position:parseInt(i,10),page:f}}if(f++,!1===s||f>=e.nbPages)throw{name:\"ObjectNotFoundError\",message:\"Object not found.\"};return n()}))}()}},Re=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/%s\",e.indexName,t)},r)}},Ae=function(){return function(e,t){for(var r=0,n=Object.entries(e.hits);r<n.length;r++){var o=a(n[r],2),u=o[0];if(o[1].objectID===t)return parseInt(u,10)}return-1}},Ee=function(e){return function(t,a){var o=a||{},u=o.attributesToRetrieve,i=n(o,[\"attributesToRetrieve\"]),s=t.map((function(t){return r({indexName:e.indexName,objectID:t},u?{attributesToRetrieve:u}:{})}));return e.transporter.read({method:x,path:\"1/indexes/*/objects\",data:{requests:s}},i)}},Ce=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/rules/%s\",e.indexName,t)},r)}},Ue=function(e){return function(t){return e.transporter.read({method:I,path:h(\"1/indexes/%s/settings\",e.indexName),data:{getVersion:2}},t)}},Je=function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/synonyms/%s\",e.indexName,t)},r)}},ze=function(e){return function(t,r){return d(Fe(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},Fe=function(e){return function(t,r){var a=r||{},o=a.createIfNotExists,u=n(a,[\"createIfNotExists\"]),i=o?tt.PartialUpdateObject:tt.PartialUpdateObjectNoCreate;return Pe(e)(t,i,u)}},He=function(e){return function(t,u){var i=u||{},s=i.safe,c=i.autoGenerateObjectIDIfNotExist,f=i.batchSize,l=n(i,[\"safe\",\"autoGenerateObjectIDIfNotExist\",\"batchSize\"]),p=function(t,r,n,a){return d(e.transporter.write({method:x,path:h(\"1/indexes/%s/operation\",t),data:{operation:n,destination:r}},a),(function(t,r){return et(e)(t.taskID,r)}))},m=Math.random().toString(36).substring(7),y=\"\".concat(e.indexName,\"_tmp_\").concat(m),g=Be({appId:e.appId,transporter:e.transporter,indexName:y}),v=[],b=p(e.indexName,y,\"copy\",r(r({},l),{},{scope:[\"settings\",\"synonyms\",\"rules\"]}));return v.push(b),d((s?b.wait(l):b).then((function(){var e=g(t,r(r({},l),{},{autoGenerateObjectIDIfNotExist:c,batchSize:f}));return v.push(e),s?e.wait(l):e})).then((function(){var t=p(y,e.indexName,\"move\",l);return v.push(t),s?t.wait(l):t})).then((function(){return Promise.all(v)})).then((function(e){var t=a(e,3),r=t[0],n=t[1],u=t[2];return{objectIDs:n.objectIDs,taskIDs:[r.taskID].concat(o(n.taskIDs),[u.taskID])}})),(function(e,t){return Promise.all(v.map((function(e){return e.wait(t)})))}))}},Me=function(e){return function(t,n){return Ge(e)(t,r(r({},n),{},{clearExistingRules:!0}))}},Ke=function(e){return function(t,n){return Le(e)(t,r(r({},n),{},{replaceExistingSynonyms:!0}))}},We=function(e){return function(t,r){return d(Be(e)([t],r).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,r){return et(e)(t.taskID,r)}))}},Be=function(e){return function(t,r){var a=r||{},o=a.autoGenerateObjectIDIfNotExist,u=n(a,[\"autoGenerateObjectIDIfNotExist\"]),i=o?tt.AddObject:tt.UpdateObject;if(i===tt.UpdateObject){var s=!0,c=!1,f=void 0;try{for(var l,p=t[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){if(void 0===l.value.objectID)return d(Promise.reject({name:\"MissingObjectIDError\",message:\"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option.\"}))}}catch(e){c=!0,f=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw f}}}return Pe(e)(t,i,u)}},Qe=function(e){return function(t,r){return Ge(e)([t],r)}},Ge=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=a.clearExistingRules,i=y(n(a,[\"forwardToReplicas\",\"clearExistingRules\"]));return o&&(i.queryParameters.forwardToReplicas=1),u&&(i.queryParameters.clearExistingRules=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/rules/batch\",e.indexName),data:t},i),(function(t,r){return et(e)(t.taskID,r)}))}},Ve=function(e){return function(t,r){return Le(e)([t],r)}},Le=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=a.replaceExistingSynonyms,i=y(n(a,[\"forwardToReplicas\",\"replaceExistingSynonyms\"]));return o&&(i.queryParameters.forwardToReplicas=1),u&&(i.queryParameters.replaceExistingSynonyms=1),d(e.transporter.write({method:x,path:h(\"1/indexes/%s/synonyms/batch\",e.indexName),data:t},i),(function(t,r){return et(e)(t.taskID,r)}))}},_e=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},Xe=function(e){return function(t,r,n){return e.transporter.read({method:x,path:h(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},Ye=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/rules/search\",e.indexName),data:{query:t}},r)}},Ze=function(e){return function(t,r){return e.transporter.read({method:x,path:h(\"1/indexes/%s/synonyms/search\",e.indexName),data:{query:t}},r)}},$e=function(e){return function(t,r){var a=r||{},o=a.forwardToReplicas,u=y(n(a,[\"forwardToReplicas\"]));return o&&(u.queryParameters.forwardToReplicas=1),d(e.transporter.write({method:q,path:h(\"1/indexes/%s/settings\",e.indexName),data:t},u),(function(t,r){return et(e)(t.taskID,r)}))}},et=function(e){return function(t,r){return f((function(n){return function(e){return function(t,r){return e.transporter.read({method:I,path:h(\"1/indexes/%s/task/%s\",e.indexName,t.toString())},r)}}(e)(t,r).then((function(e){return\"published\"!==e.status?n():void 0}))}))}},tt={AddObject:\"addObject\",UpdateObject:\"updateObject\",PartialUpdateObject:\"partialUpdateObject\",PartialUpdateObjectNoCreate:\"partialUpdateObjectNoCreate\",DeleteObject:\"deleteObject\",DeleteIndex:\"delete\",ClearIndex:\"clear\"},rt={Settings:\"settings\",Synonyms:\"synonyms\",Rules:\"rules\"},nt=1,at=2,ot=3;function ut(e,t,n){var a,o={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,a=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},o=a(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(o),n=a(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(o),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(o),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(a=ot,{debug:function(e,t){return nt>=a&&console.debug(e,t),Promise.resolve()},info:function(e,t){return at>=a&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.6.0\",\"-\").concat(e)}),s()]}),userAgent:T(\"4.6.0\").add({segment:\"Browser\"})};return function(e){var t=e.appId,n=c(void 0!==e.authMode?e.authMode:m.WithinHeaders,t,e.apiKey),a=k(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:g.Read},{url:\"\".concat(t,\".algolia.net\"),accept:g.Write}].concat(l([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)}(r(r(r({},o),n),{},{methods:{search:fe,searchForFacetValues:de,multipleBatch:se,multipleGetObjects:ce,multipleQueries:fe,copyIndex:G,copySettings:L,copySynonyms:_,copyRules:V,moveIndex:ie,listIndices:oe,getLogs:Z,listClusters:ae,multipleSearchForFacetValues:de,getApiKey:Y,addApiKey:W,listApiKeys:ne,updateApiKey:me,deleteApiKey:X,restoreApiKey:pe,assignUserID:B,assignUserIDs:Q,getUserID:ee,searchUserIDs:he,listUserIDs:ue,getTopUserIDs:$,removeUserID:le,hasPendingMappings:te,initIndex:function(e){return function(t){return re(e)(t,{methods:{batch:ye,delete:xe,getObject:Re,getObjects:Ee,saveObject:We,saveObjects:Be,search:_e,searchForFacetValues:Xe,waitTask:et,setSettings:$e,getSettings:Ue,partialUpdateObject:ze,partialUpdateObjects:Fe,deleteObject:qe,deleteObjects:De,deleteBy:Ie,clearObjects:Oe,browseObjects:ge,getObjectPosition:Ae,findObject:Ne,exists:Te,saveSynonym:Ve,saveSynonyms:Le,getSynonym:Je,searchSynonyms:Ze,browseSynonyms:be,deleteSynonym:ke,clearSynonyms:we,replaceAllObjects:He,replaceAllSynonyms:Ke,searchRules:Ye,getRule:Ce,deleteRule:Se,saveRule:Qe,saveRules:Ge,replaceAllRules:Me,browseRules:ve,clearRules:je}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||\"us\",n=c(m.WithinHeaders,e.appId,e.apiKey),a=k(r(r({hosts:[{url:\"analytics.\".concat(t,\".algolia.com\")}]},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/json\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({appId:e.appId,transporter:a},e.methods)}(r(r(r({},o),e),{},{methods:{addABTest:C,getABTest:J,getABTests:z,stopABTest:F,deleteABTest:U}}))}},initRecommendation:function(){return function(e){return function(e){var t=e.region||\"us\",n=c(m.WithinHeaders,e.appId,e.apiKey),a=k(r(r({hosts:[{url:\"recommendation.\".concat(t,\".algolia.com\")}]},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/json\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return p({appId:e.appId,transporter:a},e.methods)}(r(r(r({},o),e),{},{methods:{getPersonalizationStrategy:H,setPersonalizationStrategy:M}}))}}}}))}return ut.version=\"4.6.0\",ut}));\n","import '@firebase/storage';\n//# sourceMappingURL=index.esm.js.map\n","import { Component, OnInit } from '@angular/core';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\nimport * as moment from 'moment';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-almacen',\n  templateUrl: './almacen.component.html',\n  styleUrls: ['./almacen.component.scss']\n})\nexport class AlmacenComponent implements OnInit {\n  items: any [] = [];\n  _items: any [] = [];\n  para_agregar: any [] = [];\n  elementos: any [] = [];\n  insumos: any [] = [];\n  _insumos: any [] = [];\n  form: FormGroup;\n\n  loading: boolean = true;\n  search_text: string = \"\";\n  elemento_filtro: string = \"todos\";\n\n  vista: string = \"principal\";\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Stock', 'Vender', 'Cantidad comprada (' + moment ().format ('MMMM, YYYY') + ')', 'Monto comprado (' + moment ().format ('MMMM, YYYY') + ')'];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private dialogService: NbDialogService,\n    private route: ActivatedRoute,\n    private database: DatabaseService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>) { }\n\n  ngOnInit (): void {\n    this.form = new FormGroup ({\n      fecha: new FormControl ('', [Validators.required]),\n      anio: new FormControl ('', [Validators.required]),\n      mes: new FormControl ('', [Validators.required]),\n      dia: new FormControl ('', [Validators.required]),\n      tipo_comprobante: new FormControl ('ninguno'),\n      nro_comprobante: new FormControl (''),\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.insumos = res;\n      this._insumos = res;\n    });\n\n    this.database.get_empresa_insumos (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      console.log (res);\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {};\n      data ['Nombre'] = i.insumo.nombre;\n      data ['Stock'] = i.data.stock + ' (' + i.insumo.unidad_medida + ')';\n\n      let ofrecer_en_menu = 'Si';\n      if (i.data.ofrecer_en_menu === false) {\n        ofrecer_en_menu =  'No';\n      }\n      data ['Vender'] = ofrecer_en_menu;\n\n      let cantidad_comprada: number = 0;\n      if (this.valid_value (i.data, 'resumen_' + moment ().format ('YYYY'))) {\n        if (this.valid_value (i.data ['resumen_' + moment ().format ('YYYY')], 'cantidad_comprada_' + moment ().format ('MM'))) {\n          cantidad_comprada = i.data ['resumen_' + moment ().format ('YYYY')] ['cantidad_comprada_' + moment ().format ('MM')];\n        }\n      }\n      data ['Cantidad comprada (' + moment ().format ('MMMM, YYYY') + ')'] = cantidad_comprada;\n\n      let monto_comprado: number = 0;\n      if (this.valid_value (i.data, 'resumen_' + moment ().format ('YYYY'))) {\n        if (this.valid_value (i.data ['resumen_' + moment ().format ('YYYY')], 'monto_comprado_' + moment ().format ('MM'))) {\n          monto_comprado = i.data ['resumen_' + moment ().format ('YYYY')] ['monto_comprado_' + moment ().format ('MM')];\n        }\n      }\n      data ['Monto comprado (' + moment ().format ('MMMM, YYYY') + ')'] = monto_comprado;\n\n      data ['data'] = i.data;\n\n      returned.push ({\n        data: data\n      })\n    });\n\n    return returned;\n  }\n\n  get_monto_comprado_column () {\n    return 'Monto comprado (' + moment ().format ('MMMM, YYYY') + ')';\n  }\n\n  valid_value (object: any, value: string) {\n    if (object [value] === null || object [value] === undefined) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      // this.database.update_insumo (data)\n      //   .then (() => {\n      //     dialog.close ();\n      //     this.form.reset ();\n      //     this.loading = false;\n      //   })\n      //   .catch ((error: any) => {\n      //     console.log ('error', error);\n      //     dialog.close ();\n      //     this.form.reset ();\n      //     this.loading = false;\n      //   });\n    } else {\n      data.id = this.database.createId ();\n      data.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n      this.database.add_empresa_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.vista = 'registrar';\n    // this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  // filter () {\n  //   console.log (this.search_text);\n  //   console.log (this.search_text);\n\n  //   this.items = this._items;\n\n  //   if (this.elemento_filtro === 'todos') {\n  //     this.items = this.items.filter ((item: any) => {\n  //       return item.insumo.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n  //     });\n  //   } else {\n  //     this.items = this.items.filter ((item: any) => {\n  //       return (item.insumo.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1) && item.insumo.id === this.elemento_filtro;\n  //     });\n  //   }\n  // }\n\n  onChange () {\n    console.log (this.search_text);\n    this.insumos = this._insumos;\n\n    this.insumos = this.insumos.filter ((item: any) => {\n      return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    });\n  }\n\n  agregar_para_agregar (event: any) {\n    this.search_text = \"\";\n    console.log (event);\n    this.para_agregar.push ({\n      id: this.database.createId (),\n      nombre: event.nombre,\n      cantidad: 0,\n      precio: event.precio,\n      empresa_id: this.route.snapshot.paramMap.get ('id'),\n      insumo_id: event.id,\n      unidad_medida: event.unidad_medida\n    });\n  }\n\n  remove (item: any) {\n    for( var i = 0; i < this.para_agregar.length; i++) {\n      if ( this.para_agregar[i].id === item.id) {\n        this.para_agregar.splice(i, 1);\n      }\n    }\n  }\n\n  get_precio_total () {\n    let total: number = 0;\n\n    this.para_agregar.forEach ((i: any) => {\n      total += i.cantidad * i.precio;\n    });\n\n    return total;\n  }\n\n  continuar (dialog: any) {\n    this.form.controls ['fecha'].setValue (moment ().format ('YYYY[-]MM[-]DD'));\n    this.form.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n    this.dialogService.open (dialog);\n  }\n\n  fecha_cambio () {\n    this.form.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n  }\n\n  registrar_ingresos_insumo (dialog: any) {\n    this.para_agregar.forEach ((i: any) => {\n      i.fecha = this.form.value.fecha,\n      i.anio = this.form.value.anio,\n      i.mes = this.form.value.mes,\n      i.dia = this.form.value.dia,\n      i.tipo_comprobante = this.form.value.tipo_comprobante,\n      i.nro_comprobante = this.form.value.nro_comprobante\n    });\n\n    this.database.add_ingresos_insumo_empresa (this.para_agregar)\n      .then (() => {\n        this.para_agregar = [];\n        dialog.close ();\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      });\n  }\n\n  update_vender (data: any) {\n    this.loading = true;\n    console.log (data);\n    data.ofrecer_en_menu = !data.ofrecer_en_menu;\n\n    this.database.update_empresa_insumo (data)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log (error);\n        this.loading = false;\n      })\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"width: 640px; height: 500px\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <input #autoInput\n          [(ngModel)]=\"search_text\"\n          nbInput\n          type=\"text\"\n          (ngModelChange)=\"onChange ()\"\n          placeholder=\"Buscar un insumo...\"/>\n\n        <nb-list>\n          <nb-list-item *ngFor=\"let item of insumos\">\n            {{ item.data.nombre }}\n          </nb-list-item>\n        </nb-list>\n      </div>\n\n      <div class=\"col-8\">\n        <table class=\"table table-bordered table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Nombre</th>\n              <th scope=\"col\">Cantidad</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr *ngFor=\"let item of para_agregar\">\n              <td>\n                {{ item.nombre }}\n              </td>\n\n              <td>\n                <input type=\"text\" [(ngModel)]=\"item.cantidad\">\n              </td>\n              <td>\n                <input type=\"text\" [(ngModel)]=\"item.precio\">\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <!-- <nb-card-body>\n      <input #autoInput\n        [(ngModel)]=\"search_text\"\n        nbInput\n        type=\"text\"\n        (ngModelChange)=\"onChange ()\"\n        placeholder=\"Buscar un insumo...\"\n        [nbAutocomplete]=\"auto\" />\n\n      <nb-autocomplete #auto (selectedChange)=\"onSelectionChange ($event)\">\n        <nb-option *ngFor=\"let item of insumos\" [value]=\"item.data\">\n          {{ item.data.nombre }}\n        </nb-option>\n      </nb-autocomplete>\n\n\n    </nb-card-body> -->\n\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_comprobante let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      Continuar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\" style=\"display: block;\">\n          <label for=\"fecha\" class=\"label\">Fecha:</label>\n          <input\n            type=\"date\"\n            nbInput\n            fullWidth\n            formControlName=\"fecha\"\n            (ngModelChange)=\"fecha_cambio ()\"\n            id=\"fecha\">\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"tipo_comprobante\" class=\"label\">Tipo comprobante:</label>\n          <nb-select formControlName=\"tipo_comprobante\" id=\"tipo_comprobante\" fullWidth>\n            <nb-option value=\"ninguno\">Ninguno</nb-option>\n            <nb-option value=\"boleta\">Boleta</nb-option>\n            <nb-option value=\"factura\">Factura</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">N° comprobante:</label>\n          <input type=\"text\" formControlName=\"nro_comprobante\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_ingresos_insumo (ref)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\" *ngIf=\"vista === 'principal'\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/home'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-2\">\n            <h5>Almacen</h5>\n          </div>\n\n          <div class=\"col-6\">\n            <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"vista = 'registrar'\">Registrar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n        <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n        <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n        <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n          <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n            {{ customColumn }}\n          </th>\n          <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n            <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n            {{row.data [customColumn]}}\n          </td>\n        </ng-container>\n\n        <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                      [nbTreeGridColumnDef]=\"column\"\n                      [showOn]=\"getShowOn(index)\">\n          <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n            {{column}}\n          </th>\n          <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n            <div *ngIf=\"column === 'Vender'\">\n              <button nbButton fullWidth size=\"small\" ghost (click)=\"update_vender (row.data.data)\">\n                {{ row.data [column] }}\n                <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n              </button>\n            </div>\n\n            <div *ngIf=\"column !== 'Vender'\">\n              <span *ngIf=\"column === get_monto_comprado_column ()\">{{ row.data [column] | currency:'S/. ' }}</span>\n              <span *ngIf=\"column !== 'Monto comprado'\">{{ row.data [column] }}</span>\n            </div>\n          </td>\n        </ng-container>\n      </table>\n    </nb-card>\n\n    <nb-card [nbSpinner]=\"loading\" *ngIf=\"vista === 'registrar'\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"vista ='principal'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5>Registrar ingreso de insumos</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" [disabled]=\"get_precio_total () <= 0\" fullWidth (click)=\"continuar (dialog_comprobante)\">Continuar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <div class=\"row\">\n        <div class=\"col-3\">\n          <input #autoInput\n            style=\"width: 100%; margin: 12px;\"\n            [(ngModel)]=\"search_text\"\n            nbInput\n            type=\"text\"\n            (ngModelChange)=\"onChange ()\"\n            placeholder=\"Buscar un insumo...\"/>\n\n          <div *ngFor=\"let item of insumos\" style=\"margin-left: 12px; padding: 6px;\">\n            <div class=\"row\">\n              <div class=\"col-8\">\n                {{ item.data.nombre }}\n              </div>\n\n              <div class=\"col-4\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"agregar_para_agregar (item.data)\">\n                  <nb-icon status=\"primary\" icon=\"arrowhead-right-outline\"></nb-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-9\" style=\"padding-right: 27px;\">\n          <table class=\"table table-bordered table-striped\" style=\"margin-top: 12px;\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Nombre</th>\n                <th scope=\"col\" style=\"width: 124px;\">Cantidad</th>\n                <th scope=\"col\" style=\"width: 102px;\">Precio (S/)</th>\n                <th scope=\"col\">Total</th>\n                <th scope=\"col\"></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <tr *ngFor=\"let item of para_agregar\">\n                <td>\n                  {{ item.nombre }}\n                </td>\n\n                <td>\n                  <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n                  {{ item.unidad_medida }}\n                </td>\n                <td>\n                  <input style=\"width: 100px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.precio\">\n                </td>\n\n                <td style=\"width: 128px;\">\n                  {{ item.cantidad * item.precio | currency:'S/. ' }}\n                </td>\n\n                <td style=\"width: 12px;\">\n                  <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n                </td>\n              </tr>\n\n              <tr *ngIf=\"get_precio_total () > 0\">\n                <td colspan=\"3\">Total</td>\n                <td>\n                  {{ get_precio_total () | currency:'S/. ' }}\n                </td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n\n","import { Component, OnInit } from '@angular/core';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { DatabaseService } from '../../services/database.service';\nimport { NbToastrService } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-configuracion',\n  templateUrl: './configuracion.component.html',\n  styleUrls: ['./configuracion.component.scss']\n})\nexport class ConfiguracionComponent implements OnInit {\n  loading: boolean = true;\n  form: FormGroup;\n  constructor (private database: DatabaseService, private toastrService: NbToastrService) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      delivery_limite: new FormControl ('', [Validators.required]),\n      delivery_precio: new FormControl ('', [Validators.required]),\n      local_latitud: new FormControl ('', [Validators.required]),\n      local_longitud: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_preferencias ().subscribe ((res: any) => {\n      this.form.patchValue (res);\n      this.loading = false;\n    });\n  }\n\n  guardar () {\n    this.loading = true;\n    this.database.update_preferencias (this.form.value)\n      .then (() => {\n        this.loading = false;\n        this.toastrService.show ('Guardado');\n      })\n      .catch ((error: any) => {\n        this.loading = false;\n      });\n  }\n}\n","<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-9\">\n        <h5>Configuraciones</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth [disabled]=\"!form.valid\" (click)=\"guardar ()\">Guardar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <form [formGroup]=\"form\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"delivery_limite\" class=\"label\">Delivery Limite (Metros):</label>\n            <input type=\"number\" formControlName=\"delivery_limite\" id=\"delivery_limite\" nbInput fullWidth>\n          </div>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"delivery_precio\" class=\"label\">Delivery Precio (S/):</label>\n            <input type=\"number\" formControlName=\"delivery_precio\" id=\"delivery_precio\" nbInput fullWidth>\n          </div>\n        </div>\n\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"local_latitud\" class=\"label\">Latitud (local):</label>\n            <input type=\"number\" formControlName=\"local_latitud\" id=\"local_latitud\" nbInput fullWidth>\n          </div>\n        </div>\n        <div class=\"col-6\">\n          <div class=\"form-group\">\n            <label for=\"local_longitud\" class=\"label\">Longitud (local):</label>\n            <input type=\"number\" formControlName=\"local_longitud\" id=\"local_longitud\" nbInput fullWidth>\n          </div>\n        </div>\n      </div>\n    </form>\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-empresa-cartas',\n  templateUrl: './empresa-cartas.component.html',\n  styleUrls: ['./empresa-cartas.component.scss']\n})\nexport class EmpresaCartasComponent implements OnInit {\n  empresa: any;\n\n  items: any [] = [];\n  almacen_insumos: any [] = [];\n  menu_elementos: any [] = [];\n  menus: any [] = [];\n  menus_dia: any [] = [];\n  all_platos: any [] = [];\n  combo_list: any [] = [];\n\n  form: FormGroup;\n  form_menu_dia: FormGroup;\n  form_plato: FormGroup;\n\n  form_promocion: FormGroup;\n  form_promocion_combo: FormGroup;\n\n  tipo_promocion: number = -1;\n\n  loading: boolean = true;\n\n  vista: string = 'principal';\n  insumos: any [] = [];\n  _insumos: any [] = [];\n  para_agregar: any [] = [];\n  _para_agregar: any [] = [];\n  promociones: any [] = [];\n  search_text: string = \"\";\n\n  avatar_preview: any = null;\n  file: any = null;\n  file_menu: any = null;\n  file_combo: any = null;\n\n  plato_editar: boolean = false;\n  plato_selected: any = '';\n  empresa_id: string = '';\n  insumo_selected; any;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private af_storage: AngularFireStorage,\n    private route: ActivatedRoute\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      tipo_carta: new FormControl ('0', [Validators.required]),\n      orden: new FormControl (0, [Validators.required]),\n      precio: new FormControl (0),\n      empresa_id: new FormControl (0),\n      habilitado: new FormControl (true),\n    });\n\n    this.form_menu_dia = new FormGroup ({\n      id: new FormControl (),\n      carta_id: new FormControl (''),\n      empresa_id: new FormControl (''),\n      elemento_menu_id: new FormControl (''),\n      menu_id: new FormControl ('', [Validators.required]),\n      menu_nombre: new FormControl ('', [Validators.required]),\n      stock: new FormControl (0, [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      insumo_id: new FormControl (''),\n    });\n\n    this.form_plato = new FormGroup ({\n      id: new FormControl (),\n      carta_id: new FormControl ('', [Validators.required]),\n      empresa_id: new FormControl ('', [Validators.required]),\n      nombre: new FormControl ('', [Validators.required]),\n      imagen: new FormControl (''),\n      resumen: new FormControl ('', [Validators.required]),\n      descripcion: new FormControl ('', [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      orden: new FormControl (0, [Validators.required]),\n      // es_adicional: new FormControl (0, [Validators.required]),\n      habilitado: new FormControl (true, [Validators.required])\n    });\n\n    this.form_promocion = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      descripcion: new FormControl ('', [Validators.required]),\n      imagen: new FormControl (''),\n      descuento: new FormControl ('', [Validators.required]),\n      tipo_promocion: new FormControl ('0', [Validators.required]),\n      plato_id: new FormControl (''),\n    });\n\n    this.form_promocion_combo = new FormGroup ({\n      id: new FormControl (),\n      descuento: new FormControl ('', [Validators.required])\n    });\n\n    this.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    this.database.get_empresa_by_id (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any) => {\n      this.empresa = res;\n    });\n\n    this.database.get_cartas_by_empresa (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      this.items = res;\n      this.loading = false;\n      console.log (res);\n    });\n\n    this.database.get_empresa_insumos_venta (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any []) => {\n      this.almacen_insumos = res\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.menu_elementos = res;\n    });\n\n    this.database.get_menus ().subscribe ((res: any) => {\n      this.menus = res;\n    });\n\n    this.database.get_menus_dia (this.route.snapshot.paramMap.get ('id')).subscribe ((res: any) => {\n      this.menus_dia = res;\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.insumos = res;\n      this._insumos = res;\n    });\n\n    this.database.get_all_platos ().subscribe ((res: any []) => {\n      this.all_platos = res;\n    });\n\n    this.database.get_all_promociones ().subscribe ((res: any []) => {\n      this.promociones = res;\n      console.log ('promociones', res);\n    });\n  }\n\n  tipoCartaChanged (val: any, data: any) {\n    data.tipo_carta = this.form.value.tipo_carta;\n    if (this.form.value.tipo_carta == '0') {\n      this.form.controls ['precio'].setValidators ([Validators.required]);\n      this.form.controls ['precio'].enable ();\n    } else {\n      this.form.controls ['precio'].setValidators ([]);\n      this.form.controls ['precio'].disable ();\n    }\n  }\n\n  uploadIMenumageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = '/Menus/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_carta (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            });\n        } else {\n          this.database.add_carta (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file_menu = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  submit (dialog: any, editar: any) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    console.log (data);\n    console.log (editar);\n\n    if (editar.editar) {\n      if (this.file_menu !== null) {\n        this.uploadIMenumageAsPromise (this.file_menu, data, true, dialog);\n      } else {\n        this.database.update_carta (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          });\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n      if (this.file_menu !== null) {\n        this.uploadIMenumageAsPromise (this.file_menu, data, false, dialog);\n      } else {\n        this.database.add_carta (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n          });\n      }\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.controls ['tipo_carta'].enable ();\n    this.form.controls ['tipo_carta'].setValue ('0');\n    this.dialogService.open (dialog, { context: { editar: false, tipo_carta: '0' } });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.avatar_preview = item.imagen;\n    this.form.controls ['tipo_carta'].disable ();\n    this.form.controls ['precio'].enable ();\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: { editar: true, tipo_carta: item.tipo_carta } });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_carta (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    this.loading = false;\n\n    dialog.close ();\n    this.form.reset ();\n    this.form_menu_dia.reset ();\n    this.file_menu = null;\n    this.avatar_preview = null;\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n\n    if (item.habilitado === true) {\n      item.habilitado = false;\n    } else {\n      item.habilitado = true;\n    }\n\n    this.database.update_carta (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  registrar_menu_dia (carta: any, menu: any, dialog: any, tipo: string = 'menu') {\n    console.log (menu);\n    this.form_menu_dia.controls ['stock'].setValue (1);\n    this.form_menu_dia.controls ['precio'].setValue (menu.precio);\n\n    let _menus: any [] = [];\n    if (tipo === 'menu') {\n      _menus = this.menus.filter ((m: any) => {\n        return (m.data.elemento_menu_id === menu.id) &&\n          (this.menu_existe (this.get_menus (carta, menu), m.data) === undefined);\n      });\n    }\n\n    this.dialogService.open (dialog, { context: {\n      carta: carta,\n      menu: menu,\n      menus: _menus,\n      tipo: tipo\n    }});\n  }\n\n  menu_existe (lista: any [], menu: any) {\n    console.log (lista.find (x => x.id === menu.id));\n    return lista.find (x => x.menu_id === menu.id);\n  }\n\n  menu_changed (tipo: string) {\n    if (tipo === 'menu') {\n      let menu = this.menus.find (x => x.data.id ===  this.form_menu_dia.value.menu_id);\n      this.form_menu_dia.controls ['menu_nombre'].setValue (menu.data.nombre);\n      this.form_menu_dia.controls ['precio'].setValue (menu.menu_elemento.precio);\n    } else {\n      let insumo_almacen = this.almacen_insumos.find (x => x.data.id ===  this.form_menu_dia.value.menu_id);\n      this.form_menu_dia.controls ['menu_nombre'].setValue (insumo_almacen.insumo.nombre);\n      this.form_menu_dia.controls ['precio'].setValue (insumo_almacen.insumo.precio);\n      this.form_menu_dia.controls ['insumo_id'].setValue (insumo_almacen.insumo.id);\n    }\n  }\n\n  submit_menu_dia (dialog: any, data: any) {\n    let request: any = this.form_menu_dia.value;\n    request.id = this.database.createId ();\n    request.carta_id = data.carta.id;\n    request.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    if (data.tipo === 'menu') {\n      request.elemento_menu_id = data.menu.id;\n    }\n\n    request.tipo = data.tipo;\n\n    this.loading = true;\n\n    this.database.add_menu_dia (request)\n      .then (() => {\n        this.cancelar (dialog);\n      }).catch ((error: any) => {\n        console.log (error);\n        this.cancelar (dialog);\n      });\n  }\n\n  get_menus (carta: any, menu: any, tipo: string='menu') {\n    if (tipo === 'menu') {\n      return this.menus_dia.filter ((i: any) => {\n        return i.carta_id === carta.id && i.elemento_menu_id === menu.id;\n      });\n    } else {\n      return this.menus_dia.filter ((i: any) => {\n        return i.carta_id === carta.id && i.tipo === tipo;\n      });\n    }\n  }\n\n  eliminar_menu_dia (menu: any) {\n    console.log (menu);\n\n    this.database.delete_menu_dia (menu)\n      .then (() => {\n\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      })\n  }\n\n  vista_registrar_plato (carta: any) {\n    console.log (carta);\n\n    this.vista = 'registrar';\n\n    this.form_plato.controls ['carta_id'].setValue (carta.id);\n    this.form_plato.controls ['empresa_id'].setValue (this.route.snapshot.paramMap.get ('id'));\n  }\n\n  onChange () {\n    console.log (this.search_text);\n    this.insumos = this._insumos;\n\n    this.insumos = this.insumos.filter ((item: any) => {\n      return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    });\n  }\n\n  agregar_para_agregar (event: any) {\n    console.log (event);\n    this.para_agregar.push ({\n      id: this.database.createId (),\n      insumo_id: event.id,\n      nombre: event.nombre,\n      cantidad: 0,\n      unidad_medida: event.unidad_medida\n    });\n  }\n\n  remove (item: any) {\n    for ( var i = 0; i < this.para_agregar.length; i++) {\n      if ( this.para_agregar[i].id === item.id) {\n        this.para_agregar.splice(i, 1);\n      }\n    }\n  }\n\n  remove_plato_promocion (item: any) {\n    for ( var i = 0; i < this.combo_list.length; i++) {\n      if ( this.combo_list[i].id === item.id) {\n        this.combo_list.splice(i, 1);\n      }\n    }\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  change_menu_Listener (event: any) {\n    this.file_menu = event.target.files[0];\n    this.getBase64 (this.file_menu);\n  }\n\n  change_combo_Listener (event: any) {\n    this.file_combo = event.target.files[0];\n    this.getBase64 (this.file_combo);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n\n    };\n  }\n\n  submit_plato () {\n    this.loading = true;\n    let data: any = this.form_plato.value;\n\n    if (this.plato_editar) {\n      if (this.file == null) {\n        this.database.update_plato (data, this.para_agregar, this._para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true);\n      }\n    } else {\n      data.id = this.database.createId ();\n\n      if (this.file == null) {\n        this.database.add_plato (data, this.para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false) {\n    const filePath = '/Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_plato (data, this.para_agregar, this._para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n        } else {\n          this.database.add_plato (data, this.para_agregar)\n          .then (() => {\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.form_plato.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n            this.vista = 'principal';\n            this.plato_editar = false;\n            this.para_agregar = [];\n            this._para_agregar = [];\n          });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  cambiar_estado_plato (plato: any) {\n    this.loading = true;\n    plato.habilitado = !plato.habilitado;\n    this.database.update_plato (plato, [], [])\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log (error);\n        this.loading = false;\n      });\n  }\n\n  async editar_plato (plato: any) {\n    this.para_agregar = [];\n    this._para_agregar = [];\n    console.log (plato);\n    this.avatar_preview = plato.imagen;\n    this.plato_editar = true;\n\n    let res: any [] = await this.database.get_plato_insumos_by_plato_id (plato.id).pipe (first ()).toPromise ();\n    console.log (res);\n    res.forEach ((p_i: any) => {\n      if (p_i.insumo !== undefined) {\n        this.para_agregar.push ({\n          id: p_i.data.id,\n          insumo_id: p_i.insumo.id,\n          cantidad: p_i.data.cantidad,\n          unidad_medida: p_i.insumo.unidad_medida,\n          nombre: p_i.insumo.nombre\n        });\n\n        this._para_agregar.push ({\n          id: p_i.data.id,\n          insumo_id: p_i.insumo.id,\n          cantidad: p_i.data.cantidad,\n          unidad_medida: p_i.insumo.unidad_medida,\n          nombre: p_i.insumo.nombre\n        });\n      }\n    });\n\n    console.log (this.para_agregar);\n    console.log (this._para_agregar);\n\n    this.vista = 'registrar';\n    this.form_plato.patchValue (plato);\n  }\n\n  uploadComboImageAsPromise (file: any, data: any, dialog: any) {\n    const filePath = '/Combos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n        this.database.add_promocion (data)\n          .then (() => {\n            this.form_promocion.reset ();\n            this.loading = false;\n            dialog.close ();\n            this.combo_list = [];\n            this.avatar_preview = null;\n            this.file_combo = null;\n          })\n          .catch ((error: any) => {\n            this.form_promocion.reset ();\n            console.log (error);\n            dialog.close ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file_combo = null;\n          });\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_promocion (dialog: any, data: any) {\n    this.loading = true;\n    let request: any = {\n      id: this.database.createId (),\n      nombre: this.form_promocion.value.nombre,\n      empresa_id: this.empresa_id,\n      carta_id: data.id,\n      descripcion: this.form_promocion.value.descripcion,\n      descuento: this.form_promocion.value.descuento,\n      orden: 0,\n      tipo: this.form_promocion.value.tipo_promocion,\n    };\n\n    if (this.form_promocion.value.tipo_promocion === '0') {\n      request.precio_total = this.form_promocion.value.plato_id.precio,\n      request.plato = {\n        id: this.form_promocion.value.plato_id.id,\n        nombre: this.form_promocion.value.plato_id.nombre,\n        imagen: this.form_promocion.value.plato_id.imagen,\n        tipo: 'plato'\n      }\n\n      console.log (request);\n      this.database.add_promocion (request)\n        .then (() => {\n          this.form_promocion.reset ();\n          this.loading = false;\n          dialog.close ();\n          this.combo_list = [];\n          this.avatar_preview = null;\n          this.file_combo = null;\n        })\n        .catch ((error: any) => {\n          this.form_promocion.reset ();\n          console.log (error);\n          dialog.close ();\n          this.loading = false;\n          this.avatar_preview = null;\n          this.file_combo = null;\n        });\n    } else {\n      let platos: any [] = [];\n      let precio_total = 0;\n      this.combo_list.forEach ((e: any) => {\n        precio_total += e.precio - (e.precio * (request.descuento / 100)),\n        platos.push ({\n          id: e.id,\n          empresa_id: e.empresa_id,\n          imagen: e.imagen,\n          nombre: e.nombre,\n          precio: e.precio,\n          tipo: e.tipo\n        });\n      });\n      request.platos = platos;\n      request.precio_total = precio_total;\n\n      if (this.file_combo === null) {\n        this.database.add_promocion (request)\n          .then (() => {\n            this.form_promocion.reset ();\n            this.loading = false;\n            dialog.close ();\n            this.combo_list = [];\n            this.avatar_preview = null;\n            this.file_combo = null;\n          })\n          .catch ((error: any) => {\n            this.form_promocion.reset ();\n            console.log (error);\n            dialog.close ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file_combo = null;\n          });\n      } else {\n        this.uploadComboImageAsPromise (this.file_combo, request, dialog);\n      }\n    }\n  }\n\n  abrir_registrar_promocion (dialog: any, carta: any) {\n    this.dialogService.open (dialog, {\n      context: carta\n    })\n  }\n\n  tipo_promocion_changed () {\n    // if (this.tipo_promocion == 0) {\n    //   this.form_promocion = this.form_promocion_plato;\n    //   this.form_promocion.controls ['tipo_promocion'].setValue (0);\n    // } else {\n    //   this.form_promocion = this.form_promocion_combo;\n    //   this.form_promocion.controls ['tipo_promocion'].setValue (1);\n    // }\n  }\n\n  plato_selected_changed (event: any) {\n    console.log (event);\n\n    event.tipo = 'plato';\n    if (this.combo_list.find (x => x.id == event.id) === undefined) {\n      this.combo_list.push (event);\n    }\n\n    this.plato_selected = '';\n    event = '';\n  }\n\n  insumo_selected_changed (event: any) {\n    console.log (event);\n    if (this.combo_list.find (x => x.id == event.insumo.id) === undefined) {\n      this.combo_list.push ({\n        nombre: event.insumo.nombre,\n        precio: event.insumo.precio,\n        id: event.insumo.id,\n        empresa_id: event.data.empresa_id,\n        imagen: '',\n        tipo: 'insumo'\n      });\n    }\n\n    this.insumo_selected = '';\n    event = '';\n  }\n\n  get_promociones_by_carta (carta_id: string) {\n    return this.promociones.filter ((e: any) => {\n      return e.carta_id === carta_id;\n    });\n  }\n\n  eliminar_promocion (data: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar esta promocion?\")) {\n      this.loading = true;\n      this.database.delete_promocion (data).then (() => {\n        this.loading = false;\n      }, error => {\n        console.log (error);\n        this.loading = false;\n      });\n    }\n  }\n\n  regresar_principal () {\n    this.vista = 'principal'\n    this.para_agregar = [];\n  }\n\n  eliminar_plato_validar (plato: any) {\n    if (plato ['resumen_' + moment ().format ('YYYY')] !== undefined) {\n      if (confirm ('¿Esta seguro que desea eliminar este plato?')) {\n        this.loading = true;\n        this.database.delete_plato (plato.id).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    } else {\n      this.loading = true;\n      this.database.delete_plato (plato.id).then (() => {\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  eliminar_carta_validar (carta: any) {\n    console.log (carta);\n    if (carta.data.tipo_carta === '0') {\n      let menus_dia = this.menus_dia.filter ((x: any) => {\n        return x.carta_id === carta.data.id;\n      });\n\n      this.database.delete_carta_menu (carta.data.id, menus_dia).then (() => {\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n        console.log (error);\n      });\n    } else if (carta.data.tipo_carta === '1') {\n      let promociones: any [] = [];\n      this.promociones.forEach ((promocion: any) => {\n        if (promocion.tipo === '0') {\n          if (carta.platos.find (x => x.id === promocion.plato.id) !== undefined) {\n            if (promociones.find (x => x.id === promocion.id) === undefined) {\n              promociones.push (promocion);\n            }\n          }\n        }\n\n        if (promocion.tipo === '1') {\n          promocion.platos.forEach ((plato: any) => {\n            if (carta.platos.find (x => x.id === plato.id) !== undefined) {\n              if (promociones.find (x => x.id === promocion.id) === undefined) {\n                promociones.push (promocion);\n              }\n            }\n          });\n        }\n      });\n\n      if (carta.platos.length > 0) {\n        if (confirm ('¿Esta seguro que quiere eliminar esta carta?')) {\n          console.log (promociones);\n          this.loading = true;\n          this.database.delete_carta_extra (carta.data.id, carta.platos, promociones).then (() => {\n            this.loading = false;\n          }, error => {\n            this.loading = false;\n            console.log (error);\n          });\n        }\n      } else {\n        this.loading = true;\n        console.log (promociones);\n        this.database.delete_carta_extra (carta.data.id, carta.platos, promociones).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    } else if (carta.data.tipo_carta === '2') {\n      if (confirm ('¿Esta seguro que quiere eliminar esta carta tipo promoción?')) {\n        this.loading = true;\n        let promociones: any [] = this.get_promociones_by_carta (carta.data.id);\n        console.log (promociones);\n        this.database.delete_carta_promocion (carta.data.id, promociones).then (() => {\n          this.loading = false;\n        }, error => {\n          this.loading = false;\n          console.log (error);\n        });\n      }\n    }\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"tipo_carta\" class=\"label\">Tipo de carta:</label>\n          <nb-select formControlName=\"tipo_carta\" id=\"tipo_carta\" fullWidth (selectedChange)=\"tipoCartaChanged ($event, data)\">\n            <nb-option value='0'>Menu</nb-option>\n            <nb-option value='1'>Extra</nb-option>\n            <nb-option value='2'>Promoción</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\" *ngIf=\"data.tipo_carta == '0'\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"change_menu_Listener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"precio\" class=\"label\">Precio:</label>\n              <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Orden:</label>\n              <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_menu_dia let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_menu_dia\">\n        <div *ngIf=\"data.tipo === 'menu'\" class=\"form-group\">\n          <label for=\"menu_id\" class=\"label\">{{ data.menu.nombre }}:</label>\n          <nb-select formControlName=\"menu_id\" id=\"menu_id\" fullWidth (selectedChange)=\"menu_changed (data.tipo)\">\n            <nb-option *ngFor=\"let item of data.menus\" [value]=item.data.id>\n              {{ item.data.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div *ngIf=\"data.tipo !== 'menu'\" class=\"form-group\">\n          <label for=\"menu_id\" class=\"label\">Desde el almacen:</label>\n          <nb-select formControlName=\"menu_id\" id=\"menu_id\" fullWidth (selectedChange)=\"menu_changed (data.tipo)\">\n            <nb-option *ngFor=\"let item of almacen_insumos\" [value]=\"item.data.id\">\n              {{ item.insumo.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div *ngIf=\"data.tipo === 'menu'\" class=\"form-group\">\n          <label for=\"stock\" class=\"label\">Cantidad a vender:</label>\n          <input type=\"number\" min=\"1\" formControlName=\"stock\" id=\"stock\" nbInput fullWidth>\n        </div>\n\n        <!-- <div class=\"form-group\">\n          <label for=\"precio\" class=\"label\">Precio:</label>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit_menu_dia (ref, data)\" [disabled]=\"!form_menu_dia.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_registrar_promocion let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: -webkit-fill-available; max-height: 500px;\">\n    <nb-card-header>\n      Registrar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_promocion\">\n        <div class=\"form-group\">\n          <label for=\"tipo_promocion\" class=\"label\">Tipo de promocion:</label>\n          <nb-select id=\"tipo_promocion\" formControlName=\"tipo_promocion\" fullWidth (selectedChange)=\"tipo_promocion_changed ()\" placeholder=\"Tipo de promocion\">\n            <nb-option value='0'>Promocionar un plato</nb-option>\n            <nb-option value='1'>Armar un combo</nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\" *ngIf=\"form_promocion.value.tipo_promocion === '1'\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"change_combo_Listener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" min=1 formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"descripcion\" class=\"label\">Descripcion:</label>\n          <textarea nbInput formControlName=\"descripcion\" id=\"descripcion\" fullWidth></textarea>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"descuento\" class=\"label\">Descuento:</label>\n          <input type=\"number\" min=1 formControlName=\"descuento\" id=\"descuento\" nbInput fullWidth>\n        </div>\n\n        <div *ngIf=\"form_promocion.value.tipo_promocion === '0'\">\n          <div class=\"form-group\">\n            <label for=\"plato_id\" class=\"label\">Seleccionar un plato:</label>\n            <nb-select id=\"plato_id\" formControlName=\"plato_id\" fullWidth>\n              <nb-option *ngFor=\"let plato of all_platos\" [value]=plato>\n                <ng-container *ngIf=\"plato.empresa_id === empresa_id\">\n                  {{ plato.nombre }}\n                </ng-container>\n              </nb-option>\n            </nb-select>\n          </div>\n\n          <div class=\"form-group\">\n            <b>Precio:</b> {{ form_promocion.value?.plato_id.precio | currency:'S/. ' }}\n          </div>\n          <div class=\"form-group\">\n            <b>Descuento:</b> ({{ form_promocion.value?.descuento }}%): {{ form_promocion.value?.plato_id.precio - (form_promocion.value?.plato_id.precio * (form_promocion.value?.descuento / 100)) }}\n          </div>\n        </div>\n      </form>\n\n      <div *ngIf=\"form_promocion.value.tipo_promocion == 1\">\n        <div class=\"form-group\">\n          <label for=\"plato_selected\" class=\"label\">Registrar un plato:</label>\n          <nb-select id=\"plato_selected\" [(ngModel)]=\"plato_selected\" fullWidth (selectedChange)=\"plato_selected_changed ($event)\">\n            <nb-option *ngFor=\"let plato of all_platos\" [value]=plato>\n              {{ plato.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"plato_selected\" class=\"label\">Registrar un insumo:</label>\n          <nb-select id=\"plato_selected\" [(ngModel)]=\"insumo_selected\" fullWidth (selectedChange)=\"insumo_selected_changed ($event)\">\n            <nb-option *ngFor=\"let insumo of almacen_insumos\" [value]=insumo>\n              {{ insumo.insumo.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <table class=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Nombre</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Con descuento ({{ form_promocion.value.descuento }}%)</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of combo_list\">\n              <th scope=\"row\">{{ item.nombre }}</th>\n              <td>{{ item.precio }}</td>\n              <td>{{ item.precio - (item.precio * (form_promocion.value.descuento / 100)) }}</td>\n              <td>\n                <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove_plato_promocion (item)\"></nb-icon>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_promocion (ref, data)\" [disabled]=\"!form_promocion.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card *ngIf=\"vista === 'principal'\" [nbSpinner]=\"loading\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/home'\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5>Cartas: {{ empresa?.nombre }}</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-body>\n        <div class=\"row\">\n          <div class=\"col-6\" *ngFor=\"let carta of items | orderBy: orden\">\n            <nb-card>\n              <nb-card-header>\n                <div class=\"row\">\n                  <div class=\"col-8\">\n                    <img style=\"width: 32px;\" *ngIf=\"carta.data.tipo_carta === '0'\" [src]=\"carta.data.imagen\">\n                    {{ carta.data.nombre }}\n                  </div>\n\n                  <div class=\"col-4\">\n                    <span *ngIf=\"carta.data.tipo_carta === '0'\">\n                      {{ carta.data.precio | currency:'S/. ' }}\n                    </span>\n                  </div>\n                </div>\n              </nb-card-header>\n\n              <div *ngIf=\"carta.data.tipo_carta === '0'\">\n                <nb-list *ngFor=\"let menu of menu_elementos\">\n                  <nb-list-item style=\"background-color: #d4d3d1; display: flow-root;\">\n                    {{ menu.nombre }}\n                    &nbsp;\n                    ({{ menu.precio | currency:'S/. ' }})\n                    <nb-icon class=\"plus-button\" icon=\"plus-outline\" (click)=\"registrar_menu_dia (carta.data, menu, dialog_menu_dia, 'menu')\"></nb-icon>\n                  </nb-list-item>\n\n                  <nb-list-item style=\"display: flow-root;\" *ngFor=\"let menu_dia of get_menus (carta.data, menu, 'menu')\">\n                    <div class=\"row\">\n                      <div class=\"col-10\">\n                        {{ menu_dia.stock }} Unid. - {{ menu_dia.menu_nombre }}\n                      </div>\n\n                      <div class=\"col-2\">\n                        <nb-icon (click)=\"eliminar_menu_dia (menu_dia)\" status=\"danger\" icon=\"close-outline\"></nb-icon>\n                      </div>\n                    </div>\n                  </nb-list-item>\n                </nb-list>\n              </div>\n\n              <div *ngIf=\"carta.data.tipo_carta === '1'\">\n                <div *ngFor=\"let plato of carta.platos | orderBy: orden\">\n                  <div class=\"row\" style=\"align-items: center; padding: 12px;\">\n                    <div class=\"col-3\">\n                      <img style=\"width: 64px; height: auto;\" [src]=\"plato.imagen\">\n                    </div>\n\n                    <div class=\"col-5\">\n                      {{ plato.nombre }}\n                    </div>\n\n                    <div class=\"col-1\" style=\"text-align: end; padding-right: 0px;\" (click)=\"editar_plato (plato)\">\n                      <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                    </div>\n\n                    <div class=\"col-1\" (click)=\"cambiar_estado_plato (plato)\">\n                      <nb-icon *ngIf=\"plato.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                      <nb-icon *ngIf=\"!plato.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                    </div>\n\n                    <div class=\"col-1\" (click)=\"eliminar_plato_validar (plato)\">\n                      <nb-icon status=\"danger\" icon=\"trash-2-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </div>\n\n                <nb-list-item style=\"background-color: #d4d3d1;\">\n                  Extras\n                  <nb-icon class=\"plus-button\" icon=\"plus-outline\" (click)=\"registrar_menu_dia (carta.data, null, dialog_menu_dia, 'extras')\"></nb-icon>\n                </nb-list-item>\n\n                <nb-list-item *ngFor=\"let menu_dia of get_menus (carta.data, null, 'extras')\">\n                  <div class=\"row\">\n                    <div class=\"col-10\">\n                      {{ menu_dia.stock }} Unid. - {{ menu_dia.menu_nombre }}<br>{{ menu_dia.precio | currency:'S/. ' }}\n                    </div>\n\n                    <div class=\"col-2\">\n                      <nb-icon (click)=\"eliminar_menu_dia (menu_dia)\" status=\"danger\" icon=\"close-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </nb-list-item>\n              </div>\n\n              <nb-list *ngIf=\"carta.data.tipo_carta === '2'\">\n                <nb-list-item *ngFor=\"let promocion of get_promociones_by_carta (carta.data.id)\">\n                  <div class=\"row\" style=\"display: contents;\">\n                    <div class=\"col-3\">\n                      <img style=\"width: 48px;\" *ngIf=\"promocion.tipo === '1'\"[src]=\"promocion.imagen\">\n                      <img style=\"width: 48px;\" *ngIf=\"promocion.tipo === '0'\"[src]=\"promocion.plato.imagen\">\n                    </div>\n                    <div class=\"col-7\">\n                      {{ promocion.nombre }} {{ promocion.precio_total }}\n                    </div>\n\n                    <div class=\"col-2\">\n                      <nb-icon status=\"danger\" (click)=\"eliminar_promocion (promocion)\" icon=\"close-outline\"></nb-icon>\n                    </div>\n                  </div>\n                </nb-list-item>\n              </nb-list>\n\n              <nb-card-footer style=\"display: inline-flex;\">\n                <button *ngIf=\"carta.data.tipo_carta === '2'\" title=\"Crear combo\" nbButton fullWidth size=\"small\" ghost (click)=\"abrir_registrar_promocion (dialog_registrar_promocion, carta.data)\">\n                  <nb-icon status=\"primary\" icon=\"plus-outline\"></nb-icon>\n                </button>\n\n                <button *ngIf=\"carta.data.tipo_carta === '0'\" nbButton fullWidth size=\"small\" ghost>\n                  <nb-icon status=\"primary\" icon=\"book-open-outline\"></nb-icon>\n                </button>\n\n                <button *ngIf=\"carta.data.tipo_carta === '1'\" nbButton fullWidth size=\"small\" ghost (click)=\"vista_registrar_plato (carta.data)\">\n                  <nb-icon status=\"primary\" icon=\"plus-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (carta.data, dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (carta.data)\">\n                  <nb-icon *ngIf=\"carta.data.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                  <nb-icon *ngIf=\"!carta.data.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"eliminar_carta_validar (carta)\">\n                  <nb-icon status=\"danger\" icon=\"trash-2-outline\"></nb-icon>\n                </button>\n              </nb-card-footer>\n            </nb-card>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n\n    <nb-card *ngIf=\"vista === 'registrar'\" [nbSpinner]=\"loading\">\n      <nb-card-header>\n        <div class=\"row align-items-center\">\n          <div class=\"col-1\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"regresar_principal ()\">\n              <nb-icon status=\"primary\" icon=\"arrow-ios-back-outline\"></nb-icon>\n            </button>\n          </div>\n\n          <div class=\"col-8\">\n            <h5 *ngIf=\"plato_editar === false\">Registrar Plato</h5>\n            <h5 *ngIf=\"plato_editar === true\">Editar Plato</h5>\n          </div>\n\n          <div class=\"col-3\">\n            <button nbButton status=\"success\" fullWidth (click)=\"submit_plato ()\" [disabled]=\"!form_plato.valid || para_agregar.length <= 0\">Continuar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-body>\n        <form [formGroup]=\"form_plato\">\n          <div class=\"row\">\n            <div class=\"col-6 offset-3\">\n              <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n                <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n              </div>\n\n              <div class=\"\" (click)=\"fileInput.click ()\">\n                <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n                <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"text\" min=\"1\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"resumen\" class=\"label\">Resumen:</label>\n            <textarea nbInput formControlName=\"resumen\" id=\"resumen\" fullWidth></textarea>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"descripcion\" class=\"label\">Descripcion:</label>\n            <textarea nbInput formControlName=\"descripcion\" id=\"descripcion\" fullWidth></textarea>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <div class=\"form-group\">\n                <label for=\"precio\" class=\"label\">Precio:</label>\n                <input type=\"number\" min=\"1\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n              </div>\n            </div>\n\n            <div class=\"col-6\">\n              <div class=\"form-group\">\n                <label for=\"orden\" class=\"label\">Orden:</label>\n                <input type=\"number\" min=\"1\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n              </div>\n            </div>\n          </div>\n\n          <!-- <nb-toggle formControlName=\"es_adicional\" labelPosition=\"start\">Es adicional</nb-toggle> -->\n          <!-- &nbsp; -->\n          <nb-toggle formControlName=\"habilitado\" labelPosition=\"start\">Habilitado</nb-toggle>\n        </form>\n      </nb-card-body>\n\n      <h5 style=\"margin-left: 1rem;\">Ingredientes</h5>\n\n      <div class=\"row\">\n        <div class=\"col-3\">\n          <input #autoInput\n            style=\"width: 100%; margin: 12px;\"\n            [(ngModel)]=\"search_text\"\n            nbInput\n            type=\"text\"\n            (ngModelChange)=\"onChange ()\"\n            placeholder=\"Buscar un insumo...\"/>\n\n          <div *ngFor=\"let item of insumos\" style=\"margin-left: 12px; padding: 6px;\">\n            <div class=\"row\">\n              <div class=\"col-8\">\n                {{ item.data.nombre }}\n              </div>\n\n              <div class=\"col-4\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"agregar_para_agregar (item.data)\">\n                  <nb-icon status=\"primary\" icon=\"arrowhead-right-outline\"></nb-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-9\" style=\"padding-right: 27px;\">\n          <table class=\"table table-bordered table-striped\" style=\"margin-top: 12px;\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Nombre</th>\n                <th scope=\"col\">Cantidad</th>\n                <th scope=\"col\">Unidad medida</th>\n                <th scope=\"col\"></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <tr *ngFor=\"let item of para_agregar\">\n                <td>\n                  {{ item.nombre }}\n                </td>\n\n                <td>\n                  <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n                </td>\n\n                <td>\n                  {{ item.unidad_medida }}\n                </td>\n\n                <td style=\"width: 12px;\">\n                  <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n                </td>\n              </tr>\n\n              <!-- <tr *ngIf=\"get_precio_total () > 0\">\n                <td colspan=\"3\">&nbsp;</td>\n                <td>\n                  {{ get_precio_total () | currency:'S/. ' }}\n                </td>\n                <td></td>\n              </tr> -->\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { DatabaseService } from '../../services/database.service';\nimport * as moment from 'moment';\nimport { first } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngx-estadisticas',\n  templateUrl: './estadisticas.component.html',\n  styleUrls: ['./estadisticas.component.scss']\n})\nexport class EstadisticasComponent implements OnInit {\n  tipo: string;\n  loading: boolean = false;\n\n  empresas: any [] = [];\n  meses: any [] = ['01', '02', '03', '04', '05', '06',\n                   '07', '08', '09', '10', '11', '12']\n  empresas_map: Map <string, any> = new Map <string, any> ();\n  gastos_map: Map <string, any> = new Map <string, any> ();\n  ingresos_map: Map <string, any> = new Map <string, any> ();\n  tipo_reporte: string = 'diario';\n  tipo_filtro: string = 'ingresos';\n  fecha_seleccionada: string = moment ().format ('YYYY[-]MM[-]DD');\n  mes_seleccionado: string = moment ().format ('MM');\n  anio_seleccionado: string = moment ().format ('YYYY');\n  empresa_seleccionada: any;\n  ventas_total: number = 0;\n  compras_total: number = 0;\n  constructor (\n    private route: ActivatedRoute,\n    private database: DatabaseService\n  ) { }\n\n  ngOnInit(): void {\n    this.tipo = this.route.snapshot.paramMap.get ('tipo');\n    console.log (this.tipo);\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.empresas = res;\n\n      if (res.length > 0) {\n        this.empresa_seleccionada = res [0].id;\n      }\n\n      res.forEach ((empresa: any) => {\n        this.empresas_map [empresa.id] = empresa;\n      });\n\n      this.mostrar_estadisticas ();\n    });\n  }\n\n  async mostrar_estadisticas () {\n    this.loading = true;\n    this.ventas_total = 0;\n    this.compras_total = 0;\n    this.gastos_map.clear ();\n    this.ingresos_map.clear ();\n\n    if (this.tipo_reporte === 'diario') {\n      const empresa: any = this.empresas_map [this.empresa_seleccionada];\n      const dia = this.fecha_seleccionada.split ('-') [2]\n      const mes = this.fecha_seleccionada.split ('-') [1]\n      const anio = this.fecha_seleccionada.split ('-') [0]\n\n      let res: any [] = await this.database.get_ingresos_insumo_empresa_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      res.forEach ((insumo: any) => {\n        if (this.gastos_map.has (insumo.insumo_id)) {\n          this.gastos_map.get (insumo.insumo_id).cantidad += insumo.cantidad;\n          this.gastos_map.get (insumo.insumo_id).precio += insumo.precio * insumo.cantidad;\n        } else {\n          this.gastos_map.set (insumo.insumo_id, {\n            nombre: insumo.nombre,\n            cantidad: insumo.cantidad,\n            precio: insumo.precio * insumo.cantidad\n          });\n        }\n      });\n\n      this.gastos_map.forEach ((value: any) => {\n        this.compras_total += value.precio;\n      });\n\n      res = await this.database.get_pedidos_platos_dia_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      console.log (res);\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'extra') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'menu') {\n              if (this.ingresos_map.has (plato.carta_id)) {\n                this.ingresos_map.get (plato.carta_id).cantidad += 1;\n                this.ingresos_map.get (plato.carta_id).precio += plato.precio;\n              } else {\n                this.ingresos_map.set (plato.carta_id, {\n                  nombre: plato.menu_nombre,\n                  cantidad: 1,\n                  precio: plato.precio,\n                  tipo: 'Menu'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '0') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '1') {\n              plato.platos.forEach ((element: any) => {\n                if (this.ingresos_map.has (element.id)) {\n                  this.ingresos_map.get (element.id).cantidad += plato.cantidad;\n                  this.ingresos_map.get (element.id).precio += element.precio * plato.cantidad;\n                } else {\n                  this.ingresos_map.set (element.id, {\n                    nombre: element.nombre,\n                    cantidad: plato.cantidad,\n                    precio: element.precio * plato.cantidad,\n                    tipo: 'Plato'\n                  });\n                }\n              });\n            }\n          }\n        });\n      });\n\n      res = await this.database.get_restaurante_pedidos_dia (empresa.id, dia, mes, anio).pipe (first ()).toPromise ();\n      // console.log (res);\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'plato') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            }\n          }\n        });\n      });\n\n      // console.log (this.ingresos_map);\n      this.ingresos_map.forEach ((value: any) => {\n        this.ventas_total += value.precio;\n      });\n\n      this.loading = false;\n    } else if (this.tipo_reporte === 'mensual') {\n      const empresa: any = this.empresas_map [this.empresa_seleccionada];\n\n      if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n        if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_vendido_' + this.mes_seleccionado)) {\n          this.ventas_total = empresa ['resumen_' + this.anio_seleccionado] ['monto_vendido_' + this.mes_seleccionado];\n        } else {\n          this.ventas_total = 0;\n        }\n      } else {\n        this.ventas_total = 0;\n      }\n\n      if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n        if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_comprado_' + this.mes_seleccionado)) {\n          this.compras_total = empresa ['resumen_' + this.anio_seleccionado] ['monto_comprado_' + this.mes_seleccionado];\n        } else {\n          this.compras_total = 0;\n        }\n      } else {\n        this.compras_total = 0;\n      }\n\n      let res: any [] = await this.database.get_ingresos_insumo_empresa_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((insumo: any) => {\n        if (this.gastos_map.has (insumo.insumo_id)) {\n          this.gastos_map.get (insumo.insumo_id).cantidad += insumo.cantidad;\n          this.gastos_map.get (insumo.insumo_id).precio += insumo.precio * insumo.cantidad;\n        } else {\n          this.gastos_map.set (insumo.insumo_id, {\n            nombre: insumo.nombre,\n            cantidad: insumo.cantidad,\n            precio: insumo.precio * insumo.cantidad\n          });\n        }\n      });\n\n      res = await this.database.get_pedidos_platos_dia_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'extra') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'menu') {\n              if (this.ingresos_map.has (plato.carta_id)) {\n                this.ingresos_map.get (plato.carta_id).cantidad += 1;\n                this.ingresos_map.get (plato.carta_id).precio += plato.precio;\n              } else {\n                this.ingresos_map.set (plato.carta_id, {\n                  nombre: plato.menu_nombre,\n                  cantidad: 1,\n                  precio: plato.precio,\n                  tipo: 'Menu'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '0') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.plato_nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            } else if (plato.tipo === 'promocion' && plato.promocion_tipo === '1') {\n              plato.platos.forEach ((element: any) => {\n                if (this.ingresos_map.has (element.id)) {\n                  this.ingresos_map.get (element.id).cantidad += plato.cantidad;\n                  this.ingresos_map.get (element.id).precio += element.precio * plato.cantidad;\n                } else {\n                  this.ingresos_map.set (element.id, {\n                    nombre: element.nombre,\n                    cantidad: plato.cantidad,\n                    precio: element.precio * plato.cantidad,\n                    tipo: 'Plato'\n                  });\n                }\n              });\n            }\n          }\n        });\n      });\n\n      res = await this.database.get_restaurante_pedidos_mes (empresa.id, this.mes_seleccionado, this.anio_seleccionado).pipe (first ()).toPromise ();\n      res.forEach ((pedido: any) => {\n        pedido.platos.forEach ((plato: any) => {\n          if (empresa.id === plato.empresa_id) {\n            if (plato.tipo === 'plato') {\n              if (this.ingresos_map.has (plato.plato_id)) {\n                this.ingresos_map.get (plato.plato_id).cantidad += plato.cantidad;\n                this.ingresos_map.get (plato.plato_id).precio += plato.precio * plato.cantidad;\n              } else {\n                this.ingresos_map.set (plato.plato_id, {\n                  nombre: plato.nombre,\n                  cantidad: plato.cantidad,\n                  precio: plato.precio * plato.cantidad,\n                  tipo: 'Plato'\n                });\n              }\n            }\n          }\n        });\n      });\n\n      this.loading = false;\n    } else if (this.tipo_reporte === 'anual') {\n      // const empresa: any = this.empresas_map [this.empresa_seleccionada];\n      // console.log (empresa);\n      // this.ventas_total = 0;\n      // this.compras_total = 0;\n      // if (this.validar_valor (empresa, 'resumen_' + this.anio_seleccionado)) {\n      //   this.meses.forEach ((mes: any) => {\n      //     if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_vendido_' + mes)) {\n      //       this.ventas_total += empresa ['resumen_' + this.anio_seleccionado] ['monto_vendido_' + mes];\n      //     }\n\n      //     if (this.validar_valor (empresa ['resumen_' + this.anio_seleccionado], 'monto_comprado_' + mes)) {\n      //       this.compras_total += empresa ['resumen_' + this.anio_seleccionado] ['monto_comprado_' + mes];\n      //     }\n      //   });\n      // }\n\n      // let res: any [] = await this.database.get_ingresos_insumo_empresa_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // console.log (res);\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'egreso',\n      //     cantidad: i.cantidad,\n      //     precio: i.precio,\n      //     nombre: i.nombre,\n      //     tipo_comprobante: i.tipo_comprobante,\n      //     nro_comprobante: i.nro_comprobante,\n      //     fecha: i.fecha\n      //   });\n      // });\n\n      // res = await this.database.get_pedidos_platos_dia_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'ingreso',\n      //     cantidad: i.platos.length,\n      //     precio: i.monto_total,\n      //     nombre: 'App Pedido',\n      //     tipo_comprobante: 'ninguno',\n      //     nro_comprobante: '',\n      //     fecha: i.fecha.substring (0, 10)\n      //   });\n      // });\n\n      // res = await this.database.get_restaurante_pedidos_anio (empresa.id, this.anio_seleccionado).pipe (first ()).toPromise ();\n      // res.forEach ((i: any) => {\n      //   this.lista.push ({\n      //     tipo: 'ingreso',\n      //     cantidad: i.platos.length,\n      //     precio: i.monto_total,\n      //     nombre: 'Restaurante Pedido',\n      //     tipo_comprobante: i.tipo_comprobante,\n      //     nro_comprobante: '',\n      //     fecha: i.fecha\n      //   });\n      // });\n\n      this.loading = false;\n    }\n  }\n\n  validar_valor (object: any, value: string) {\n    if (object [value] === null || object [value] === undefined) {\n      return false;\n    }\n\n    return true;\n  }\n\n  tipo_reporte_changed () {\n    if (this.tipo_reporte === 'diario') {\n      this.fecha_seleccionada = moment ().format ('YYYY[-]MM[-]DD');\n    } else if (this.tipo_reporte === 'mensual') {\n      this.mes_seleccionado = moment ().format ('MM');\n      this.anio_seleccionado = moment ().format ('YYYY');\n    } else if (this.tipo_reporte === 'anual') {\n      this.anio_seleccionado = moment ().format ('YYYY');\n    }\n\n    this.mostrar_estadisticas ();\n  }\n\n  capitalize (name: string) {\n    if (name === undefined || name === null) {\n      return '';\n    }\n\n    return name.charAt (0).toUpperCase () + name.slice (1);\n  }\n\n  get_ganancia () {\n    return this.ventas_total - this.compras_total;\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-header>\n        Tipo:\n        &nbsp;\n        &nbsp;\n        <nb-select placeholder=\"Seleccione una opcion\" (selectedChange)=\"tipo_reporte_changed ()\" [(ngModel)]=\"tipo_reporte\">\n          <nb-option value=\"diario\">Reporte diario</nb-option>\n          <nb-option value=\"mensual\">Reporte mensual</nb-option>\n          <nb-option value=\"anual\">Reporte anual</nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <ng-container *ngIf=\"tipo_reporte === 'diario'\">\n          Fecha:\n          &nbsp;\n          &nbsp;\n          <input nbInput  size=\"tiny\" type=\"date\" (change)=\"mostrar_estadisticas ()\" [(ngModel)]=\"fecha_seleccionada\">\n        </ng-container>\n\n        <ng-container *ngIf=\"tipo_reporte === 'mensual'\">\n          Mes:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"mes_seleccionado\">\n            <nb-option value=\"01\">Enero</nb-option>\n            <nb-option value=\"02\">Febrero</nb-option>\n            <nb-option value=\"03\">Marzo</nb-option>\n            <nb-option value=\"04\">Abril</nb-option>\n            <nb-option value=\"05\">Mayo</nb-option>\n            <nb-option value=\"06\">Junio</nb-option>\n            <nb-option value=\"07\">Julio</nb-option>\n            <nb-option value=\"08\">Agosto</nb-option>\n            <nb-option value=\"09\">Septiembre</nb-option>\n            <nb-option value=\"10\">Obtumbre</nb-option>\n            <nb-option value=\"11\">Noviembre</nb-option>\n            <nb-option value=\"12\">Diciembre</nb-option>\n          </nb-select>\n          &nbsp;\n          &nbsp;\n          Año:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"anio_seleccionado\">\n            <nb-option value=\"2020\">2020</nb-option>\n            <nb-option value=\"2021\">2021</nb-option>\n            <nb-option value=\"2022\">2022</nb-option>\n            <nb-option value=\"2023\">2023</nb-option>\n            <nb-option value=\"2024\">2024</nb-option>\n            <nb-option value=\"2025\">2025</nb-option>\n          </nb-select>\n        </ng-container>\n\n        <ng-container *ngIf=\"tipo_reporte === 'anual'\">\n          Año:\n          &nbsp;\n          &nbsp;\n          <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"anio_seleccionado\">\n            <nb-option value=\"2020\">2020</nb-option>\n            <nb-option value=\"2021\">2021</nb-option>\n            <nb-option value=\"2022\">2022</nb-option>\n            <nb-option value=\"2023\">2023</nb-option>\n            <nb-option value=\"2024\">2024</nb-option>\n            <nb-option value=\"2025\">2025</nb-option>\n          </nb-select>\n        </ng-container>\n        &nbsp;\n        &nbsp;\n        Empresa:\n        &nbsp;\n        &nbsp;\n        <nb-select (selectedChange)=\"mostrar_estadisticas ()\" [(ngModel)]=\"empresa_seleccionada\">\n          <nb-option *ngFor=\"let empresa of empresas\" [value]=\"empresa.id\">\n            {{ empresa.nombre }}\n          </nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <nb-card-header>\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <nb-card accent=\"primary\">\n              <nb-card-header>Ingresos</nb-card-header>\n              <nb-card-body>\n                <h2>{{ ventas_total | currency:'S/. ' }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n\n          <div class=\"col-4\">\n            <nb-card accent=\"danger\">\n              <nb-card-header>Gastos</nb-card-header>\n              <nb-card-body>\n                <h2>{{ compras_total | currency:'S/. '  }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n\n          <div class=\"col-4\">\n            <nb-card accent=\"success\">\n              <nb-card-header>Ganancias</nb-card-header>\n              <nb-card-body>\n                <h2>{{ get_ganancia () | currency:'S/. ' }}</h2>\n              </nb-card-body>\n            </nb-card>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-card-header>\n        <nb-select [(ngModel)]=\"tipo_filtro\">\n          <nb-option value=\"ingresos\">Ingresos</nb-option>\n          <nb-option value=\"gastos\">Gastos</nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <nb-card-body *ngIf=\"tipo_filtro === 'gastos'\">\n        <div class=\"row\" style=\"padding: 6px; font-weight:bold; border-bottom:1px solid #666;\">\n          <div class=\"col\">Nombre</div>\n          <div class=\"col\">Cantidad</div>\n          <div class=\"col\">Monto (S/)</div>\n          <div class=\"col\">Historial</div>\n        </div>\n\n        <div class=\"row\" *ngFor=\"let item of gastos_map | keyvalue\" style=\"align-items: center; padding: 6px; border-bottom:1px solid #CCC;\">\n          <div class=\"col\">\n            {{ item.value.nombre }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.cantidad }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.precio | currency:'S/ ' }}\n          </div>\n\n          <div class=\"col\">\n            <button nbButton size=\"tiny\" ghost status=\"primary\">Ver historial</button>\n          </div>\n        </div>\n      </nb-card-body>\n\n      <nb-card-body *ngIf=\"tipo_filtro === 'ingresos'\">\n        <div class=\"row\" style=\"padding: 6px; font-weight:bold; border-bottom:1px solid #666;\">\n          <div class=\"col\">Nombre</div>\n          <div class=\"col\">Tipo</div>\n          <div class=\"col\">Cantidad</div>\n          <div class=\"col\">Monto (S/)</div>\n          <div class=\"col\">Historial</div>\n        </div>\n\n        <div class=\"row\" *ngFor=\"let item of ingresos_map | keyvalue\" style=\"align-items: center; padding: 6px; border-bottom:1px solid #CCC;\">\n          <div class=\"col\">\n            {{ item.value.nombre }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.tipo }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.cantidad }}\n          </div>\n\n          <div class=\"col\">\n            {{ item.value.precio | currency:'S/ ' }}\n          </div>\n\n          <div class=\"col\">\n            <button nbButton size=\"tiny\" ghost status=\"primary\">Ver historial</button>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Servicios\nimport { AuthService } from '../../services/auth.service';\nimport { DatabaseService } from '../../services/database.service';\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-gestion-cambios-devoluciones',\n  templateUrl: './gestion-cambios-devoluciones.component.html',\n  styleUrls: ['./gestion-cambios-devoluciones.component.scss']\n})\nexport class GestionCambiosDevolucionesComponent implements OnInit {\n  es_usuario_valido: boolean = false;\n  form: FormGroup;\n  pos: any [] = [];\n  instancias: any = [];\n  pos_seleccionado;\n  fecha_seleccionada: string = '';\n  codigo: string = '';\n\n  venta: any = {\n    productos: []\n  };\n  lista_devolucion: Map <string, any> = new Map <string, any> ();\n  constructor (private auth: AuthService, private database: DatabaseService) { }\n\n  ngOnInit (): void {\n    this.form = new FormGroup ({\n      email: new FormControl ('', [Validators.required, Validators.email]),\n      password: new FormControl ('', Validators.required)\n    });\n\n    if (this.auth.usuario.tipo === 0) {\n      this.es_usuario_valido = true;\n    }\n\n    this.database.get_usuarios_by_tipo (-2).subscribe ((res: any []) => {\n      this.pos = res;\n    });\n  }\n\n  validar_usuario () {\n    this.database.validar_admin_is_valid (this.form.value.email, this.form.value.password).then ((res: any []) => {\n      if (res.length > 0) {\n        this.es_usuario_valido = true;\n      } else {\n        alert ('Este usuario no exixte o no tiene los permisos necesarios');\n      }\n    });\n  }\n\n  buscar_venta () {\n    const id = this.pos_seleccionado.id + moment (this.fecha_seleccionada).format ('[-]DD[-]MM[-]YYYY');\n    this.database.get_venta_by_pos (id, this.codigo).subscribe ((res: any) => {\n      this.venta = res;\n    });\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_total_lista (productos: any []) {\n    let total: number = 0;\n\n    productos.forEach ((producto: any) => {\n      total += producto.cantidad * producto.precio;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  verificar_producto (checked: any, item: any) {\n    console.log (checked);\n\n    if (checked.target.checked === true) {\n      this.lista_devolucion.set (item.id, item);\n    } else {\n      if (this.lista_devolucion.has (item.id)) {\n        this.lista_devolucion.delete (item.id);\n      }\n    }\n\n    console.log (this.lista_devolucion);\n  }\n\n  get_total_devolucion () {\n    let total: number = 0;\n\n    this.lista_devolucion.forEach ((producto: any) => {\n      total += producto.devolucion * producto.precio;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  generar () {\n    let productos: any [] = [];\n    this.lista_devolucion.forEach ((producto: any) => {\n      productos.push (producto);\n    });\n\n    let data: any = {\n      productos: productos,\n      total: this.get_total_devolucion (),\n      fecha: moment ().format ('L'),\n      hora: moment ().format ('h:mm'),\n      id: this.database.createId (),\n    }\n\n    console.log (data);\n\n    this.database.add_nota_credito (data).then ((_: any) => {\n      alert ('Nota de credito: ' + data.id);\n    }).catch ((error: any) => {\n      console.log (error);\n    });\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card *ngIf=\"es_usuario_valido\">\n      <nb-card-header>\n        POS:\n        &nbsp;\n        &nbsp;\n        <nb-select [(ngModel)]=\"pos_seleccionado\" placeholder=\"Seleccione una opcion\">\n          <nb-option *ngFor=\"let item of pos\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        Fecha:\n        &nbsp;\n        &nbsp;\n        <input type=\"date\" [(ngModel)]=\"fecha_seleccionada\" nbInput>\n        &nbsp;\n        &nbsp;\n        Codigo:\n        &nbsp;\n        &nbsp;\n        <input type=\"text\" nbInput [(ngModel)]=\"codigo\">\n        &nbsp;\n        &nbsp;\n        <button nbButton (click)=\"buscar_venta ()\">Buscar</button>\n      </nb-card-header>\n      <br>\n      <h6 *ngIf=\"venta?.id !== undefined\" style=\"margin-left: 1rem;\">Lista de productos</h6>\n      <table *ngIf=\"venta?.id !== undefined\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of venta?.productos\">\n            <td>\n              <nb-checkbox (change)=\"verificar_producto ($event, item)\" status=\"basic\">\n                Devolver\n              </nb-checkbox>\n            </td>\n            <td>\n              {{ venta.hora }}\n            </td>\n            <td>\n              {{ item.nombre }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.cantidad }}\n            </td>\n            <td>\n              {{ venta.cajero_nombre }}\n            </td>\n            <td>\n              {{ item.precio | currency:'S/. ' }}\n            </td>\n            <td>\n              {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"6\">Total:</td><td class=\"right\">{{ get_total_lista (venta?.productos) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <br>\n      <h6 *ngIf=\"lista_devolucion.size > 0\" style=\"margin-left: 1rem;\">Devolver</h6>\n      <table *ngIf=\"lista_devolucion.size > 0\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Devolucion</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of lista_devolucion | keyvalue\">\n            <td>\n              {{ item.value.nombre }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.cantidad }}\n            </td>\n            <td class=\"text-center\">\n              <input type=\"number\" [(ngModel)]=\"item.value.devolucion\" [max]=\"item.value.cantidad\" min=\"0\">\n            </td>\n\n            <td>\n              {{ item.value.precio | currency:'S/. ' }}\n            </td>\n            <td>\n              {{ get_total_format (item.value.precio * item.value.devolucion) | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"4\">Total:</td><td class=\"right\">{{ get_total_devolucion () | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <nb-card-footer *ngIf=\"get_total_devolucion () > 0\">\n        <button nbButton (click)=\"generar ()\">Generar nota de credito</button>\n      </nb-card-footer>\n    </nb-card>\n\n    <nb-card *ngIf=\"es_usuario_valido === false\">\n      <nb-card-body>\n        <form [formGroup]=\"form\" (ngSubmit)=\"validar_usuario ()\">\n          <div style=\"display: grid;\" class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"email\" nbInput formControlName=\"email\" placeholder=\"Correo\">\n          </div>\n\n          <div style=\"display: grid;\" class=\"form-group\">\n            <label for=\"nombre\" class=\"label\">Nombre:</label>\n            <input type=\"password\" nbInput formControlName=\"password\" placeholder=\"Contraseña\">\n          </div>\n        </form>\n      </nb-card-body>\n      <nb-card-footer>\n        <button nbButton (click)=\"validar_usuario ()\" [disabled]=\"form.invalid\">Ingresar</button>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-categorias',\n  templateUrl: './gestionar-categorias.component.html',\n  styleUrls: ['./gestionar-categorias.component.scss']\n})\nexport class GestionarCategoriasComponent implements OnInit {\n  form: FormGroup;\n  loading: boolean = true;\n  file: any =  null;\n  avatar_preview: any = null;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Imagen', 'Productos', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>,\n    private af_storage: AngularFireStorage,\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      console.log (res);\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {},\n      };\n      data.data ['data'] = i;\n      data.data ['Imagen'] = i.imagen;\n      data.data ['Nombre'] = i.nombre;\n      data.data ['Productos'] = i.cantidad_productos;\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    console.log (returned);\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  validURL (str: string) {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n      '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n    return !!pattern.test(str);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_tienda_categoria (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true, dialog);\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.cantidad_productos = 0;\n\n      if (this.file == null) {\n        this.database.add_tienda_categoria (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, false, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = 'Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.imagen = downloadURL;\n\n        if (editar) {\n          this.database.update_tienda_categoria (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        } else {\n          this.database.add_tienda_categoria (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    if (dialog !== null || dialog !== undefined) {\n      this.form.reset ();\n      this.dialogService.open (dialog, { context: false });\n    }\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.avatar_preview = item.imagen;\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.avatar_preview = null;\n    this.file = null;\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n      console.log (error);\n    };\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n        <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n      </div>\n\n      <div class=\"\" (click)=\"fileInput.click ()\">\n        <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n        <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n      </div>\n      <br>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Categorias</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar categoria...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <ng-container *ngIf=\"row.data [column] !== 'accion'\">\n                <ng-container *ngIf=\"column === 'Imagen'\">\n                  <img [src]=\"row.data [column]\">\n                </ng-container>\n                <ng-container *ngIf=\"column !== 'Imagen'\">\n                  {{ row.data [column] }}\n                </ng-container>\n              </ng-container>\n\n              <ng-container *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </ng-container>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-marcas',\n  templateUrl: './gestionar-marcas.component.html',\n  styleUrls: ['./gestionar-marcas.component.scss']\n})\nexport class GestionarMarcasComponent implements OnInit {\n  form: FormGroup;\n  avatar_preview: any = null;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Productos', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_tienda_marcas ().subscribe ((res: any []) => {\n      console.log (res);\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {},\n      };\n      data.data ['data'] = i;\n      data.data ['Nombre'] = i.nombre;\n      data.data ['Productos'] = i.cantidad_productos;\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    console.log (returned);\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_tienda_marca (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      data.cantidad_productos = 0;\n      this.database.add_tienda_marca (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Marcas</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar marcas...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                {{ row.data [column] }}\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'ngx-gestionar-mesas',\n  templateUrl: './gestionar-mesas.component.html',\n  styleUrls: ['./gestionar-mesas.component.scss']\n})\nexport class GestionarMesasComponent implements OnInit {\n  subscribe_01: any;\n  items: any [] = [];\n  is_loading: boolean = true;\n  show_nuevo: boolean = false;\n  is_nuevo_loading: boolean = false;\n  nuevo: string = \"\";\n  empresa_id: string;\n\n  constructor(private database: DatabaseService, private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.empresa_id = this.route.snapshot.paramMap.get ('id');\n\n    this.subscribe_01 = this.database.get_mesas_empresas (this.empresa_id).subscribe ((response: any []) => {\n      this.items = response.reverse ();\n      this.is_loading = false;\n    });\n  }\n\n  ngOnDestroy () {\n    if (this.subscribe_01 !== null && this.subscribe_01 !== undefined) {\n      this.subscribe_01.unsubscribe ();\n    }\n  }\n\n  eliminar (item: any) {\n    var opcion = confirm(\"Eliminar?\");\n    if (opcion == true) {\n      this.database.delete_mesa (item);\n    } else {\n      console.log (\"Cancelar\");\n    }\n  }\n\n  editar (item: any) {\n    item.edit = true;\n  }\n\n  cancel (item: any) {\n    item.edit = false;\n  }\n\n  guardar (item: any) {\n    let nombre = (<HTMLInputElement> document.getElementById (item.id)).value;\n\n    if (nombre !== \"\") {\n      item.nombre = nombre;\n\n      this.database.update_mesa (item)\n        .then (() => {\n          console.log (\"Actualizado\");\n          item.edit = false;\n        })\n        .catch ((error) => {\n          console.log (\"error\", error);\n          item.edit = false;\n        });\n    } else {\n    }\n  }\n\n  cancel_nuevo () {\n    this.show_nuevo = false;\n    this.nuevo = \"\";\n  }\n\n  guardar_nuevo () {\n    if (this.nuevo != \"\") {\n      this.is_nuevo_loading = true;\n\n      let item: any = {\n        id: this.database.createId (),\n        empresa_id: this.empresa_id,\n        nombre: this.nuevo,\n        habilitado: true,\n        fecha_agregada: new Date ().toISOString ()\n      };\n\n      this.database.add_mesa (item)\n        .then (() => {\n          this.nuevo = \"\";\n          this.show_nuevo = false;\n          this.is_nuevo_loading = false;\n        })\n        .catch (error => {\n\n        });\n    } else {\n\n    }\n  }\n\n  agregar_nuevo () {\n    this.show_nuevo = true;\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        <div class=\"row\">\n          <div class=\"col-10\">\n            {{ items.length }} Mesas\n          </div>\n\n          <div class=\"col-2\">\n            <button nbButton fullWidth size=\"tiny\" (click)=\"agregar_nuevo ()\">Agregar</button>\n          </div>\n        </div>\n      </nb-card-header>\n\n      <nb-list>\n        <nb-list-item *ngIf=\"show_nuevo\" [nbSpinner]=\"is_nuevo_loading\" nbSpinnerStatus=\"primary\">\n          <div class=\"row\" style=\"width: 100%;\">\n            <div class=\"col-8 align-self-center\">\n              <input type=\"text\" fieldSize=\"small\" nbInput fullWidth placeholder=\"Nombre\" [(ngModel)]=\"nuevo\">\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"danger\" (click)=\"cancel_nuevo ()\">Cancelar</button>\n            </div>\n\n            <div class=\"col-2  align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"success\" [disabled]=\"nuevo === ''\" (click)=\"guardar_nuevo ()\">Guardar</button>\n            </div>\n          </div>\n        </nb-list-item>\n\n        <nb-list-item *ngFor=\"let item of items\">\n          <div class=\"row\" style=\"width: 100%;\" *ngIf=\"item.edit === false || item.edit === undefined\">\n            <div class=\"col-8 align-self-center\">\n              {{ item.nombre }}\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton fullWidth size=\"tiny\" ghost (click)=\"editar (item)\">\n                <nb-icon icon=\"edit-outline\"></nb-icon>Editar\n              </button>\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton status=\"danger\" fullWidth size=\"tiny\" ghost (click)=\"eliminar (item)\"><nb-icon icon=\"trash-outline\"></nb-icon>Eliminar</button>\n            </div>\n          </div>\n\n          <div class=\"row\" style=\"width: 100%;\" *ngIf=\"item.edit === true\">\n            <div class=\"col-8 align-self-center\">\n              <input type=\"text\" [id]=\"item.id\" [value]=\"item.nombre\" fieldSize=\"small\" nbInput fullWidth placeholder=\"Nombre\">\n            </div>\n\n            <div class=\"col-2 align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"danger\" (click)=\"cancel (item)\">Cancelar</button>\n            </div>\n\n            <div class=\"col-2  align-self-center\">\n              <button nbButton size=\"tiny\" fullWidth status=\"success\" (click)=\"guardar (item)\">Guardar</button>\n            </div>\n          </div>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-gestionar-productos',\n  templateUrl: './gestionar-productos.component.html',\n  styleUrls: ['./gestionar-productos.component.scss']\n})\nexport class GestionarProductosComponent implements OnInit {\n  categorias: any [] = [];\n  subcategorias: any [] = [];\n  _subcategorias: any [] = [];\n  productos: any [] = [];\n  marcas: any [] = [];\n  producto_seleccionado: any;\n  form: FormGroup;\n  form_movimiento: FormGroup;\n  loading: boolean = false;\n  file: any =  null;\n  avatar_preview: any = null;\n  productos_para_registrar: any [] = [];\n\n  categorias_subscribe: any = null;\n  marcas_subscribe: any = null;\n  subcategorias_subscribe: any = null;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'SKU', 'Imagen', 'Categoria', 'Sub Categoria', 'Marca', 'Precio', 'Stock', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  selectedItem: any;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>,\n    private af_storage: AngularFireStorage,\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      sku: new FormControl (''),\n      nombre: new FormControl ('', [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required]),\n      subcategoria_id: new FormControl ('', [Validators.required]),\n      marca_id: new FormControl (0),\n      precio_compra: new FormControl ('', [Validators.required]),\n      precio_venta: new FormControl ('', [Validators.required]),\n      medida: new FormControl ('', [Validators.required]),\n    });\n\n    this.form_movimiento = new FormGroup ({\n      fecha: new FormControl ('', [Validators.required]),\n      anio: new FormControl ('', [Validators.required]),\n      mes: new FormControl ('', [Validators.required]),\n      dia: new FormControl ('', [Validators.required]),\n      tipo_comprobante: new FormControl ('boleta'),\n      nro_comprobante: new FormControl (''),\n    });\n\n    this.categorias_subscribe = this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      this.categorias = res;\n      if (res.length > 0) {\n        this.selectedItem = res [0];\n        this.categoriaSelected (this.selectedItem);\n      }\n      this.check_loading ();\n    });\n\n    this.marcas_subscribe = this.database.get_tienda_marcas ().subscribe ((res: any) => {\n      this.marcas = res;\n      this.check_loading ();\n    });\n\n    this.subcategorias_subscribe = this.database.get_tienda_sub_categorias ().subscribe ((res: any) => {\n      this._subcategorias = res;\n      this.check_loading ();\n    });\n  }\n\n  check_loading () {\n    if (this.categorias_subscribe !== null && this.marcas_subscribe !== null && this.subcategorias_subscribe !== null) {\n      this.database.get_tienda_productos ().subscribe ((res: any []) => {\n        this.loading = false;\n        this.productos = res;\n        console.log (res);\n      });\n    }\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {\n        data: {}\n      };\n      data.data ['data'] = i;\n      if (i.sku !== undefined) {\n        data.data ['SKU'] = i.sku;\n      }\n\n      data.data ['Imagen'] = i.imagen;\n      data.data ['Nombre'] = i.nombre;\n\n      data.data ['Categoria'] = this.categorias.find ((x => x.id === i.categoria_id)).nombre;\n      data.data ['Sub Categoria'] = this._subcategorias.find ((x => x.id === i.subcategoria_id)).nombre;\n      if (i.marca_id !== null) {\n        data.data ['Marca'] = this.marcas.find ((x => x.id === i.marca_id)).nombre;\n      }\n      data.data ['Precio'] = i.precio_venta;\n      data.data ['Stock'] = i.stock;\n\n      data.data ['Acciones'] = 'accion';\n      returned.push (data);\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_tienda_producto (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, true, dialog);\n      }\n    } else {\n      data.id = this.database.createId ();\n      data.stock = 0;\n      data.habilitado = true;\n\n      if (this.file == null) {\n        this.database.add_tienda_producto (data)\n          .then (() => {\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            dialog.close ();\n            this.form.reset ();\n            this.loading = false;\n            this.avatar_preview = null;\n            this.file = null;\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, false, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, editar: boolean = false, dialog: any) {\n    const filePath = 'Platos/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n        data.imagen = downloadURL;\n        if (editar) {\n          this.database.update_tienda_producto (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        } else {\n          this.database.add_tienda_producto (data)\n            .then (() => {\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              dialog.close ();\n              this.form.reset ();\n              this.loading = false;\n              this.avatar_preview = null;\n              this.file = null;\n            });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.onCategoriaSelected (item.categoria_id);\n    this.avatar_preview = item.imagen;\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.avatar_preview = null;\n    this.file = null;\n    this.form.reset ();\n  }\n\n  onCategoriaSelected (categoria_id: string) {\n    this.loading = true;\n    this.database.get_tienda_sub_categorias_by_categoria (categoria_id).subscribe ((res: any []) => {\n      this.subcategorias = res;\n      this.loading = false;\n    });\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64 (file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n      console.log (error);\n    };\n  }\n\n  fecha_cambio () {\n    this.form_movimiento.controls ['anio'].setValue (moment (this.form.value.fecha).format ('YYYY'));\n    this.form_movimiento.controls ['mes'].setValue (moment (this.form.value.fecha).format ('MM'));\n    this.form_movimiento.controls ['dia'].setValue (moment (this.form.value.fecha).format ('DD'));\n  }\n\n  open_registrar_movimiento_dialog (dialog: any) {\n    this.form_movimiento.reset ();\n    this.form_movimiento.controls ['tipo_comprobante'].setValue ('boleta');\n    this.form_movimiento.controls ['nro_comprobante'].setValue ('');\n\n    this.dialogService.open (dialog);\n  }\n\n  selectProducto (producto: any) {\n    let p = this.productos.find (x => x.id === producto);\n\n    if (this.productos_para_registrar.find (x => x.id === p.id) === undefined) {\n      this.productos_para_registrar.push ({\n        id: p.id,\n        nombre: p.nombre,\n        cantidad: 0,\n        precio: p.precio_venta\n      });\n    }\n\n    this.producto_seleccionado = '';\n  }\n\n  get_precio_total () {\n    let total: number = 0;\n\n    this.productos_para_registrar.forEach ((i: any) => {\n      total += i.cantidad * i.precio;\n    });\n\n    return total;\n  }\n\n  remove (item: any) {\n    for( var i = 0; i < this.productos_para_registrar.length; i++) {\n      if ( this.productos_para_registrar[i].id === item.id) {\n        this.productos_para_registrar.splice(i, 1);\n      }\n    }\n  }\n\n  registrar_ingresos_insumo (dialog: any) {\n    this.productos_para_registrar.forEach ((i: any) => {\n      i.fecha = this.form_movimiento.value.fecha,\n      i.anio = this.form_movimiento.value.anio,\n      i.mes = this.form_movimiento.value.mes,\n      i.dia = this.form_movimiento.value.dia,\n      i.tipo_comprobante = this.form_movimiento.value.tipo_comprobante,\n      i.nro_comprobante = this.form_movimiento.value.nro_comprobante\n    });\n\n    console.log (this.productos_para_registrar);\n\n    this.database.add_ingresos_tieda_producto (this.productos_para_registrar)\n      .then (() => {\n        this.productos_para_registrar = [];\n        dialog.close ();\n      })\n      .catch ((error: any) => {\n        console.log (error);\n      });\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n    console.log (item);\n    item.habilitado = !item.habilitado;\n    this.database.update_tienda_producto (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  categoriaSelected (event: any) {\n    this.loading = true;\n\n    this.database.get_tienda_productos_by_categoria (event.id).subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: 500px;\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n        <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n      </div>\n\n      <div class=\"\" (click)=\"fileInput.click ()\">\n        <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n        <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n      </div>\n      <br>\n\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"sku\" class=\"label\">SKU:</label>\n          <input type=\"text\" formControlName=\"sku\" id=\"sku\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"categoria\" class=\"label\">Categoria:</label>\n              <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth (selectedChange)=\"onCategoriaSelected($event)\">\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"subcategoria_id\" class=\"label\">Sub Categoria:</label>\n              <nb-select formControlName=\"subcategoria_id\" id=\"subcategoria_id\" fullWidth>\n                <nb-option *ngFor=\"let item of subcategorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"marca_id\" class=\"label\">Marcas:</label>\n              <nb-select formControlName=\"marca_id\" id=\"marca_id\" fullWidth>\n                <nb-option *ngFor=\"let item of marcas\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"medida\" class=\"label\">Und. Medida:</label>\n              <nb-select formControlName=\"medida\" id=\"medida\" fullWidth>\n                <nb-option value=\"Kg\">Kilogramos</nb-option>\n                <nb-option value=\"g\">Gramos</nb-option>\n                <nb-option value=\"L\">Litro</nb-option>\n                <nb-option value=\"gal\">Galones</nb-option>\n                <nb-option value=\"Paquete\">Paquete</nb-option>\n                <nb-option value=\"uds.\">Unidad</nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <div>\n                <label for=\"precio_compra\" class=\"label\">Precio Compra:</label>\n                &nbsp;\n              </div>\n              <input type=\"number\" formControlName=\"precio_compra\" id=\"precio_compra\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <div>\n                <label for=\"precio_venta\" class=\"label\">Precio Venta:</label>\n              </div>\n              <input type=\"number\" formControlName=\"precio_venta\" id=\"precio_venta\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_registrar_movimiento let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\" style=\"overflow-y: scroll; height: 500px;\">\n    <nb-card-header>\n      Registrar movimiento\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form_movimiento\">\n        <div class=\"form-group\" style=\"display: block;\">\n          <label for=\"fecha\" class=\"label\">Fecha:</label>\n          <input\n            type=\"date\"\n            nbInput\n            fullWidth\n            formControlName=\"fecha\"\n            (ngModelChange)=\"fecha_cambio ()\"\n            id=\"fecha\">\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\" class=\"label\">Tipo comprobante:</label>\n              <nb-select formControlName=\"tipo_comprobante\" id=\"tipo_comprobante\" fullWidth>\n                <nb-option value=\"ninguno\">Ninguno</nb-option>\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"nombre\" class=\"label\">N° comprobante:</label>\n              <input type=\"text\" formControlName=\"nro_comprobante\" id=\"nombre\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n\n      <div class=\"form-group\">\n        <label for=\"producto_seleccionado\" class=\"label\">Añada un producto:</label>\n        <input nbInput fullWidth type=\"text\"\n          list=\"productos\" [(ngModel)]='producto_seleccionado'\n          id=\"producto_seleccionado\"\n          (change)=\"selectProducto (producto_seleccionado)\"/>\n        <datalist id=\"productos\">\n          <select>\n            <option *ngFor=\"let producto of productos\" [value]=\"producto.id\">\n              {{ producto.nombre }}\n            </option>\n          </select>\n        </datalist>\n      </div>\n\n      <table class=\"table table-bordered table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Nombre</th>\n            <th scope=\"col\" style=\"width: 124px;\">Cantidad</th>\n            <th scope=\"col\" style=\"width: 102px;\">Precio (S/)</th>\n            <th scope=\"col\">Total</th>\n            <th scope=\"col\"></th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr *ngFor=\"let item of productos_para_registrar\">\n            <td>\n              {{ item.nombre }}\n            </td>\n\n            <td>\n              <input style=\"width: 78px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.cantidad\">\n            </td>\n            <td>\n              <input style=\"width: 100px;\" min=\"0\" type=\"number\" nbInput [(ngModel)]=\"item.precio\">\n            </td>\n\n            <td style=\"width: 128px;\">\n              {{ item.cantidad * item.precio | currency:'S/. ' }}\n            </td>\n\n            <td style=\"width: 12px;\">\n              <nb-icon status=\"danger\" icon=\"close-outline\" (click)=\"remove (item)\"></nb-icon>\n            </td>\n          </tr>\n\n          <tr *ngIf=\"get_precio_total () > 0\">\n            <td colspan=\"3\">Total</td>\n            <td>\n              {{ get_precio_total () | currency:'S/. ' }}\n            </td>\n            <td></td>\n          </tr>\n        </tbody>\n      </table>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"registrar_ingresos_insumo (ref)\" [disabled]=\"!form_movimiento.valid || get_precio_total () <= 0\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-2\">\n              <h5>Productos</h5>\n            </div>\n\n            <div class=\"col-4\">\n              <nb-select placeholder=\"Seleccione una categoria\" (selectedChange)=\"categoriaSelected($event)\" [(selected)]=\"selectedItem\">\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n              <!-- <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar producto...\"> -->\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"open_registrar_movimiento_dialog (dialog_registrar_movimiento)\">Registrar ingreso</button>\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">\n                  {{ row.data [column] | currency:'S/. ' }}\n                </span>\n\n                <span *ngIf=\"column === 'Imagen'\">\n                  <img style=\"width: 64px; height: auto;\" [src]=\"row.data [column]\">\n                </span>\n\n                <span *ngIf=\"column !== 'Precio' && column !== 'Imagen'\">\n                  {{ row.data [column] }}\n                </span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (row.data ['data'])\">\n                  <nb-icon *ngIf=\"row.data ['data'].habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n                  <nb-icon *ngIf=\"!row.data ['data'].habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'ngx-gestionar-restaurante-mesas',\n  templateUrl: './gestionar-restaurante-mesas.component.html',\n  styleUrls: ['./gestionar-restaurante-mesas.component.scss']\n})\nexport class GestionarRestauranteMesasComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>gestionar-restaurante-mesas works!</p>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-gestionar-sub-categorias',\n  templateUrl: './gestionar-sub-categorias.component.html',\n  styleUrls: ['./gestionar-sub-categorias.component.scss']\n})\nexport class GestionarSubCategoriasComponent implements OnInit {\n  categorias: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Categorias', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required]),\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any []) => {\n      this.categorias = res;\n    });\n\n    this.database.get_tienda_sub_categorias ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Categorias: this.categorias.find ((x => x.id === i.categoria_id)).nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_tienda_sub_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_tienda_sub_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo_categoria (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"categoria\" class=\"label\">Categoria:</label>\n          <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth>\n            <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Sub Categorias</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n                <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n                <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                  <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                </button>\n              </div>\n            </td>\n          </ng-container>\n        </table>\n\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport { first } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { NbComponentStatus, NbDialogService, NbIconConfig, NbToastrService } from '@nebular/theme';\nimport { StockService } from '../../services/stock.service';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'ngx-gestionar-ventas-restaurante',\n  templateUrl: './gestionar-ventas-restaurante.component.html',\n  styleUrls: ['./gestionar-ventas-restaurante.component.scss']\n})\nexport class GestionarVentasRestauranteComponent implements OnInit {\n  usuario: any;\n  empresa_pos: any = {\n    id: '',\n    nombre: '',\n    instancia_actual: null,\n    caja_abierta: false\n  };\n\n  // Forms\n  form_abrir_caja: FormGroup;\n  form_venta: FormGroup;\n\n  // Selectables\n  mesa_seleccionada: any = null;\n\n  // Auxiliares\n  cartas: any [] = [];\n  mesas: any [] = [];\n  carta: any = {\n    platos: []\n  };\n\n  // Loading\n  loading: boolean = false;\n  cartas_loading: boolean = false;\n  mesas_loading: boolean = false;\n\n  constructor (\n    private database: DatabaseService,\n    private auth: AuthService,\n    private toastrService: NbToastrService,\n    private dialogService: NbDialogService,\n    private stock: StockService) { }\n\n  async ngOnInit () {\n    this.form_abrir_caja = new FormGroup ({\n      monto_apertura: new FormControl ('', [Validators.required, Validators.min (1)]),\n      admi_correo: new FormControl ('', [Validators.required, Validators.email]),\n      admi_password: new FormControl ('', [Validators.required])\n    });\n\n    this.form_venta = new FormGroup ({\n      // tipo: new FormControl ('rapido', [Validators.required]),\n      importe: new FormControl ('', [Validators.required]),\n      fecha: new FormControl (''),\n      anio: new FormControl (''),\n      mes: new FormControl (''),\n      dia: new FormControl (''),\n      tipo_comprobante: new FormControl ('boleta'),\n      tipo_pago: new FormControl ('efectivo'),\n      tarjeta_cod_ref: new FormControl (''),\n      nro_comprobante: new FormControl (''),\n      cliente_nombre: new FormControl (''),\n      // imprimir_ticket: new FormControl (true)\n    });\n\n    this.auth.authState ().subscribe ((usuario: firebase.User) => {\n      if (usuario) {\n        this.database.get_usuario_by_id (usuario.uid).subscribe ((res: any) => {\n          if (res !== undefined) {\n            this.usuario = res;\n            this.get_data ();\n          }\n        });\n      } else {\n\n      }\n    });\n  }\n\n  get_data () {\n    this.stock.init_stock (this.usuario.empresa_id);\n\n    this.database.get_restaurante_venta_data (this.usuario.empresa_id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      if (res !== undefined) {\n        this.empresa_pos = res;\n      }\n    });\n\n    this.cartas_loading = true;\n    this.database.get_cartas_by_empresa (this.usuario.empresa_id).subscribe ((res: any []) => {\n      this.cartas = res.filter ((i: any) => {\n        return i.data.habilitado === true;\n      });\n\n      if (this.cartas.length > 0) {\n        this.carta = this.cartas [0];\n      }\n\n      this.cartas_loading = false;\n    });\n\n    this.mesas_loading = true;\n    this.database.get_mesas_empresas (this.usuario.empresa_id).subscribe ((res: any []) => {\n      this.mesas = res;\n      this.mesas_loading = false;\n    });\n  }\n\n  async seleccionar_carta (item: any) {\n    this.carta = item;\n\n    if (item.data.tipo_carta === '0') {\n      this.carta.menus_dia = await this.database.get_menu_elementos_by_carta (item.data.id).pipe (first ()).toPromise ();\n    }\n\n    if (item.data.tipo_carta === '2') {\n      this.carta.promociones = await this.database.get_promociones_by_carta (item.data.id).pipe (first ()).toPromise ();\n    }\n  }\n\n  abrir_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  validar_admi (ref: any) {\n    // this.loading = true;\n    // const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    // const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    // if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.abri_caja_data (ref);\n    // } else {\n    //   this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n    //     if (res.length > 0) {\n    //       this.abri_caja_data (ref);\n    //     } else {\n    //       this.loading = false;\n    //       alert ('Usuario invalido');\n    //     }\n    //   }).catch ((error: any) => {\n    //     this.loading = false;\n    //     console.log (error);\n    //   });\n    // }\n  }\n\n  abri_caja_data (ref: any) {\n    let data: any = {\n      id: this.usuario.empresa_id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      fecha: moment ().format ('DD[-]MM[-]YYYY'),\n      hora: moment ().format ('h:mm'),\n      instancia_actual: {\n        tmp_id: this.database.createId (),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura,\n        fecha_apertura: moment ().format ('L'),\n        hora_apertura: moment ().format ('h:mm')\n      },\n      caja_abierta: true,\n    };\n\n    this.database.add_post_empresa_data (data).then (() => {\n      this.showToast ('La caja se abrio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  showToast (mensaje: string, preventDuplicates, status: NbComponentStatus) {\n    const iconConfig: NbIconConfig = { icon: 'checkmark-circle-outline', pack: 'eva' };\n    this.toastrService.show (\n      mensaje,\n      'Mensaje',\n      { preventDuplicates, status });\n  }\n\n  async select_mesa (mesa: any) {\n    if (mesa.disponible === true || mesa.disponible === undefined) {\n      this.mesa_seleccionada = {\n        id: this.database.createId (),\n        mesa_id: mesa.id,\n        nombre: mesa.nombre,\n        platos: [],\n        estado: 0\n      };\n    } else {\n      this.mesa_seleccionada = await this.database.get_restaurante_pedido_by_id (mesa.pedido_id);\n    }\n\n    this.mesa_seleccionada.platos.forEach ((plato: any) => {\n      if (plato.tipo === 'menu') {\n        this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n      }\n    });\n  }\n\n  validar_estado () {\n    let returned: boolean = true;\n\n    // if (this.mesa_seleccionada.estado === 1) {\n    //   returned = confirm (\"¿Esta seguro que desea agregar este plato al pedido?\");\n    // }\n\n    return returned;\n  }\n\n  async add_plato_actualizar (plato: any) {\n    if (plato.tipo === 'plato') {\n      this.add_plato (plato.id);\n    } else {\n      this.add_menu_dia_carrito (plato);\n    }\n  }\n\n  async add_plato (plato_id: any) {\n    if (this.mesa_seleccionada !== null) {\n      this.cartas_loading = true;\n\n      let plato: any = await this.database.get_plato_by_id (plato_id).pipe (first ()).toPromise ();\n\n      if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id)) {\n        let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id).cantidad;\n        if (this.stock.check_valid (plato [0].data, plato [0].insumos, cantidad + 1)) {\n          this.mesa_seleccionada.platos.find ((e: any) => e.id === plato_id).cantidad++;\n\n          if (this.mesa_seleccionada.estado === 1) {\n            this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n              this.cartas_loading = false;\n              this.showToast ('El plato se agrego correctamente', true, 'success');\n            }, error => {\n              this.cartas_loading = false;\n              console.log (error);\n            });\n          } else {\n            this.showToast ('El plato se agrego correctamente', true, 'success');\n            this.cartas_loading = false;\n          }\n        } else {\n          this.cartas_loading = false;\n          this.showToast ('Stock no disponible', true, 'danger');\n        }\n      } else {\n        if (this.stock.check_valid (plato [0].data, plato [0].insumos, 1)) {\n          if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n            this.mesa_seleccionada.platos = [];\n          }\n\n          this.mesa_seleccionada.platos.push ({\n            id: plato_id,\n            carta_id: plato [0].data.carta_id,\n            plato_id: plato [0].data.id,\n            empresa_id: this.usuario.empresa_id,\n            precio: plato [0].data.precio,\n            nombre: plato [0].data.nombre,\n            cantidad: 1,\n            orden: this.mesa_seleccionada.platos.length + 1,\n            insumos: plato [0].insumos,\n            tipo: 'plato'\n          });\n\n          this.showToast ('El plato se agrego correctamente', true, 'success');\n        } else {\n          this.showToast ('Stock no disponible', true, 'danger');\n        }\n\n        this.cartas_loading = false;\n      }\n    }\n  }\n\n  get_total () {\n    let cantidad: number = 0;\n    let menus_cartas: Map <string, any []> = new Map <string, any []> ();\n\n    if (this.mesa_seleccionada.platos instanceof Array) {\n      this.mesa_seleccionada.platos.forEach ((e: any) => {\n        if (e.tipo === 'plato') {\n          cantidad += e.precio * e.cantidad;\n        } else if (e.tipo === 'menu') {\n          if (menus_cartas.has (e.carta_id)) {\n            menus_cartas.get (e.carta_id).push (e);\n          } else {\n            menus_cartas.set (e.carta_id, [e]);\n          }\n        }\n      });\n    }\n\n    cantidad += this.calcular_precio_por_carta (menus_cartas);\n\n    return this.get_total_format (cantidad);\n  }\n\n  calcular_precio_por_carta (cartas: Map <string, any []>) {\n    let total: number = 0;\n\n    cartas.forEach ((value: any [], key: string) => {\n      total += this.get_precio_menu_carta (key, value);\n    });\n\n    return total;\n  }\n\n  get_precio_menu_carta (key: string, values: any []) {\n    let total: number = 0;\n    let cantidad_elementos_menu_tmp = this.stock.get_cantidad_elementos_menu_tmp ();\n    let menus_completos: number = 0;\n\n    values.forEach ((value: any) => {\n      cantidad_elementos_menu_tmp [value.elemento_menu_id] = value.cantidad\n    });\n\n    menus_completos = this.calcular_menus_completos (cantidad_elementos_menu_tmp);\n\n    values.forEach ((value: any) => {\n      total += (value.cantidad - menus_completos) * value.precio;\n    });\n\n    return total + (menus_completos * this.cartas.find (x => x.data.id === key).data.precio);\n  }\n\n  calcular_menus_completos (cantidad_elementos_menu_tmp: any []) {\n    let mayor = 0;\n    for  (let key in cantidad_elementos_menu_tmp) {\n      if (cantidad_elementos_menu_tmp [key] > mayor) {\n        mayor = cantidad_elementos_menu_tmp [key];\n      }\n    }\n\n    let menus_completos: number = mayor;\n    for (let index = mayor; index > 0; index--) {\n      let completo: boolean = true;\n      for (let key in cantidad_elementos_menu_tmp) {\n        if (cantidad_elementos_menu_tmp [key] < index) {\n          completo = false;\n          menus_completos--;\n          break;\n        }\n      }\n    }\n\n    return menus_completos;\n  }\n\n  get_platos_format (list: any []) {\n    if (list instanceof Array) {\n      let returned: any [] = [];\n      let menus_cartas: Map <string, any []> = new Map <string, any []> ();\n\n      list.forEach ((e: any) => {\n        if (e.tipo === 'plato' || e.tipo === 'menu-completo' || e.tipo === 'promocion') {\n          returned.push (e);\n        } else if (e.tipo === 'menu') {\n          if (menus_cartas.has (e.carta_id)) {\n            menus_cartas.get (e.carta_id).push (e);\n          } else {\n            menus_cartas.set (e.carta_id, [e]);\n          }\n        }\n      });\n\n      menus_cartas.forEach ((values: any [], key: string) => {\n        let cantidad_elementos_menu_tmp = this.stock.get_cantidad_elementos_menu_tmp ();\n        let menus_completos: number = 0;\n\n        values.forEach ((value: any) => {\n          cantidad_elementos_menu_tmp [value.elemento_menu_id] = value.cantidad\n        });\n\n        menus_completos = this.calcular_menus_completos (cantidad_elementos_menu_tmp);\n\n        values.forEach ((value: any) => {\n          if (value.cantidad - menus_completos > 0) {\n            value.menus_completos = menus_completos;\n            returned.push (value)\n          }\n        });\n\n        for (let index = 0; index < menus_completos; index++) {\n          if (returned.find (x => x.id === key)) {\n            returned.find (x => x.id === key).cantidad++;\n          } else {\n            returned.push ({\n              id: this.cartas.find (x => x.data.id === key).data.id,\n              nombre: this.cartas.find (x => x.data.id === key).data.nombre,\n              carta_id: this.cartas.find (x => x.data.id === key).data.id,\n              empresa_id: this.usuario.empresa_id,\n              carta_precio: this.carta.data.precio,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: this.cartas.find (x => x.data.id === key).data.precio,\n              tipo: 'menu-completo',\n              menus: values\n            });\n          }\n        }\n      });\n      return returned;\n    } else {\n      return [];\n    }\n  }\n\n  get_total_format (value: number) {\n    return Math.round (value * 100) / 100;\n  }\n\n  eliminar_producto (plato: any) {\n    if (plato.tipo === 'menu') {\n      this.stock.remove_menu (plato);\n    }\n\n    for (let index = 0; index < this.mesa_seleccionada.platos.length; index++) {\n      if (this.mesa_seleccionada.platos [index].id === plato.id) {\n        this.mesa_seleccionada.platos.splice (index, 1);\n      }\n    }\n\n    if (this.mesa_seleccionada.estado === 1) {\n      this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n        // if (plato.tipo === 'menu') {\n        //   this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n        // }\n      }, error => {\n        console.log (error);\n      });\n    }\n  }\n\n  remove_plato (plato: any) {\n    // if (confirm (\"¿Esta seguro que desea descontar este plato al pedido?\")) {-\n      plato.cantidad--;\n      this.database.update_restaurante_pedido (this.mesa_seleccionada).then (() => {\n        // if (plato.tipo === 'menu') {\n        //   this.stock.cantidad_elementos_menu_tmp [plato.elemento_menu_id] = plato.cantidad;\n        // }\n      }, error => {\n        console.log (error);\n      });\n    // }\n  }\n\n  crear_pedido () {\n    let request: any = {};\n    request.id = this.mesa_seleccionada.id;\n    request.mesa_id = this.mesa_seleccionada.mesa_id;\n    request.nombre = this.mesa_seleccionada.nombre;\n    request.estado = 1;\n    request.tmp_id = this.empresa_pos.instancia_actual.tmp_id;\n\n    request.platos = this.get_platos_format (this.mesa_seleccionada.platos);\n\n    console.log (request);\n\n    this.database.registrar_restaurante_pedido (this.usuario.empresa_id, request).then (() => {\n      this.cancelar ();\n      this.showToast ('Tu pedido fue procesado', true, 'success');\n    }).catch ((error: any) => {\n      console.log (error);\n    });\n  }\n\n  cancelar () {\n    this.mesa_seleccionada = null;\n    this.stock.clean_cache ();\n  }\n\n  open_pago (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  calcular_cambio () {\n    return this.form_venta.value.importe - this.get_total ();\n  }\n\n  validar_cobrar () {\n    let returned: boolean = true;\n    if (this.form_venta.value.tipo_pago === 'efectivo') {\n      if (this.calcular_cambio () > 0 && this.form_venta.value.importe !== 0) {\n        returned = false;\n      }\n    } else {\n      returned = this.form_venta.invalid;\n    }\n\n    return returned;\n  }\n\n  cambiar_tipo_pago (tipo: string) {\n    this.form_venta.controls ['tipo_pago'].setValue (tipo);\n\n    this.form_venta.controls ['importe'].setValue (null);\n    this.form_venta.controls ['tarjeta_cod_ref'].setValue (null);\n\n    if (tipo === 'efectivo') {\n      this.form_venta.controls ['importe'].setValidators ([Validators.required]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([]);\n    } else {\n      this.form_venta.controls ['importe'].setValidators ([]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([Validators.required]);\n    }\n\n    this.form_venta.controls ['tarjeta_cod_ref'].updateValueAndValidity ();\n    this.form_venta.controls ['importe'].updateValueAndValidity ();\n  }\n\n  submit (ref: any) {\n    this.mesa_seleccionada.estado = 2;\n    this.mesa_seleccionada.pedido_id = '';\n    this.mesa_seleccionada.disponible = true;\n    this.mesa_seleccionada.importe = this.form_venta.value.importe;\n    this.mesa_seleccionada.tipo_comprobante = this.form_venta.value.tipo_comprobante;\n    // this.mesa_seleccionada.nro_comprobante = this.form_venta.value.nro_comprobante;\n    this.mesa_seleccionada.monto_total = this.get_total ();\n    this.mesa_seleccionada.fecha = moment ().format ('YYYY[-]MM[-]DD');\n    this.mesa_seleccionada.hora = moment ().format ('HH:mm');\n    this.mesa_seleccionada.mes = moment ().format ('MM');\n    this.mesa_seleccionada.dia = moment ().format ('DD');\n    this.mesa_seleccionada.anio = moment ().format ('YYYY');\n    this.mesa_seleccionada.empresa_id = this.usuario.empresa_id;\n\n    this.database.finalizar_restaurante_pedido (this.usuario.empresa_id, this.mesa_seleccionada).then (() => {\n      ref.close ();\n      this.cancelar ();\n      this.form_venta.reset ();\n      this.form_abrir_caja.reset ();\n    }, error => {\n      console.log (error);\n      ref.close ();\n    });\n  }\n\n  add_menu_dia_carrito (menu_dia: any) {\n    if (this.mesa_seleccionada !== null) {\n      if (this.validar_estado ()) {\n        if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id)) {\n          let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id).cantidad;\n          if (this.stock.check_menu (menu_dia, cantidad + 1)) {\n            this.mesa_seleccionada.platos.find ((e: any) => e.id === menu_dia.id).cantidad++;\n\n            if (this.mesa_seleccionada.estado === 1) {\n              this.database.update_restaurante_pedido (this.mesa_seleccionada);\n            }\n          } else {\n            this.showToast ('Stock no disponible', true, 'danger');\n          }\n        } else {\n          if (this.stock.check_menu (menu_dia, 1)) {\n            if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n              this.mesa_seleccionada.platos = [];\n            }\n\n            this.mesa_seleccionada.platos.push ({\n              id: menu_dia.id,\n              menu_id: menu_dia.menu_id,\n              nombre: menu_dia.menu_nombre,\n              carta_id: menu_dia.carta_id,\n              empresa_id: this.usuario.empresa_id,\n              carta_precio: this.carta.data.precio,\n              elemento_menu_id: menu_dia.elemento_menu_id,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: this.stock.get_menu_elemento_precio (menu_dia.elemento_menu_id),\n              tipo: 'menu'\n            });\n          } else {\n            this.showToast ('Stock no disponible', true, 'danger');\n          }\n        }\n      }\n    }\n  }\n\n  get_tipo_plato_lista (tipo: string) {\n    if (tipo === 'menu') {\n      return 'Plato';\n    } else if (tipo === 'plato') {\n      return 'Extra';\n    } else if (tipo === 'menu-completo') {\n      return 'Menu Completo';\n    }\n\n    return '';\n  }\n\n  add_promocion (plato: any) {\n    console.log (plato);\n\n    if (this.mesa_seleccionada !== null) {\n      if (this.mesa_seleccionada.platos instanceof Array && this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id)) {\n        let cantidad = this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id).cantidad;\n          if (this.stock.verificar_agregar_carrito_promocion (plato.empresa_id, plato.insumos, cantidad + 1)) {\n            this.mesa_seleccionada.platos.find ((e: any) => e.id === plato.id).cantidad++;\n          } else {\n            console.log ('No Stock');\n          }\n      } else {\n        if (plato.tipo === '0') {\n          if (this.stock.verificar_agregar_carrito_promocion (plato.empresa_id, plato.insumos, 1)) {\n            if ((this.mesa_seleccionada.platos instanceof Array) === false) {\n              this.mesa_seleccionada.platos = [];\n            }\n\n            this.mesa_seleccionada.platos.push ({\n              id: plato.id,\n              nombre: plato.nombre,\n              carta_id: plato.carta_id,\n              empresa_id: plato.empresa_id,\n              cantidad: 1,\n              orden: this.mesa_seleccionada.platos.length + 1,\n              precio: plato.precio_total,\n              tipo: 'promocion',\n              promocion_tipo: plato.tipo\n            });\n          } else {\n            console.log ('No Stock');\n          }\n        } else if (plato.tipo === '1') {\n\n        }\n      }\n    }\n  }\n\n  async confirmar_cerrar_caja (dialog: any) {\n    let ventas = await this.database.get_restaurante_ventas_instancia (this.empresa_pos.instancia_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: ventas\n      }\n    });\n  }\n\n  cerrar_caja (ref: any, data: any) {\n    console.log (data);\n    console.log (this.empresa_pos);\n\n    this.database.cerrar_caja_post_empresa (this.empresa_pos).then (() => {\n      ref.close ();\n    }).catch ((error: any) => {\n      console.log (error);\n      ref.close ();\n    });\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      total += venta.monto_total;\n    });\n\n    return this.get_total_format (total);\n  }\n}\n","<ng-template #dialog_abrir_caja let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_abrir_caja\" [nbSpinner]=\"loading\" autocomplete=\"off\">\n    <nb-card-header>\n      <h6>Apertura de caja</h6>\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"form-group\">\n        <label for=\"monto_apertura\"><b>Monto de apertura</b></label>\n        <input formControlName=\"monto_apertura\" nbInput fullWidth id=\"monto_apertura\" type=\"number\">\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"admi_correo\"><b>Correo</b></label>\n        <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"admi_password\"><b>Contraseña</b></label>\n        <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"form_abrir_caja.invalid\" (click)=\"validar_admi (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cobro let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_venta\" [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Realizar pedido</h6>\n        </div>\n\n        <!-- <div class=\"col-6 text-right\">\n          <nb-select placeholder=\"Seleccione una opcion\" formControlName=\"tipo\">\n            <nb-option value=\"rapido\">Rapido</nb-option>\n            <nb-option value=\"completo\">Completo</nb-option>\n          </nb-select>\n        </div> -->\n      </div>\n\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"text-center\">\n        <h3>{{ get_total () | currency:'S/. ' }}</h3>\n      </div>\n      <br>\n      <div class=\"linked text-center\">\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'efectivo' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('efectivo')\"\n          nbButton>\n          <nb-icon icon=\"npm-outline\"></nb-icon>\n          Efectivo\n        </button>\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'tarjeta' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('tarjeta')\"\n          nbButton>\n          <nb-icon icon=\"credit-card-outline\"></nb-icon>\n          Tarjeta de credito\n        </button>\n      </div>\n      <br>\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'efectivo'\">\n        <div>\n          <label><b>Pago con:</b></label>\n        </div>\n        <div class=\"linked\">\n          <input nbInput fieldSize=\"medium\" type=\"number\" min=\"0\" style=\"width: 120px;\" formControlName=\"importe\">\n          <button\n            [status]=\"form_venta.value.importe === 10 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (10)\"\n            status=\"primary\"\n            *ngIf=\"get_total () < 10\"\n            nbButton>S/. 10\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 20 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (20)\"\n            *ngIf=\"get_total () < 20\"\n            nbButton>S/. 20\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 50 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (50)\"\n            *ngIf=\"get_total () < 50\"\n            nbButton>S/. 50\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 100 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (100)\"\n            *ngIf=\"get_total () < 100\"\n            nbButton>S/. 100\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 200 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (200)\"\n            *ngIf=\"get_total () < 200\"\n            nbButton>S/. 200\n          </button>\n        </div>\n        <br>\n        <div>\n          <label><b>Su cambio:</b></label>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () < 0\">\n          Ingrese un importe valido\n          <br>\n          <br>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () > 0\">\n          <h6>{{ calcular_cambio () | currency:'S/. ' }}</h6>\n        </div>\n      </ng-container>\n\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'tarjeta'\">\n        <div>\n          <label><b>Codigo:</b></label>\n        </div>\n        <input nbInput fullWidth fieldSize=\"medium\" type=\"text\" formControlName=\"tarjeta_cod_ref\">\n        <br>\n        <br>\n      </ng-container>\n\n      <!-- <div>\n        <nb-checkbox formControlName=\"imprimir_ticket\">Imprimir ticket</nb-checkbox>\n      </div> -->\n\n      <br>\n      <!-- <div *ngIf=\"form_venta.value.tipo === 'completo'\">\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\"><b>Tipo de comprobante</b></label>\n              <nb-select fullWidth id=\"tipo_comprobante\" placeholder=\"Seleccione una opcion\" formControlName=\"tipo_comprobante\">\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"nro_comprobante\"><b>N° de comprobante</b></label>\n              <input nbInput fullWidth id=\"nro_comprobante\" formControlName=\"nro_comprobante\" type=\"text\">\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"cliente_nombre\"><b>Nombre del cliente</b></label>\n              <input nbInput fullWidth id=\"cliente_nombre\" formControlName=\"cliente_nombre\" type=\"text\">\n            </div>\n          </div>\n        </div>\n      </div> -->\n\n      <div>\n        <button nbButton status=\"success\" [disabled]=\"validar_cobrar ()\" (click)=\"submit (ref)\" fullWidth>Cobrar</button>\n      </div>\n    </nb-card-body>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cerrar_caja let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cerrar caja</h6>\n        </div>\n\n        <!-- <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div> -->\n      </div>\n    </nb-card-header>\n\n    <nb-card-body [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ empresa_pos.instancia_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + empresa_pos.instancia_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <!-- <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div> -->\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" (click)=\"cerrar_caja (ref, data)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout [nbSpinner]=\"loading\">\n  <nb-layout-header>\n    <button *ngIf=\"empresa_pos.caja_abierta === false\" nbButton status=\"primary\" (click)=\"abrir_caja (dialog_abrir_caja)\">\n      Abrir caja\n    </button>\n\n    <div *ngIf=\"empresa_pos.caja_abierta === true\" style=\"display: grid;\">\n      <span class=\"cajero-nombre\"><b>Caja abierta</b></span>\n      <span class=\"cajero-tiempo\">Conectado a: {{ empresa_pos?.instancia_actual.hora_apertura }} {{ empresa_pos?.instancia_actual.fecha_apertura }}</span>\n    </div>\n\n    <button *ngIf=\"empresa_pos.caja_abierta === true\" nbButton [nbPopover]=\"templateRef\" nbPopoverPlacement=\"bottom\" ghost><nb-icon icon=\"settings-2-outline\"></nb-icon></button>\n      <ng-template #templateRef>\n        <div style=\"display: table-caption;\">\n          <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cerrar_caja (dialog_cerrar_caja)\">\n            <nb-icon icon=\"close-circle-outline\"></nb-icon>Cerrar caja\n          </button>\n        </div>\n      </ng-template>\n  </nb-layout-header>\n\n  <nb-layout-column>\n    <nb-card *ngIf=\"empresa_pos.caja_abierta === true && mesa_seleccionada === null\" [nbSpinner]=\"mesas_loading\">\n      <nb-card-header>\n        Seleccione una mesa\n      </nb-card-header>\n\n      <div class=\"row align-items-center justify-content-center\">\n        <div class=\"col-3 mesa\" *ngFor=\"let mesa of mesas\" (click)=\"select_mesa (mesa)\">\n          {{ mesa.nombre }}\n          <span *ngIf=\"mesa.disponible === true || mesa.disponible === undefined\">Disponible</span>\n          <span *ngIf=\"mesa.disponible === false\">No Disponible</span>\n        </div>\n      </div>\n    </nb-card>\n\n    <nb-card size=\"small\" *ngIf=\"mesa_seleccionada !== null\">\n      <nb-card-header>\n        Mesa: {{ mesa_seleccionada.nombre }}\n      </nb-card-header>\n\n      <nb-card-header style=\"display: flex; align-items: center;\">\n        <div style=\"width: 100%;\">Orden</div>\n      </nb-card-header>\n\n      <div style=\"height: 100%;\">\n        <table class=\"table table-sm table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">N°</th>\n              <th scope=\"col\">Tipo</th>\n              <th scope=\"col\">Producto</th>\n              <th scope=\"col\">Unidades</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Total</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let plato of get_platos_format (mesa_seleccionada.platos)\">\n              <th scope=\"row\">{{ plato.orden }}</th>\n              <td>{{ get_tipo_plato_lista (plato.tipo) }}</td>\n              <td>\n                <div *ngIf=\"plato.tipo === 'menu-completo'\">\n                  <p style=\"margin-bottom: 0px;\">{{ plato.nombre }}</p>\n                  <ul>\n                    <li *ngFor=\"let menu of plato.menus\">\n                      {{ menu.nombre }}\n                    </li>\n                  </ul>\n                </div>\n                <div *ngIf=\"plato.tipo !== 'menu-completo'\">\n                  {{ plato.nombre }}\n                </div>\n              </td>\n              <td>\n                <ng-container *ngIf=\"plato.tipo === 'menu'\">\n                  {{ plato.cantidad - plato.menus_completos }}\n                </ng-container>\n                <ng-container *ngIf=\"plato.tipo !== 'menu'\">\n                  {{ plato.cantidad }}\n                </ng-container>\n                <button [disabled]=\"plato.cantidad <= 1\" (click)=\"remove_plato (plato)\">-</button>\n                <button (click)=\"add_plato_actualizar (plato)\">+</button>\n              </td>\n              <td>\n                {{ plato.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (plato.precio * plato.cantidad) | currency:'S/. ' }}\n              </td>\n              <td class=\"text-right\">\n                <button nbButton ghost size=\"small\" status=\"danger\" (click)=\"eliminar_producto (plato)\">\n                  <nb-icon icon=\"close-outline\"></nb-icon>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <nb-card-footer style=\"display: flex; align-items: center;\">\n        <button nbTooltip=\"Limpiar\" nbButton outline status=\"danger\" (click)=\"cancelar ()\">\n          Atras\n        </button>\n\n        <!-- <button nbTooltip=\"Imprimir\" style=\"margin-left: 1rem;\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"printer\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Registrar nota de credito\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"file-text\"></nb-icon>\n        </button> -->\n\n        <!-- <button nbTooltip=\"Registrar ingreso/egreso\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"plus-square\"></nb-icon>\n        </button> -->\n\n        <div *ngIf=\"mesa_seleccionada.estado === 1\" style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline status=\"success\" (click)=\"open_pago (dialog_cobro)\">\n            Cobrar:\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n\n        <div *ngIf=\"mesa_seleccionada.estado === 0\" style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline status=\"success\" (click)=\"crear_pedido ()\">\n            Agregar pedido\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n\n  <nb-layout-column>\n    <nb-card *ngIf=\"empresa_pos.caja_abierta === true && mesa_seleccionada !== null\" [nbSpinner]=\"cartas_loading\">\n      <nb-card-header style=\"display: flex; overflow: auto;\">\n        <ng-container *ngFor=\"let carta of cartas\">\n          <button (click)=\"seleccionar_carta (carta)\" style=\"margin: 6px;\" nbButton size=\"tiny\">\n            {{ carta.data.nombre }}\n          </button>\n        </ng-container>\n      </nb-card-header>\n\n      <!-- <nb-list-item *ngIf=\"carta.data.tipo_carta === '0'\" style=\"border: none;\" (click)=\"agregar_menu_completo ()\">\n        <button nbButton ghost status=\"primary\">\n          <nb-icon icon=\"plus-outline\"></nb-icon>\n        </button>\n        &nbsp;\n        &nbsp;\n        &nbsp;\n        <nb-user name=\"Menu completo\" showTitle=false shape=\"rectangle\">\n        </nb-user>\n      </nb-list-item> -->\n\n      <nb-accordion *ngIf=\"carta.data.tipo_carta === '0'\">\n        <nb-accordion-item *ngFor=\"let menu_dia of carta?.menus_dia\">\n          <nb-accordion-item-header>{{ menu_dia.data.nombre }}</nb-accordion-item-header>\n          <nb-accordion-item-body>\n            <nb-list-item style=\"border: none; padding: 0px;\" *ngFor=\"let menu of menu_dia.menus_dia\">\n              <button nbButton ghost status=\"primary\" (click)=\"add_menu_dia_carrito (menu)\">\n                <nb-icon icon=\"plus-outline\"></nb-icon>\n              </button>\n              &nbsp;\n              &nbsp;\n              &nbsp;\n              <nb-user [name]=\"menu.menu_nombre\" showTitle=false shape=\"rectangle\">\n              </nb-user>\n            </nb-list-item>\n          </nb-accordion-item-body>\n        </nb-accordion-item>\n      </nb-accordion>\n\n      <nb-list *ngIf=\"carta.data.tipo_carta === '1'\">\n        <nb-list-item *ngFor=\"let plato of carta.platos\">\n          <button nbButton ghost status=\"primary\" (click)=\"add_plato (plato.id)\">\n            <nb-icon icon=\"plus-outline\"></nb-icon>\n          </button>\n          &nbsp;\n          &nbsp;\n          &nbsp;\n          <nb-user [name]=\"plato.nombre\" showTitle=false [picture]=\"plato.imagen\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item>\n      </nb-list>\n\n      <nb-list *ngIf=\"carta.data.tipo_carta === '2'\">\n        <nb-list-item *ngFor=\"let plato of carta.promociones\">\n          <button nbButton ghost status=\"primary\" (click)=\"add_promocion (plato [0])\">\n            <nb-icon icon=\"plus-outline\"></nb-icon>\n          </button>\n          &nbsp;\n          &nbsp;\n          &nbsp;\n          <nb-user [name]=\"plato [0].nombre\" showTitle=false [picture]=\"plato[0].imagen\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, ElementRef, AfterViewInit, ViewChild, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { elementAt, filter, finalize } from 'rxjs/operators';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbToastrService, NbGlobalPosition, NbComponentStatus, NbIconConfig } from '@nebular/theme';\nimport * as moment from 'moment';\nimport { fromEvent } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, tap } from 'rxjs/operators';\n\n\n// AlgoliaSearch’\nconst algoliasearch = require('algoliasearch');\nimport { environment } from '../../../environments/environment';\n\n@Component({\n  selector: 'ngx-gestionar-ventas',\n  templateUrl: './gestionar-ventas.component.html',\n  styleUrls: ['./gestionar-ventas.component.scss']\n})\nexport class GestionarVentasComponent implements OnInit {\n  @ViewChild('input') input: ElementRef;\n\n  search_text: string = '';\n  loading: boolean = false;\n  search_loading: boolean = false;\n  ver_ventas: boolean = false;\n  productos_busqueda: any [] = [];\n  form_venta: FormGroup;\n  form_abrir_caja: FormGroup;\n\n  lista: Map<string, any> = new Map<string, any> ();\n  client: any;\n  algolia_index: any;\n\n  caja_data: any = {\n    id: '',\n    nombre: '',\n    instancia_actual: null,\n    cajero_actual: null,\n    caja_abierta: false\n  };\n  cajeros: any [] = [];\n  productos: any [] = [];\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private toastrService: NbToastrService,\n    private auth: AuthService\n  ) {\n  }\n\n  ngOnInit (): void {\n    this.form_venta = new FormGroup ({\n      tipo: new FormControl ('rapido', [Validators.required]),\n      importe: new FormControl ('', [Validators.required]),\n      fecha: new FormControl (''),\n      anio: new FormControl (''),\n      mes: new FormControl (''),\n      dia: new FormControl (''),\n      tipo_comprobante: new FormControl ('boleta'),\n      tipo_pago: new FormControl ('efectivo'),\n      tarjeta_cod_ref: new FormControl (''),\n      nro_comprobante: new FormControl (''),\n      cliente_nombre: new FormControl (''),\n      imprimir_ticket: new FormControl (true)\n    });\n\n    this.form_abrir_caja = new FormGroup ({\n      monto_apertura: new FormControl ('', [Validators.required, Validators.min (1)]),\n      admi_correo: new FormControl ('', [Validators.required, Validators.email]),\n      admi_password: new FormControl ('', [Validators.required]),\n      cajero_actual: new FormControl ('', [Validators.required])\n    });\n\n    this.client = algoliasearch (environment.algolia.appId, environment.algolia.apiKey, { protocol: 'https:' });\n    this.algolia_index = this.client.initIndex(environment.algolia.indexName);\n\n    this.database.get_pos_data (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      console.log (res);\n      this.caja_data = res;\n    });\n\n    this.database.get_usuarios_by_tipo (-1).subscribe ((res: any []) => {\n      this.cajeros = res;\n    });\n  }\n\n  get_cajeros_validos (lista: any []) {\n    return lista.filter ((e: any) => {\n      return e.id !== this.caja_data.cajero_actual.cajero_id;\n    });\n  }\n\n  ngAfterViewInit () {\n    // server-side search\n    fromEvent (this.input.nativeElement, 'keyup')\n      .pipe(\n          filter(Boolean),\n          debounceTime(0),\n          distinctUntilChanged(),\n          tap ((text) => {\n            if (this.input.nativeElement.value.trim () !== '' && this.input.nativeElement.value.length > 1) {\n              this.onSearchType (this.input.nativeElement.value);\n            }\n          })\n      )\n      .subscribe();\n  }\n\n  cambiar_tipo_pago (tipo: string) {\n    this.form_venta.controls ['tipo_pago'].setValue (tipo);\n\n    this.form_venta.controls ['importe'].setValue (null);\n    this.form_venta.controls ['tarjeta_cod_ref'].setValue (null);\n\n    if (tipo === 'efectivo') {\n      this.form_venta.controls ['importe'].setValidators ([Validators.required]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([]);\n    } else {\n      this.form_venta.controls ['importe'].setValidators ([]);\n      this.form_venta.controls ['tarjeta_cod_ref'].setValidators ([Validators.required]);\n    }\n\n    this.form_venta.controls ['tarjeta_cod_ref'].updateValueAndValidity ();\n    this.form_venta.controls ['importe'].updateValueAndValidity ();\n  }\n\n  async selectProducto (producto: any) {\n    if (this.lista.get (producto.objectID) === undefined) {\n      let p: any = await this.database.get_producto_by_id (producto.objectID);\n      this.lista.set (p.id, {\n        id: p.id,\n        nombre: p.nombre,\n        cantidad: 1,\n        orden: this.lista.size + 1,\n        precio: p.precio_venta,\n        stock: p.stock,\n        categoria_id: p.categoria_id,\n        marca_id: p.marca_id,\n        subcategoria_id: p.subcategoria_id\n      });\n    } else {\n      this.lista.get (producto.objectID).cantidad++;\n    }\n\n    this.input.nativeElement.value = \"\";\n    this.input.nativeElement.focus ();\n    this.showToast ('El propucto se agrego correctamente', true, 'basic');\n  }\n\n  eliminar_producto (producto_id: string) {\n    this.lista.delete (producto_id);\n  }\n\n  get_total () {\n    let total: number = 0;\n    this.lista.forEach (element => {\n      total += element.precio * element.cantidad;\n    });\n\n    return this.get_total_format (total);\n  }\n\n  onSearchType (value: string) {\n    this.search_loading = true;\n    this.productos_busqueda = [];\n\n    this.algolia_index.search (value)\n    .then ((data: any)=>{\n      this.search_loading = false;\n\n      if (data.hits.find ((x: any) => x.id === value) !== undefined) {\n        console.log (data.hits.find ((x: any) => x.id === value));\n        this.selectProducto (data.hits.find ((x: any) => x.id === value));\n        return;\n      }\n\n      if (data.hits.find ((x: any) => x.sku === value) !== undefined) {\n        this.selectProducto (data.hits.find ((x: any) => x.sku === value));\n        return;\n      }\n\n      this.productos_busqueda = data.hits;\n    })\n    .catch ((err: any) => {\n      this.search_loading = false;\n      console.log (err);\n    });\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_cantidad_articulos () {\n    let cantidad: number = 0;\n    this.lista.forEach ((i: any) => {\n      cantidad += i.cantidad;\n    });\n\n    return cantidad;\n  }\n\n  cobrar_confirmar (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  calcular_cambio () {\n    return this.form_venta.value.importe - this.get_total ();\n  }\n\n  descartar_confirm () {\n    if (confirm ('¿Esta seguro que desea descartar esta Orden?')) {\n      this.descartar ();\n    }\n  }\n\n  descartar () {\n    this.lista.clear ();\n    this.form_venta.reset ();\n\n    this.form_venta.controls ['tipo'].setValue ('rapido');\n    this.form_venta.controls ['tipo_pago'].setValue ('efectivo');\n    this.form_venta.controls ['tipo_comprobante'].setValue ('boleta');\n    this.form_venta.controls ['imprimir_ticket'].setValue (true);\n  }\n\n  validar_cobrar () {\n    let returned: boolean = true;\n    if (this.form_venta.value.tipo_pago === 'efectivo') {\n      if (this.calcular_cambio () > 0 && this.form_venta.value.importe !== 0) {\n        returned = false;\n      }\n    } else {\n      returned = this.form_venta.invalid;\n    }\n\n    return returned;\n  }\n\n  showToast (mensaje: string, preventDuplicates, status: NbComponentStatus) {\n    const iconConfig: NbIconConfig = { icon: 'checkmark-circle-outline', pack: 'eva' };\n    this.toastrService.show (\n      mensaje,\n      'Mensaje',\n      { preventDuplicates, status });\n  }\n\n  abrir_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  validar_admi (ref: any) {\n    this.loading = true;\n    const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.abri_caja_data (ref);\n    } else {\n      this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n        if (res.length > 0) {\n          this.abri_caja_data (ref);\n        } else {\n          this.loading = false;\n          alert ('Usuario invalido');\n        }\n      }).catch ((error: any) => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  abri_caja_data (ref: any) {\n    let data: any = {\n      id: this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      fecha: moment ().format ('DD[-]MM[-]YYYY'),\n      hora: moment ().format ('h:mm'),\n      nombre: this.auth.usuario.nombre,\n      cajero_actual: {\n        tmp_id: this.database.createId (),\n        cajero_id: this.form_abrir_caja.value.cajero_actual.id,\n        nombre: this.form_abrir_caja.value.cajero_actual.nombre,\n        fecha_entrada: moment ().format ('L'),\n        hora_entrada: moment ().format ('h:mm'),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura\n      },\n      instancia_actual: {\n        tmp_id: this.database.createId (),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura,\n        fecha_apertura: moment ().format ('L'),\n        hora_apertura: moment ().format ('h:mm'),\n      },\n      caja_abierta: true,\n    };\n\n    this.database.add_post_data (data).then (() => {\n      this.showToast ('La caja se abrio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  caja_abierta () {\n    if (this.caja_data === undefined) {\n      return false;\n    }\n\n    if (this.caja_data.cajero_actual !== null && this.caja_data.caja_abierta === true) {\n      return true;\n    }\n\n    return false;\n  }\n\n  submit (ref: any) {\n    this.loading = true;\n\n    let lista: any [] = [];\n    this.lista.forEach ((value: any) => {\n      lista.push (value);\n    });\n\n    let data: any = {\n      id: this.database.createId (),\n      fecha: moment ().format ('YYYY[-]MM[-]DD'),\n      hora: moment ().format ('HH:mm'),\n      importe: this.form_venta.value.importe,\n      pos_id: this.caja_data.id,\n      pos_nombre: this.caja_data.nombre,\n      cajero_id: this.caja_data.cajero_actual.cajero_id,\n      cajero_tmp_id: this.caja_data.cajero_actual.tmp_id,\n      cajero_nombre: this.caja_data.cajero_actual.nombre,\n      instancia_id: this.caja_data.instancia_actual.tmp_id,\n      total: this.get_total (),\n      tipo_comprobante: this.form_venta.value.tipo_comprobante,\n      nro_comprobante: this.form_venta.value.nro_comprobante,\n      cliente_nombre: this.form_venta.value.cliente_nombre,\n      productos: lista\n    };\n\n    this.database.registrar_venta (this.caja_data, data)\n      .then (() => {\n        this.loading = false;\n        console.log ('Registrado correctamente');\n        this.showToast ('Registro exitoso', false, 'success');\n        this.descartar ();\n        ref.close ();\n      })\n      .catch (() => {\n        this.loading = false;\n        ref.close ();\n      });\n  }\n\n  get_registrar_nombre () {\n    return 'Registrar ' + this.search_text;\n  }\n\n  async confirmar_cambio_cajero (dialog: any) {\n    const res = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      venta.productos.forEach ((producto: any) => {\n        total += producto.cantidad * producto.precio;\n      });\n    });\n\n    return this.get_total_format (total);\n  }\n\n  cambiar_cajero (ref: any) {\n    this.loading = true;\n    this.loading = true;\n    const cajero_correo = this.form_abrir_caja.value.admi_correo;\n    const cajero_password = this.form_abrir_caja.value.admi_password;\n\n    if (cajero_correo === this.form_abrir_caja.value.cajero_actual.correo && cajero_password && this.form_abrir_caja.value.cajero_actual.password) {\n      this.cambiar_caja_data (ref);\n    } else {\n      this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password).then ((res: any []) => {\n        if (res.length > 0) {\n          this.cambiar_caja_data (ref);\n        } else {\n          this.loading = false;\n          alert ('Usuario invalido');\n        }\n      }).catch ((error: any) => {\n        this.loading = false;\n        console.log (error);\n      });\n    }\n  }\n\n  cambiar_caja_data (ref: any) {\n    let data: any = {\n      id: this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY'),\n      nombre: this.auth.usuario.nombre,\n      monto_apertura: this.form_abrir_caja.value.monto_apertura,\n      fecha_apertura: moment ().format ('L'),\n      hora_apertura: moment ().format ('h:mm'),\n      cajero_actual: {\n        tmp_id: this.database.createId (),\n        cajero_id: this.form_abrir_caja.value.cajero_actual.id,\n        nombre: this.form_abrir_caja.value.cajero_actual.nombre,\n        fecha_entrada: moment ().format ('L'),\n        hora_entrada: moment ().format ('h:mm'),\n        monto_apertura: this.form_abrir_caja.value.monto_apertura\n      },\n      caja_abierta: true\n    };\n\n    this.database.update_post_data (data).then (() => {\n      this.showToast ('La caja se cambio correctamente', false, 'success');\n      ref.close ();\n      this.loading = false;\n    })\n    .catch ((error: any) => {\n      console.log (error);\n      this.loading = false;\n    });\n  }\n\n  valid_max_min (value: number, max: number, min: number) {\n    if (value > max) {\n      value = max;\n    }\n\n    if (value < min) {\n      value = min;\n    }\n  }\n\n  validar_cambiar_cajero (total: any) {\n    let returned: boolean = true;\n    let value = (total + this.caja_data.cajero_actual.monto_apertura) - this.form_abrir_caja.value.monto_apertura;\n    if (this.form_abrir_caja.valid && value >= 0) {\n      returned = false;\n    }\n\n    return returned;\n  }\n\n  async reporte_cajero (dialog: any) {\n    let res = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  async reporte_total (dialog: any) {\n    let res = await this.database.get_ventas_total (this.caja_data.id, this.caja_data.instancia_actual.tmp_id);\n    this.dialogService.open (dialog, {\n      context: {\n        ventas: res\n      }\n    });\n  }\n\n  confirmar_cerrar_caja (dialog: any) {\n    this.dialogService.open (dialog);\n  }\n\n  cerrar_caja (ref: any) {\n    this.loading = true;\n\n    this.database.validar_admin_is_valid (this.form_abrir_caja.value.admi_correo, this.form_abrir_caja.value.admi_password)\n    .then ((res: any []) => {\n      if (res.length > 0) {\n        this.database.cerrar_pos (this.caja_data)\n          .then (() => {\n            this.showToast ('La caja se cerro correctamente', false, 'success');\n            this.loading = false;\n            ref.close ();\n          })\n          .catch ((error: any) => {\n            this.loading = false;\n            console.log (error);\n          });\n      } else {\n        this.loading = false;\n        alert (\"!Usuario invalido¡\");\n      }\n    })\n    .catch ((error: any) => {\n      this.loading = false;\n      console.log (error);\n    });\n  }\n\n  async agregar_nota_credito () {\n    let id = prompt ('Ingrese la nota de credito');\n    let nota_c: any = await this.database.get_nota_credito (id);\n    console.log (nota_c);\n\n    this.lista.set (nota_c.id, {\n      id: nota_c.id,\n      nombre: 'Nota de credito',\n      cantidad: 1,\n      orden: this.lista.size + 1,\n      precio: -nota_c.total,\n      stock: 1,\n      categoria_id: '',\n      marca_id: '',\n      subcategoria_id: '',\n      es_producto: false\n    });\n  }\n}\n","<ng-template #dialog_cobro let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_venta\" [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Realizar pedido</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-select placeholder=\"Seleccione una opcion\" formControlName=\"tipo\">\n            <nb-option value=\"rapido\">Rapido</nb-option>\n            <nb-option value=\"completo\">Completo</nb-option>\n          </nb-select>\n        </div>\n      </div>\n\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"text-center\">\n        <h3>{{ get_total () | currency:'S/. ' }}</h3>\n      </div>\n      <br>\n      <div class=\"linked text-center\">\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'efectivo' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('efectivo')\"\n          nbButton>\n          <nb-icon icon=\"npm-outline\"></nb-icon>\n          Efectivo\n        </button>\n        <button\n          [status]=\"form_venta.value.tipo_pago === 'tarjeta' ? 'primary' : 'basic'\"\n          (click)=\"cambiar_tipo_pago ('tarjeta')\"\n          nbButton>\n          <nb-icon icon=\"credit-card-outline\"></nb-icon>\n          Tarjeta de credito\n        </button>\n      </div>\n      <br>\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'efectivo'\">\n        <div>\n          <label><b>Pago con:</b></label>\n        </div>\n        <div class=\"linked\">\n          <input nbInput fieldSize=\"medium\" type=\"number\" min=\"0\" style=\"width: 120px;\" formControlName=\"importe\">\n          <button\n            [status]=\"form_venta.value.importe === 10 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (10)\"\n            status=\"primary\"\n            *ngIf=\"get_total () < 10\"\n            nbButton>S/. 10\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 20 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (20)\"\n            *ngIf=\"get_total () < 20\"\n            nbButton>S/. 20\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 50 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (50)\"\n            *ngIf=\"get_total () < 50\"\n            nbButton>S/. 50\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 100 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (100)\"\n            *ngIf=\"get_total () < 100\"\n            nbButton>S/. 100\n          </button>\n          <button\n            [status]=\"form_venta.value.importe === 200 ? 'primary' : 'basic'\"\n            (click)=\"form_venta.controls ['importe'].setValue (200)\"\n            *ngIf=\"get_total () < 200\"\n            nbButton>S/. 200\n          </button>\n        </div>\n        <br>\n        <div>\n          <label><b>Su cambio:</b></label>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () < 0\">\n          Ingrese un importe valido\n          <br>\n          <br>\n        </div>\n\n        <div *ngIf=\"calcular_cambio () > 0\">\n          <h6>{{ calcular_cambio () | currency:'S/. ' }}</h6>\n        </div>\n      </ng-container>\n\n      <ng-container *ngIf=\"form_venta.value.tipo_pago === 'tarjeta'\">\n        <div>\n          <label><b>Codigo:</b></label>\n        </div>\n        <input nbInput fullWidth fieldSize=\"medium\" type=\"text\" formControlName=\"tarjeta_cod_ref\">\n        <br>\n        <br>\n      </ng-container>\n\n      <div>\n        <nb-checkbox formControlName=\"imprimir_ticket\">Imprimir ticket</nb-checkbox>\n      </div>\n      <br>\n      <div *ngIf=\"form_venta.value.tipo === 'completo'\">\n        <div class=\"row\">\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"tipo_comprobante\"><b>Tipo de comprobante</b></label>\n              <nb-select fullWidth id=\"tipo_comprobante\" placeholder=\"Seleccione una opcion\" formControlName=\"tipo_comprobante\">\n                <nb-option value=\"boleta\">Boleta</nb-option>\n                <nb-option value=\"factura\">Factura</nb-option>\n              </nb-select>\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"nro_comprobante\"><b>N° de comprobante</b></label>\n              <input nbInput fullWidth id=\"nro_comprobante\" formControlName=\"nro_comprobante\" type=\"text\">\n            </div>\n          </div>\n\n          <div class=\"col-4\">\n            <div class=\"form-group\">\n              <label for=\"cliente_nombre\"><b>Nombre del cliente</b></label>\n              <input nbInput fullWidth id=\"cliente_nombre\" formControlName=\"cliente_nombre\" type=\"text\">\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <button nbButton status=\"success\" [disabled]=\"validar_cobrar ()\" (click)=\"submit (ref)\" fullWidth>Cobrar</button>\n      </div>\n    </nb-card-body>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_abrir_caja let-data let-ref=\"dialogRef\">\n  <nb-card [formGroup]=\"form_abrir_caja\" [nbSpinner]=\"loading\" autocomplete=\"off\">\n    <nb-card-header>\n      <h6>Apertura de caja</h6>\n    </nb-card-header>\n\n    <nb-card-body>\n      <div class=\"form-group\">\n        <label for=\"monto_apertura\"><b>Monto de apertura</b></label>\n        <input formControlName=\"monto_apertura\" nbInput fullWidth id=\"monto_apertura\" type=\"number\">\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"cajero_actual\"><b>Cajero</b></label>\n        <nb-select fullWidth id=\"cajero_actual\" placeholder=\"Seleccione una opcion\" formControlName=\"cajero_actual\">\n          <nb-option *ngFor=\"let item of cajeros\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n      <br>\n      <div class=\"form-group\">\n        <label for=\"admi_correo\"><b>Correo</b></label>\n        <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"admi_password\"><b>Contraseña</b></label>\n        <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"form_abrir_caja.invalid\" (click)=\"validar_admi (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cambio_cajero let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cambio de cajero</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <nb-card-body *ngIf=\"!ver_ventas\" [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Monto a retirar:</b> {{ (get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura) - form_abrir_caja.value.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"monto_apertura\"><b>Dejar en caja</b></label>\n              <input\n                formControlName=\"monto_apertura\"\n                nbInput fullWidth id=\"monto_apertura\"\n                type=\"number\">\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"cajero_actual\"><b>Cajero</b></label>\n              <nb-select fullWidth id=\"cajero_actual\" placeholder=\"Seleccione una opcion\" formControlName=\"cajero_actual\">\n                <nb-option *ngFor=\"let item of get_cajeros_validos (cajeros)\" [value]=\"item\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <br>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" autocomplete=\"new-password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" [disabled]=\"validar_cambiar_cajero (get_total_lista (data.ventas))\" (click)=\"cambiar_cajero (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_reporte let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <h6>Reporte</h6>\n    </nb-card-header>\n\n    <div style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.cajero_nombre }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n      </table>\n    </div>\n\n    <nb-card-footer style=\"display: inline-flex;\">\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      <div style=\"width: 100%; text-align: end; align-self: center;\">\n        <h6>Total: {{ get_total_lista (data.ventas) | currency:'S/. ' }}</h6>\n      </div>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<ng-template #dialog_cerrar_caja let-data let-ref=\"dialogRef\">\n  <nb-card>\n    <nb-card-header>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <h6>Cerrar caja</h6>\n        </div>\n\n        <div class=\"col-6 text-right\">\n          <nb-toggle labelPosition=\"start\" [(ngModel)]=\"ver_ventas\">Ventas</nb-toggle>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <nb-card-body *ngIf=\"!ver_ventas\" [formGroup]=\"form_abrir_caja\">\n      <div>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div>\n              <label><b>Inicio de caja:</b> {{ caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n\n            <div>\n              <label><b>Total en caja:</b> {{ get_total_lista (data.ventas) + caja_data.cajero_actual.monto_apertura | currency:'S/. ' }}</label>\n            </div>\n          </div>\n\n          <div class=\"col-6\">\n            <div>\n              <label><b>Venta total:</b> {{ get_total_lista (data.ventas) | currency:'S/. ' }}</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_correo\"><b>Correo</b></label>\n          <input formControlName=\"admi_correo\" nbInput fullWidth id=\"admi_correo\" type=\"email\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"admi_password\"><b>Contraseña</b></label>\n          <input formControlName=\"admi_password\" nbInput fullWidth id=\"admi_password\" type=\"password\">\n        </div>\n      </div>\n    </nb-card-body>\n\n    <div *ngIf=\"ver_ventas\" style=\"overflow-y: scroll; height: 300px;\">\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of data.ventas\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n              <td class=\"text-right\" colspan=\"3\">Total:</td><td class=\"right\">{{ get_total_lista (data.ventas) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n\n    <nb-card-footer>\n      <button nbButton status=\"base\" (click)=\"ref.close ()\">Cerrar</button>\n      &nbsp;\n      <button nbButton status=\"success\" (click)=\"cerrar_caja (ref)\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout [nbSpinner]=\"loading\">\n  <nb-layout-header>\n    <div class=\"row\" style=\"width: 100%;\" *ngIf=\"caja_abierta () === true\">\n      <div class=\"col-10\" style=\"display: grid;\">\n        <span class=\"cajero-nombre\">{{ caja_data?.cajero_actual.nombre }}</span>\n        <span class=\"cajero-tiempo\">Conectado a: {{ caja_data?.cajero_actual.hora_entrada }} {{ caja_data?.cajero_actual.fecha_entrada }}</span>\n      </div>\n\n      <div class=\"col-2 text-right\">\n        <button nbButton [nbPopover]=\"templateRef\" nbPopoverPlacement=\"bottom\" ghost><nb-icon icon=\"settings-2-outline\"></nb-icon></button>\n        <ng-template #templateRef>\n          <div style=\"display: table-caption;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cambio_cajero (dialog_cambio_cajero)\">\n              <nb-icon icon=\"flip-2-outline\"></nb-icon>Cambiar cajero\n            </button>\n            <hr style=\"margin: 0px;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"reporte_cajero (dialog_reporte)\">\n              <nb-icon icon=\"book-outline\"></nb-icon>Reporte cajero\n            </button>\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"reporte_total (dialog_reporte)\">\n              <nb-icon icon=\"book-outline\"></nb-icon>Reporte venta total\n            </button>\n            <hr style=\"margin: 0px;\">\n            <button style=\"border-radius: 0px;\" ghost nbButton (click)=\"confirmar_cambio_cajero (dialog_cerrar_caja)\">\n              <nb-icon icon=\"close-circle-outline\"></nb-icon>Cerrar caja\n            </button>\n          </div>\n        </ng-template>\n      </div>\n    </div>\n\n    <div class=\"row\" *ngIf=\"caja_abierta () === false\">\n      <button nbButton status=\"primary\" style=\"margin-left: 1rem;\" (click)=\"abrir_caja (dialog_abrir_caja)\">\n        Abrir caja\n      </button>\n    </div>\n  </nb-layout-header>\n\n  <nb-layout-column>\n    <nb-card size=\"small\">\n      <nb-card-header>\n        <input [(ngModel)]=\"search_text\" style=\"border-radius: 6px 0px 0px 6px; width: 100%;\" type=\"search\" #input nbInput autofocus placeholder=\"Busca algun producto...\">\n      </nb-card-header>\n\n      <nb-list [nbSpinner]=\"search_loading\">\n        <!-- <nb-list-item *ngIf=\"productos_busqueda.length <= 0 && search_text !== '' && search_loading === false\">\n          <nb-user [name]=\"get_registrar_nombre ()\" showTitle=false picture=\"https://simpleicon.com/wp-content/uploads/plus-256x256.png\" shape=\"rectangle\">\n          </nb-user>\n        </nb-list-item> -->\n\n        <nb-list-item *ngFor=\"let item of productos_busqueda\">\n          <nb-user [name]=\"item.nombre\" showTitle=false [picture]=\"item.imagen\" shape=\"rectangle\">\n          </nb-user>\n          <button nbButton ghost status=\"primary\" (click)=\"selectProducto (item)\">\n            <nb-icon icon=\"arrow-forward-outline\"></nb-icon>\n          </button>\n        </nb-list-item>\n      </nb-list>\n    </nb-card>\n  </nb-layout-column>\n\n  <nb-layout-column>\n    <nb-card size=\"small\">\n      <nb-card-header style=\"display: flex; align-items: center;\">\n        <h6 style=\"width: 100%;\">Lista de orden</h6>\n        <div style=\"width: 100%;\" class=\"text-right\">\n          <h6>{{ get_cantidad_articulos () }} articulos</h6>\n        </div>\n      </nb-card-header>\n\n      <div style=\"overflow-y: scroll; height: 100%;\">\n        <table class=\"table table-sm table-striped\">\n          <thead>\n            <tr>\n              <th scope=\"col\">N°</th>\n              <th scope=\"col\">Producto</th>\n              <th scope=\"col\">Unidades</th>\n              <th scope=\"col\">Precio</th>\n              <th scope=\"col\">Total</th>\n              <th scope=\"col\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of lista | keyvalue\">\n              <th scope=\"row\">{{ item.value.orden }}</th>\n              <td>{{ item.value.nombre }}</td>\n              <td>\n                <input [min]=\"1\" [max]=\"item.value.stock\" type=\"number\" style=\"width: 84px;\" fieldSize=\"small\" [(ngModel)]=\"item.value.cantidad\" nbInput>\n              </td>\n              <td>\n                {{ item.value.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.value.precio * item.value.cantidad) | currency:'S/. ' }}\n              </td>\n              <td>\n                <button nbButton ghost size=\"small\" status=\"danger\" (click)=\"eliminar_producto (item.value.id)\">\n                  <nb-icon icon=\"close-outline\"></nb-icon>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <nb-card-footer style=\"display: flex; align-items: center;\">\n        <button nbTooltip=\"Limpiar\" nbButton outline status=\"danger\" (click)=\"descartar_confirm ()\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"trash-2\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Imprimir\" style=\"margin-left: 1rem;\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"printer\"></nb-icon>\n        </button>\n\n        <button nbTooltip=\"Registrar nota de credito\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"file-text\"></nb-icon>\n        </button>\n\n        <!-- <button nbTooltip=\"Registrar ingreso/egreso\" style=\"margin-left: 1rem;\" (click)=\"agregar_nota_credito ()\" nbButton outline status=\"info\" [disabled]=\"lista.size <= 0\">\n          <nb-icon icon=\"plus-square\"></nb-icon>\n        </button> -->\n\n        <div style=\"width: 100%;\" class=\"text-right\">\n          <button nbButton outline size=\"giant\" status=\"success\" (click)=\"cobrar_confirmar (dialog_cobro)\" [disabled]=\"lista.size <= 0 || caja_abierta () === false || get_total () < 0\">\n            Cobrar:\n            {{ get_total () | currency:'S/. ' }}\n          </button>\n        </div>\n      </nb-card-footer>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { finalize } from 'rxjs/operators';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\nimport { first, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngx-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n  items: any [] = [];\n  _items: any [] = [];\n\n  avatar_preview: any = null;\n  file: any = null;\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  text: string = '';\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private af_storage: AngularFireStorage,\n    private afs: AngularFirestore\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      linea_comida: new FormControl ('', [Validators.required]),\n      logotipo: new FormControl (''),\n      telefono: new FormControl ('', [Validators.required]),\n      correo: new FormControl ('', [Validators.required]),\n      orden: new FormControl (0),\n      color: new FormControl ('#3689e6', [Validators.required]),\n      habilitado: new FormControl (true)\n    });\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.items = res;\n      this._items = res;\n      this.loading = false;\n      console.log (res);\n    });\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      if (this.file === null) {\n        this.database.update_empresa (data)\n        .then (() => {\n          this.cancelar (dialog);\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          this.cancelar (dialog);\n        });\n      } else {\n        this.uploadImageAsPromise (this.file, data, dialog, true);\n      }\n    } else {\n      data.id = this.database.createId ();\n\n      if (this.file === null) {\n        this.database.add_empresa (data)\n          .then (() => {\n            this.cancelar (dialog);\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.cancelar (dialog);\n          });\n      } else {\n        this.uploadImageAsPromise (this.file, data, dialog);\n      }\n    }\n  }\n\n  uploadImageAsPromise (file: any, data: any, dialog: any, edit: boolean = false) {\n    const filePath = 'Empresas/' + data.id;\n    const fileRef = this.af_storage.ref (filePath);\n    const task = this.af_storage.upload (filePath, file);\n\n    task.percentageChanges().subscribe ((res: any) => {\n\n    });\n\n    task.snapshotChanges().pipe (\n      finalize(async () => {\n        let downloadURL = await fileRef.getDownloadURL ().toPromise();\n\n        data.logotipo = downloadURL;\n\n        if (edit) {\n          this.database.update_empresa (data)\n            .then (() => {\n              this.cancelar (dialog);\n            })\n            .catch ((error: any) => {\n              console.log ('error', error);\n              this.cancelar (dialog);\n            });\n        } else {\n          this.database.add_empresa (data)\n          .then (() => {\n            this.cancelar (dialog);\n          })\n          .catch ((error: any) => {\n            console.log ('error', error);\n            this.cancelar (dialog);\n          });\n        }\n      })\n    )\n    .subscribe ();\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n    this.avatar_preview = item.logotipo;\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_empresa (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    this.loading = false;\n\n    this.file = null;\n    this.avatar_preview = \"\";\n\n    dialog.close ();\n    this.form.reset ();\n  }\n\n  cambiar_estado (item: any) {\n    this.loading = true;\n\n    item.habilitado = !item.habilitado;\n    this.database.update_empresa (item)\n      .then (() => {\n        this.loading = false;\n      })\n      .catch ((error: any) => {\n        console.log ('error', error);\n        this.loading = false;\n      });\n  }\n\n  filter () {\n    // console.log (this.search_text);\n    // console.log (this.search_text);\n\n    // this.items = this._items;\n\n    // if (this.elemento_filtro === 'todos') {\n    //   this.items = this.items.filter ((item: any) => {\n    //     return item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1;\n    //   });\n    // } else {\n    //   this.items = this.items.filter ((item: any) => {\n    //     return (item.data.nombre.toLowerCase().indexOf (this.search_text.toLowerCase()) > -1) && item.menu_elemento.id === this.elemento_filtro;\n    //   });\n    // }\n  }\n\n  changeListener (event: any) {\n    this.file = event.target.files[0];\n    this.getBase64 (this.file);\n  }\n\n  getBase64(file: any) {\n    var reader = new FileReader ();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.avatar_preview = reader.result;\n    };\n\n    reader.onerror = (error) => {\n\n    };\n  }\n\n  getTextColor(color) {\n    let rgba: any = this.hexToRgb (color).match(/\\d+/g);\n    if ((rgba[0] * 0.299) + (rgba[1] * 0.587) + (rgba[2] * 0.114) > 186) {\n        return 'black';\n    } else {\n        return 'white';\n    }\n  }\n\n  hexToRgb (hex) {\n    var bigint = parseInt(hex, 16);\n    var r = (bigint >> 16) & 255;\n    var g = (bigint >> 8) & 255;\n    var b = bigint & 255;\n\n    return r + \",\" + g + \",\" + b;\n  }\n\n  async export () {\n    let data = await this.afs.collection ('Ventas_Tienda_Producto').valueChanges ().pipe (first ()).toPromise ();\n    const jsonContent = JSON.stringify(data);\n    console.log (jsonContent);\n  }\n\n  handleFileInput (files: FileList) {\n    console.log (files);\n  }\n\n  async import () {\n    let list: any [] = JSON.parse (this.text);\n\n    // const wordsPerLine = Math.ceil(list.length / 2)\n    // const result = [[], []]\n\n    // for (let line = 0; line < 2; line++) {\n    //   for (let i = 0; i < wordsPerLine; i++) {\n    //     const value = list[i + line * wordsPerLine]\n    //     if (!value) continue //avoid adding \"undefined\" values\n    //     result[line].push(value)\n    //   }\n    // }\n\n    // console.log (result);\n\n    // result.forEach (async (l) => {\n    //   let batch = this.afs.firestore.batch ();\n    //   l.forEach ((item: any) => {\n    //     batch.set (\n    //       this.afs.collection ('Tienda_Productos').doc (item.id).ref,\n    //       item\n    //     );\n    //   });\n\n    //   await batch.commit ().then (() => {\n    //     console.log ('Finalizado')\n    //   }, error => {\n    //     console.log (error);\n    //   });\n    // });\n\n    console.log (list);\n    let batch = this.afs.firestore.batch ();\n    list.forEach ((item: any) => {\n      batch.set (\n        this.afs.collection ('Ventas_Tienda_Producto').doc (item.id).ref,\n        item\n      );\n    });\n\n    await batch.commit ().then (() => {\n      console.log ('Finalizado')\n    }, error => {\n      console.log (error);\n    });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"row\">\n          <div class=\"col-6 offset-3\">\n            <div [className]=\"avatar_preview === null ? 'avatar-preview avatar-default' : 'avatar-preview'\">\n              <img *ngIf=\"avatar_preview !== null\" class=\"avatar-image\" [src]=\"avatar_preview\">\n            </div>\n\n            <div class=\"\" (click)=\"fileInput.click ()\">\n              <button style=\"margin-top: 1rem;\" fullWidth size=\"tiny\" nbButton>Seleccionar</button>\n              <input hidden type=\"file\" accept=\"image/*\" #fileInput (change)=\"changeListener ($event)\">\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"linea_comida\" class=\"label\">Linea de comida:</label>\n          <input type=\"text\" formControlName=\"linea_comida\" id=\"linea_comida\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"telefono\" class=\"label\">Telefono:</label>\n              <input type=\"tel\" formControlName=\"telefono\" id=\"telefono\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Correo:</label>\n              <input type=\"email\" formControlName=\"correo\" id=\"correo\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"color\" class=\"label\">Color:</label>\n              <input\n                [colorPicker]=\"form.get('color').value\"\n                [value]=\"form.get('color').value\"\n                (colorPickerChange)=\"form.get ('color').setValue ($event)\"\n                [cpOutputFormat]=\"hex\"\n                formControlName=\"color\"\n                nbInput fullWidth type=\"text\" id=\"color\"/>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"orden\" class=\"label\">Orden:</label>\n              <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-card>\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-9\">\n        <h5>Empresas</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <div class=\"row\">\n      <div class=\"col-4\" *ngFor=\"let item of items\">\n        <nb-card>\n          <nb-card-header [ngStyle]=\"{ 'background-color': item.color }\">\n            <div class=\"row\">\n              <div class=\"col-9\" [ngStyle]=\"{ 'color': getTextColor (item.color) }\">\n                {{ item.nombre }}\n              </div>\n\n              <div class=\"col-3\">\n                <img class=\"header-image\" [src]=\"item.logotipo\">\n              </div>\n            </div>\n          </nb-card-header>\n          <nb-card-body style=\"display: grid;\">\n            <b>Telefono:</b>\n            {{ item.telefono }}\n            <b>Correo:</b>\n            {{ item.correo }}\n          </nb-card-body>\n          <nb-card-footer style=\"display: inline-flex;\">\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/cartas/' + item.id\">\n              <nb-icon status=\"primary\" icon=\"book-open-outline\"></nb-icon>\n            </button>\n\n            <button *ngIf=\"item.pos === true\" nbButton fullWidth size=\"small\" title=\"Gestionar Mesas\" ghost [routerLink]=\"'/pages/gestionar-mesas/' + item.id\">\n              <nb-icon status=\"primary\" icon=\"layout-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost [routerLink]=\"'/pages/almacen/' + item.id\">\n              <nb-icon status=\"primary\" title=\"Gestionar almacen\" icon=\"cube-outline\"></nb-icon>\n            </button>\n\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"cambiar_estado (item)\">\n              <nb-icon *ngIf=\"item.habilitado\" status=\"success\" title=\"Click para deshabilitar\" icon=\"eye-outline\"></nb-icon>\n              <nb-icon *ngIf=\"!item.habilitado\" status=\"danger\" title=\"Click para habilitar\" icon=\"eye-off-outline\"></nb-icon>\n            </button>\n          </nb-card-footer>\n        </nb-card>\n      </div>\n    </div>\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n@Component({\n  selector: 'ngx-insumos-categoria',\n  templateUrl: './insumos-categoria.component.html',\n  styleUrls: ['./insumos-categoria.component.scss']\n})\nexport class InsumosCategoriaComponent implements OnInit {\n  items: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_insumos_categoria ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_insumo_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_insumo_categoria (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo_categoria (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth placeholder=\"Nombre\">\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!-- <nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-9\">\n        <h5>Categorias de insumos</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton fullWidth status=\"success\" (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Nombre</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n\n          <td>\n            {{ item.nombre }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card> -->\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Categorias de insumos</h5>\n      </div>\n\n      <div class=\"col-6\">\n        <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar categoria...\">\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n    <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n    <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n        {{ customColumn }}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n        {{row.data [customColumn]}}\n      </td>\n    </ng-container>\n\n    <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                  [nbTreeGridColumnDef]=\"column\"\n                  [showOn]=\"getShowOn(index)\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n        {{column}}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <div *ngIf=\"row.data [column] !== 'accion'\">\n          {{ row.data [column] }}\n        </div>\n\n        <div *ngIf=\"row.data [column] === 'accion'\">\n          <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n            <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n          </button>\n        </div>\n      </td>\n    </ng-container>\n  </table>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-insumos',\n  templateUrl: './insumos.component.html',\n  styleUrls: ['./insumos.component.scss']\n})\nexport class InsumosComponent implements OnInit {\n  categorias: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Unidad', 'Precio', 'Categoria', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      unidad_medida: new FormControl ('', [Validators.required]),\n      precio: new FormControl (0, [Validators.required]),\n      categoria_id: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_insumos ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_insumos_categoria ().subscribe ((res: any []) => {\n      this.categorias = res;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i.data,\n          Nombre: i.data.nombre,\n          Unidad: i.data.unidad_medida,\n          Precio: i.data.precio,\n          Categoria: i.categoria.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_insumo (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_insumo (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  eliminar (data: any) {\n    console.log ('Eliminar', data);\n    this.database.eliminar_insumo (data.id);\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"unidad_medida\" class=\"label\">Unidad de medida:</label>\n              <nb-select formControlName=\"unidad_medida\" id=\"unidad_medida\" fullWidth>\n                <nb-option value=\"g\">Gramos</nb-option>\n                <nb-option value=\"kg\">Kilos</nb-option>\n                <nb-option value=\"L\">Litros</nb-option>\n                <nb-option value=\"uds.\">Unidades</nb-option>\n              </nb-select>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"categoria\" class=\"label\">Categoria:</label>\n              <nb-select formControlName=\"categoria_id\" id=\"categoria\" fullWidth>\n                <nb-option *ngFor=\"let item of categorias\" [value]=\"item.id\">\n                  {{ item.nombre }}\n                </nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <!-- <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon> -->\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-body>\n    <nb-card-header>\n      <div class=\"row align-items-center\">\n        <div class=\"col-3\">\n          <h5>Insumos</h5>\n        </div>\n\n        <div class=\"col-6\">\n          <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar insumo...\">\n        </div>\n\n        <div class=\"col-3\">\n          <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n      <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n      <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n      <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n          {{ customColumn }}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n          {{row.data [customColumn]}}\n        </td>\n      </ng-container>\n\n      <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                    [nbTreeGridColumnDef]=\"column\"\n                    [showOn]=\"getShowOn(index)\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n          {{column}}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <div *ngIf=\"row.data [column] !== 'accion'\">\n            <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n            <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n          </div>\n\n          <div *ngIf=\"row.data [column] === 'accion'\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"eliminar (row.data ['data'])\">\n              E\n            </button> -->\n          </div>\n        </td>\n      </ng-container>\n    </table>\n\n  </nb-card-body>\n</nb-card>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-menu-elementos',\n  templateUrl: './menu-elementos.component.html',\n  styleUrls: ['./menu-elementos.component.scss']\n})\nexport class MenuElementosComponent implements OnInit {\n  items: any [] = [];\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Orden', 'Precio', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      orden: new FormControl (0),\n      precio: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n      this.loading = false;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i,\n          Nombre: i.nombre,\n          Orden: i.orden,\n          Precio: i.precio,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_menu_elemento (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_menu_elemento (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.form.reset ();\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    console.log (item);\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_menu_elemento (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"orden\" class=\"label\">Orden:</label>\n          <input type=\"number\" formControlName=\"orden\" id=\"orden\" nbInput fullWidth>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"precio\" class=\"label\">Precio:</label>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!--nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row\">\n      <div class=\"col-9\">\n        <h5>Menu elementos</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton fullWidth status=\"success\" (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <!-- <th scope=\"col\">Codigo</th>\n          <th scope=\"col\">Nombre</th>\n          <th scope=\"col\">Orden</th>\n          <th scope=\"col\">Precio</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n          <td>\n            {{ item.nombre }}\n          </td>\n\n          <td>\n            {{ item.orden }}\n          </td>\n\n          <td>\n            {{ item.precio | currency:'S/. ' }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"delete (item)\">\n              <nb-icon status=\"primary\" icon=\"trash-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card-->\n\n<nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Menu elementos</h5>\n      </div>\n\n      <div class=\"col-6\">\n        <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar elementos...\">\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n    <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n    <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n        {{ customColumn }}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n        {{row.data [customColumn]}}\n      </td>\n    </ng-container>\n\n    <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                  [nbTreeGridColumnDef]=\"column\"\n                  [showOn]=\"getShowOn(index)\">\n      <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n        {{column}}\n      </th>\n      <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n        <div *ngIf=\"row.data [column] !== 'accion'\">\n          <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n          <span *ngIf=\"column !== 'Precio'\">{{ row.data [column] }}</span>\n        </div>\n\n        <div *ngIf=\"row.data [column] === 'accion'\">\n          <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n            <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n          </button>\n        </div>\n      </td>\n    </ng-container>\n  </table>\n</nb-card>\n\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss']\n})\nexport class MenuComponent implements OnInit {\n  elementos: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Menu', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      // precio: new FormControl (0),\n      elemento_menu_id: new FormControl ('', [Validators.required])\n    });\n\n    this.database.get_menus ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_menu_elementos ().subscribe ((res: any []) => {\n      this.elementos = res;\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      returned.push ({\n        data: {\n          data: i.data,\n          Nombre: i.data.nombre,\n          Menu: i.menu_elemento.nombre,\n          Acciones: 'accion'\n        },\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n\n    if (editar) {\n      this.database.update_menu (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_menu (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_menu (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n    this.form.reset ();\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"elemento_menu_id\" class=\"label\">Menu elemento:</label>\n          <nb-select formControlName=\"elemento_menu_id\" id=\"elemento_menu_id\" fullWidth>\n            <nb-option *ngFor=\"let item of elementos\" [value]=\"item.id\">\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <!-- <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon>\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n        <!-- <div class=\"row\">\n          <div class=\"col-6\">\n\n          </div>\n          <div class=\"col-6\">\n\n          </div>\n        </div> -->\n\n\n        <!-- <div class=\"form-group\">\n          <div>\n            <label for=\"precio\" class=\"label\">Precio:</label>\n            &nbsp;\n            <nb-icon class=\"help-icon\" icon=\"question-mark-outline\"></nb-icon>\n          </div>\n          <input type=\"number\" formControlName=\"precio\" id=\"precio\" nbInput fullWidth>\n        </div> -->\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"!form.valid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<!-- <nb-card [nbSpinner]=\"loading\">\n  <nb-card-header>\n    <div class=\"row align-items-center\">\n      <div class=\"col-3\">\n        <h5>Menu</h5>\n      </div>\n\n      <div class=\"col-3\">\n        <input type=\"search\" [(ngModel)]=\"search_text\" nbInput fullWidth (ngModelChange)=\"filter ()\" placeholder=\"Buscar menu...\">\n      </div>\n\n      <div class=\"col-3\">\n        <nb-select [(ngModel)]=\"elemento_filtro\" id=\"elemento_menu_id\" fullWidth (selectedChange)=\"filter ()\">\n          <nb-option value=\"todos\">\n            Todos\n          </nb-option>\n\n          <nb-option *ngFor=\"let item of elementos\" [value]=\"item.id\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n\n      <div class=\"col-3\">\n        <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n      </div>\n    </div>\n  </nb-card-header>\n\n  <nb-card-body>\n    <table class=\"table table-bordered table-striped\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Nombre</th>\n          <!-- <th scope=\"col\">Icono</th> -->\n          <!-- <th scope=\"col\">Precio</th> -->\n          <!-- <th scope=\"col\">Stock</th>\n          <th scope=\"col\">Menu elemento</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let item of items\">\n          <!-- <td>\n            {{ item.id }}\n          </td>\n\n          <td>\n            {{ item.data.nombre }}\n          </td>\n\n          <!-- <td>\n            {{ item.icono }}\n          </td> -->\n\n          <!-- <td>\n            {{ item.data.precio | currency:'S/. ' }}\n          </td> -->\n\n          <!-- <td>\n            {{ item.stock }}\n          </td>\n\n          <td>\n            {{ item.menu_elemento.nombre }}\n          </td>\n\n          <!-- <td>\n            {{ item.precio }}\n          </td>\n\n          <td style=\"display: flex;\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (item.data, dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n\n            <!-- <button nbButton fullWidth size=\"small\" ghost (click)=\"delete (item.data)\">\n              <nb-icon status=\"primary\" icon=\"trash-outline\"></nb-icon>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </nb-card-body>\n</nb-card> -->\n\n<nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      <div class=\"row align-items-center\">\n        <div class=\"col-3\">\n          <h5>Menus</h5>\n        </div>\n\n        <div class=\"col-6\">\n          <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar menus...\">\n        </div>\n\n        <div class=\"col-3\">\n          <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n        </div>\n      </div>\n    </nb-card-header>\n\n    <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n\n      <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n      <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n      <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n          {{ customColumn }}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n          {{row.data [customColumn]}}\n        </td>\n      </ng-container>\n\n      <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                    [nbTreeGridColumnDef]=\"column\"\n                    [showOn]=\"getShowOn(index)\">\n        <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n          {{column}}\n        </th>\n        <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n          <div *ngIf=\"row.data [column] !== 'accion'\">\n            {{ row.data [column] }}\n          </div>\n\n          <div *ngIf=\"row.data [column] === 'accion'\">\n            <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n              <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n            </button>\n          </div>\n        </td>\n      </ng-container>\n    </table>\n</nb-card>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { MiscellaneousComponent } from './miscellaneous.component';\nimport { NotFoundComponent } from './not-found/not-found.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MiscellaneousComponent,\n    children: [\n      {\n        path: '404',\n        component: NotFoundComponent,\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MiscellaneousRoutingModule {\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'ngx-miscellaneous',\n  template: `\n    <router-outlet></router-outlet>\n  `,\n})\nexport class MiscellaneousComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { NbButtonModule, NbCardModule } from '@nebular/theme';\n\nimport { ThemeModule } from '../../@theme/theme.module';\nimport { MiscellaneousRoutingModule } from './miscellaneous-routing.module';\nimport { MiscellaneousComponent } from './miscellaneous.component';\nimport { NotFoundComponent } from './not-found/not-found.component';\n\n@NgModule({\n  imports: [\n    ThemeModule,\n    NbCardModule,\n    NbButtonModule,\n    MiscellaneousRoutingModule,\n  ],\n  declarations: [\n    MiscellaneousComponent,\n    NotFoundComponent,\n  ],\n})\nexport class MiscellaneousModule { }\n","import { NbMenuService } from '@nebular/theme';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'ngx-not-found',\n  styleUrls: ['./not-found.component.scss'],\n  templateUrl: './not-found.component.html',\n})\nexport class NotFoundComponent {\n\n  constructor(private menuService: NbMenuService) {\n  }\n\n  goToHome() {\n    this.menuService.navigateHome();\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-md-12\">\n    <nb-card>\n      <nb-card-body>\n        <div class=\"flex-centered col-xl-4 col-lg-6 col-md-8 col-sm-12\">\n          <h2 class=\"title\">404 Page Not Found</h2>\n          <small class=\"sub-title\">The page you were looking for doesn't exist</small>\n          <button nbButton fullWidth (click)=\"goToHome()\" type=\"button\" class=\"home-button\">\n            Take me home\n          </button>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </div>\n</div>\n","import { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\n\nimport { PagesComponent } from './pages.component';\nimport { NotFoundComponent } from './miscellaneous/not-found/not-found.component';\nimport { InsumosComponent } from '../pages/insumos/insumos.component';\nimport { InsumosCategoriaComponent } from '../pages/insumos-categoria/insumos-categoria.component';\nimport { MenuElementosComponent } from '../pages/menu-elementos/menu-elementos.component';\nimport { MenuComponent } from '../pages/menu/menu.component';\nimport { HomeComponent } from '../pages/home/home.component';\nimport { EmpresaCartasComponent } from '../pages/empresa-cartas/empresa-cartas.component';\nimport { AlmacenComponent } from '../pages/almacen/almacen.component';\nimport { UsuariosComponent } from '../pages/usuarios/usuarios.component';\nimport { ConfiguracionComponent } from '../pages/configuracion/configuracion.component';\nimport { PedidosComponent } from '../pages/pedidos/pedidos.component';\nimport { PedidosHistorialComponent } from '../pages/pedidos-historial/pedidos-historial.component';\nimport { GestionarMarcasComponent } from '../pages/gestionar-marcas/gestionar-marcas.component';\nimport { GestionarCategoriasComponent } from '../pages/gestionar-categorias/gestionar-categorias.component';\nimport { GestionarProductosComponent } from '../pages/gestionar-productos/gestionar-productos.component';\nimport { GestionarSubCategoriasComponent } from '../pages/gestionar-sub-categorias/gestionar-sub-categorias.component';\nimport { GestionarVentasComponent } from '../pages/gestionar-ventas/gestionar-ventas.component';\nimport { GestionCambiosDevolucionesComponent } from './gestion-cambios-devoluciones/gestion-cambios-devoluciones.component';\nimport { ReportesVentaComponent } from '../pages/reportes-venta/reportes-venta.component';\nimport { GestionarVentasRestauranteComponent } from '../pages/gestionar-ventas-restaurante/gestionar-ventas-restaurante.component';\nimport { GestionarMesasComponent } from '../pages/gestionar-mesas/gestionar-mesas.component';\nimport { ReportesEmpresaVentasComponent } from '../pages/reportes-empresa-ventas/reportes-empresa-ventas.component';\nimport { EstadisticasComponent } from '../pages/estadisticas/estadisticas.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: PagesComponent,\n  children: [\n    {\n      path: 'estadisticas/:tipo',\n      component: EstadisticasComponent\n    },\n    {\n      path: 'gestionar-ventas-restaurante',\n      component: GestionarVentasRestauranteComponent,\n    },\n    {\n      path: 'reportes-empresa-ventas',\n      component: ReportesEmpresaVentasComponent\n    },\n    {\n      path: 'gestionar-mesas/:id',\n      component: GestionarMesasComponent,\n    },\n    {\n      path: 'gestionar-marcas',\n      component: GestionarMarcasComponent,\n    },\n    {\n      path: 'gestionar-ventas',\n      component: GestionarVentasComponent,\n    },\n    {\n      path: 'gestionar-categorias',\n      component: GestionarCategoriasComponent,\n    },\n    {\n      path: 'gestionar-productos',\n      component: GestionarProductosComponent,\n    },\n    {\n      path: 'gestionar-sub-categorias',\n      component: GestionarSubCategoriasComponent,\n    },\n    {\n      path: 'gestion-cambios-devoluciones',\n      component: GestionCambiosDevolucionesComponent\n    },\n    {\n      path: 'reportes-venta',\n      component: ReportesVentaComponent,\n    },\n    {\n      path: 'pedidos',\n      component: PedidosComponent,\n    },\n    {\n      path: 'pedidos-historial',\n      component: PedidosHistorialComponent,\n    },\n    {\n      path: 'insumos',\n      component: InsumosComponent,\n    },\n    {\n      path: 'insumos-categoria',\n      component: InsumosCategoriaComponent,\n    },\n    {\n      path: 'home',\n      component: HomeComponent,\n    },\n    {\n      path: 'usuarios',\n      component: UsuariosComponent,\n    },\n    {\n      path: 'menu-elementos',\n      component: MenuElementosComponent,\n    },\n    {\n      path: 'menu',\n      component: MenuComponent,\n    },\n    {\n      path: 'cartas/:id',\n      component: EmpresaCartasComponent,\n    },\n    {\n      path: 'configuracion',\n      component: ConfiguracionComponent,\n    },\n    {\n      path: 'almacen/:id',\n      component: AlmacenComponent,\n    },\n    {\n      path: '',\n      redirectTo: 'home',\n      pathMatch: 'full',\n    },\n    {\n      path: '**',\n      component: NotFoundComponent,\n    },\n  ],\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PagesRoutingModule {\n}\n","import { Component } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\n@Component({\n  selector: 'ngx-pages',\n  styleUrls: ['pages.component.scss'],\n  template: `\n    <ngx-one-column-layout>\n      <nb-menu [items]=\"auth.menu\"></nb-menu>\n      <router-outlet></router-outlet>\n    </ngx-one-column-layout>\n  `,\n})\nexport class PagesComponent {\n  constructor (\n    public auth: AuthService\n  ) { }\n}\n","import { NgModule } from '@angular/core';\nimport {\n  NbMenuModule,\n  NbButtonModule,\n  NbCardModule,\n  NbDialogModule,\n  NbInputModule,\n  NbIconModule,\n  NbSpinnerModule,\n  NbSelectModule,\n  NbBadgeModule,\n  NbListModule,\n  NbAccordionModule,\n  NbTreeGridModule,\n  NbAutocompleteModule,\n  NbDatepickerModule,\n  NbToggleModule,\n  NbPopoverModule,\n  NbUserModule,\n  NbFormFieldModule,\n  NbLayoutModule,\n  NbSidebarModule,\n  NbCheckboxModule,\n  NbTooltipModule\n} from '@nebular/theme';\n\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ThemeModule } from '../@theme/theme.module';\nimport { PagesComponent } from './pages.component';\nimport { PagesRoutingModule } from './pages-routing.module';\nimport { MiscellaneousModule } from './miscellaneous/miscellaneous.module';\nimport { InsumosComponent } from './insumos/insumos.component';\nimport { InsumosCategoriaComponent } from './insumos-categoria/insumos-categoria.component';\nimport { HomeComponent } from './home/home.component';\nimport { MenuElementosComponent } from './menu-elementos/menu-elementos.component';\nimport { MenuComponent } from './menu/menu.component';\nimport { EmpresaCartasComponent } from './empresa-cartas/empresa-cartas.component';\nimport { AlmacenComponent } from './almacen/almacen.component';\nimport { UsuariosComponent } from './usuarios/usuarios.component';\nimport { OrderModule } from 'ngx-order-pipe';\nimport { ConfiguracionComponent } from './configuracion/configuracion.component';\nimport { PedidosComponent } from './pedidos/pedidos.component';\nimport { PedidosHistorialComponent } from './pedidos-historial/pedidos-historial.component';\nimport { GestionarMarcasComponent } from './gestionar-marcas/gestionar-marcas.component';\nimport { GestionarCategoriasComponent } from './gestionar-categorias/gestionar-categorias.component';\nimport { GestionarProductosComponent } from './gestionar-productos/gestionar-productos.component';\nimport { GestionarSubCategoriasComponent } from './gestionar-sub-categorias/gestionar-sub-categorias.component';\nimport { GestionarVentasComponent } from './gestionar-ventas/gestionar-ventas.component';\nimport { GestionCambiosDevolucionesComponent } from './gestion-cambios-devoluciones/gestion-cambios-devoluciones.component';\nimport { ReportesVentaComponent } from './reportes-venta/reportes-venta.component';\nimport { GestionarVentasRestauranteComponent } from './gestionar-ventas-restaurante/gestionar-ventas-restaurante.component';\nimport { GestionarRestauranteMesasComponent } from './gestionar-restaurante-mesas/gestionar-restaurante-mesas.component';\nimport { GestionarMesasComponent } from './gestionar-mesas/gestionar-mesas.component';\nimport { ReportesEmpresaVentasComponent } from './reportes-empresa-ventas/reportes-empresa-ventas.component';\nimport { EstadisticasComponent } from './estadisticas/estadisticas.component';\n\n@NgModule({\n  imports: [\n    NbDialogModule.forChild (),\n    PagesRoutingModule,\n    ThemeModule,\n    NbMenuModule,\n    MiscellaneousModule,\n    NbButtonModule,\n    NbCardModule,\n    NbInputModule,\n    FormsModule,\n    ReactiveFormsModule,\n    NbIconModule,\n    NbSpinnerModule,\n    NbTooltipModule,\n    NbSelectModule,\n    ColorPickerModule,\n    NbBadgeModule,\n    NbListModule,\n    NbAccordionModule,\n    NbTreeGridModule,\n    NbAutocompleteModule,\n    NbDatepickerModule,\n    NbToggleModule,\n    OrderModule,\n    NbPopoverModule,\n    NbUserModule,\n    NbFormFieldModule,\n    NbLayoutModule,\n    NbSidebarModule,\n    NbCheckboxModule\n  ],\n  declarations: [\n    PagesComponent,\n    InsumosComponent,\n    InsumosCategoriaComponent,\n    HomeComponent,\n    MenuElementosComponent,\n    MenuComponent,\n    EmpresaCartasComponent,\n    AlmacenComponent,\n    UsuariosComponent,\n    ConfiguracionComponent,\n    PedidosComponent,\n    PedidosHistorialComponent,\n    GestionarMarcasComponent,\n    GestionarCategoriasComponent,\n    GestionarProductosComponent,\n    GestionarSubCategoriasComponent,\n    GestionarVentasComponent,\n    GestionCambiosDevolucionesComponent,\n    ReportesVentaComponent,\n    GestionarVentasRestauranteComponent,\n    GestionarRestauranteMesasComponent,\n    GestionarMesasComponent,\n    ReportesEmpresaVentasComponent,\n    EstadisticasComponent\n  ]\n})\nexport class PagesModule {\n}\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { NbDialogService } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-pedidos-historial',\n  templateUrl: './pedidos-historial.component.html',\n  styleUrls: ['./pedidos-historial.component.scss']\n})\nexport class PedidosHistorialComponent implements OnInit {\n  items: any [] = [];\n  empresas: any [] = [];\n  repartidores: any [] = [];\n  repartidor_seleccionado: any = null;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private noti: NotificationService\n  ) { }\n\n  ngOnInit(): void {\n    this.database.get_empresas ().subscribe ((res: any) => {\n      this.empresas = res;\n      console.log (res);\n    });\n\n    this.database.get_pedidos ().subscribe ((res: any [])=> {\n      this.items = res;\n    });\n\n    this.database.get_repartidores ().subscribe ((res: any [])=> {\n      this.repartidores = res;\n      console.log (res);\n    });\n  }\n\n  ver_pedido (dialog: any, item: any) {\n    console.log (item);\n    this.dialogService.open (dialog, { context: item });\n  }\n\n  cal_tiempo_entrega (item: any) {\n    let a = moment (item.hora_entrega);\n    let b = moment (item.fecha);\n    return a.diff (b, 'minute');\n  }\n\n  get_empresa (empresa_id: string) {\n    if (empresa_id === '') {\n      return '';\n    }\n\n    let returned: string = this.empresas.find (x => x.id === empresa_id).nombre;\n    if (returned === undefined) {\n      returned = '';\n    }\n\n    return returned;\n  }\n\n  get_platos (filter: number) {\n    return this.items.filter ((x: any) => {\n      return x.estado === filter;\n    });\n  }\n\n  get_format_date (fecha: string) {\n    return moment (fecha).format ('hh:mm a');\n  }\n\n  update_estado (estado: number, data: any, dialog: any) {\n    if (confirm ('¿Confimar operacion?')) {\n      if (estado === 2) {\n        if (data.tipo_pedido === 'delivery') {\n          if (this.repartidor_seleccionado !== null) {\n            const push_data: any = {\n              titulo: 'Pedido asignado',\n              detalle: 'Se le a asignado un nuevo pedido',\n              mode: 'tokens',\n              tokens: this.repartidor_seleccionado.token_id,\n              clave: data.id\n            };\n\n            this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n              .then (() => {\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n\n                this.noti.send_notification (push_data).subscribe (response => {\n                }, error => {\n                });\n              })\n              .catch ((error: any) => {\n                console.log (error);\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n              });\n          }\n        } else {\n          console.log (data);\n          const push_data: any = {\n            titulo: 'Pedido actualizado',\n            detalle: 'Ya puede venir a recoger su pedido',\n            mode: 'tokens',\n            tokens: data.usuario_token,\n            clave: data.id\n          };\n\n          this.database.update_estado_pedidos (estado, data.id)\n            .then (() => {\n              dialog.close ();\n              this.noti.send_notification (push_data).subscribe (response => {\n              }, error => {\n              });\n            })\n            .catch ((error: any) => {\n              dialog.close ();\n            });\n        }\n      } else {\n        this.database.update_estado_pedidos (estado, data.id)\n          .then (() => {\n            dialog.close ();\n          })\n          .catch ((error: any) => {\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  cancelar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.cancelar_pedido (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  entregar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.confirmar_recojo (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  get_format (fecha: string) {\n    return moment (fecha).format ('hh:mm:ss a');\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Detalles\n      &nbsp;\n      <span>Total: {{ data.monto_total | currency:'S/. ' }}</span>\n      &nbsp;\n      <span *ngIf=\"data.tipo_pago === 'culqi'\">Pagado</span>\n      <span *ngIf=\"data.tipo_pago !== 'culqi'\">Contraentrega</span>\n    </nb-card-header>\n\n    <nb-card-body style=\"width: 750px\">\n      <div class=\"row\" style=\"margin-bottom: 1rem;\">\n        <div class=\"col-3\">\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Direccion</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Referencia</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Telefono</p>\n          <p *ngIf=\"data.estado === 4\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Entrega\n          </p>\n          <p *ngIf=\"data.estado === 5\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Cancelado\n          </p>\n          <p *ngIf=\"data.estado === 6\" class=\"color_a6\" style=\"margin-bottom: 0px;\">\n            Rechazado\n          </p>\n        </div>\n        <div class=\"col-9\">\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.direccion }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.referencia }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.telefono }}</p>\n          <p *ngIf=\"data.estado === 4\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_entrega) }}\n          </p>\n\n          <p *ngIf=\"data.estado === 5\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_cancelada) }}\n          </p>\n\n          <p *ngIf=\"data.estado === 6\" class=\"color_74\" style=\"margin-bottom: 0px;\">\n            {{ get_format (data.hora_rechazada) }}\n          </p>\n        </div>\n      </div>\n\n      <div class=\"row\" style=\"margin-bottom: 1rem;\" *ngFor=\"let plato of data.platos\">\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'menu'\">Menus ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'extra'\">Extras ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'promocion'\">Promocion ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <ng-container *ngIf=\"plato.tipo === 'extra'\">\n          <div class=\"col-2\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\">{{ plato.comentarios }}</p>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'menu'\">\n          <ng-container *ngFor=\"let menu of plato.menus; index as i\">\n            <ng-container *ngIf=\"menu.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ menu.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ menu.nombre }}</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                  {{ plato.comentario }}\n                </p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '1'\">\n          <ng-container *ngFor=\"let plato_p of plato.platos ; index as i\">\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato_p.nombre }} ‧ {{ get_empresa (plato_p.empresa_id) }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '0'\">\n          <ng-container>\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <ng-container *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\">\n        <div class=\"form-group\">\n          <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n          <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n            <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n              {{ repartidor.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n      </ng-container>\n    </nb-card-body>\n\n    <nb-card-footer style=\"text-align: end;\">\n      <!-- <button nbButton status=\"danger\" (click)=\"cancelar_pedido (data, ref)\">\n        Cancelar pedido\n      </button>\n      &nbsp;&nbsp;\n\n      <button *ngIf=\"data.estado === 0\" nbButton status=\"success\" (click)=\"update_estado (1, data, ref)\">\n        Pasar a cocina\n      </button>\n\n      <button *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n        Plato Listo\n      </button>\n\n      <button *ngIf=\"data.estado === 1 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n        Plato Listo\n      </button>\n\n      <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n        Entregar pedido\n      </button>\n\n      &nbsp;&nbsp; -->\n      <button nbButton (click)=\"ref.close ()\">Cerrar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<div class=\"row\">\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Entregados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (4) | orderBy: 'hora_entrega'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" statfechaus=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"warning\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"warning\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p style=\"margin-bottom: 0px;\">{{ item.direccion }}</p>\n          <p *ngIf=\"item.tipo_pedido === 'delivery'\">Tiempo de delivery: {{ cal_tiempo_entrega (item) }} min.</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Cancelados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (5) | orderBy:'hora_cancelada'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Rechazados\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (6) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { NbDialogService } from '@nebular/theme';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-pedidos',\n  templateUrl: './pedidos.component.html',\n  styleUrls: ['./pedidos.component.scss']\n})\nexport class PedidosComponent implements OnInit {\n  items: any [] = [];\n  empresas: any [] = [];\n  repartidores: any [] = [];\n  repartidor_seleccionado: any = null;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private noti: NotificationService\n  ) { }\n\n  ngOnInit(): void {\n    this.database.get_empresas ().subscribe ((res: any) => {\n      this.empresas = res;\n      console.log (res);\n    });\n\n    this.database.get_pedidos ().subscribe ((res: any [])=> {\n      this.items = res;\n    });\n\n    this.database.get_repartidores_libres ().subscribe ((res: any [])=> {\n      this.repartidores = res;\n      console.log (res);\n    });\n  }\n\n  ver_pedido (dialog: any, item: any) {\n    console.log (item);\n    this.dialogService.open (dialog, { context: item });\n  }\n\n  get_empresa (empresa_id: string) {\n    if (empresa_id === '') {\n      return '';\n    }\n\n    let returned: string = this.empresas.find (x => x.id === empresa_id).nombre;\n    if (returned === undefined) {\n      returned = '';\n    }\n\n    return returned;\n  }\n\n  get_platos (filter: number) {\n    return this.items.filter ((x: any) => {\n      return x.estado === filter;\n    });\n  }\n\n  get_format_date (fecha: string) {\n    return moment (fecha).format ('hh:mm a');\n  }\n\n  update_estado (estado: number, data: any, dialog: any) {\n    console.log (estado);\n    console.log (data);\n\n    if (confirm ('¿Confimar operacion?')) {\n      if (estado === 2) {\n        if (data.tipo_pedido === 'delivery') {\n          if (this.repartidor_seleccionado !== null) {\n            const push_data: any = {\n              titulo: 'Pedido asignado',\n              detalle: 'Se le a asignado un nuevo pedido',\n              mode: 'tokens',\n              tokens: this.repartidor_seleccionado.token_id,\n              clave: data.id\n            };\n\n            this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n              .then (() => {\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n\n                this.noti.send_notification (push_data).subscribe (response => {\n                }, error => {\n                });\n              })\n              .catch ((error: any) => {\n                console.log (error);\n                this.repartidor_seleccionado = null;\n                dialog.close ();\n              });\n          }\n        } else {\n          console.log (data);\n          const push_data: any = {\n            titulo: 'Pedido actualizado',\n            detalle: 'Ya puede venir a recoger su pedido',\n            mode: 'tokens',\n            tokens: data.usuario_token,\n            clave: data.id\n          };\n\n          this.database.update_estado_pedidos (estado, data.id)\n            .then (() => {\n              dialog.close ();\n              this.noti.send_notification (push_data).subscribe (response => {\n              }, error => {\n              });\n            })\n            .catch ((error: any) => {\n              dialog.close ();\n            });\n        }\n      } else {\n        this.database.update_estado_pedidos (estado, data.id)\n          .then (() => {\n            dialog.close ();\n          })\n          .catch ((error: any) => {\n            console.log (error);\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  asignar_tienda_repartidor (data: any, dialog: any) {\n    if (confirm ('¿Confimar operacion?')) {\n      if (this.repartidor_seleccionado !== null) {\n        const push_data: any = {\n          titulo: 'Pedido asignado',\n          detalle: 'Se le a asignado un nuevo pedido',\n          mode: 'tokens',\n          tokens: this.repartidor_seleccionado.token_id,\n          clave: data.id\n        };\n\n        this.database.asignar_pedido_repartidor (this.repartidor_seleccionado, data)\n          .then (() => {\n            this.repartidor_seleccionado = null;\n            dialog.close ();\n\n            this.noti.send_notification (push_data).subscribe (response => {\n            }, error => {\n            });\n          })\n          .catch ((error: any) => {\n            console.log (error);\n            this.repartidor_seleccionado = null;\n            dialog.close ();\n          });\n      }\n    }\n  }\n\n  cancelar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.cancelar_pedido (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n\n  entregar_pedido (data: any, dialog: any) {\n    console.log (data);\n    if (confirm ('¿Confimar operacion?')) {\n      this.database.confirmar_recojo (data)\n        .then (() => {\n          dialog.close ();\n        })\n        .catch ((error: any) => {\n          dialog.close ();\n        });\n    }\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header>\n      Detalles\n      &nbsp;\n      <span>Total: {{ data.monto_total | currency:'S/. ' }}</span>\n      &nbsp;\n      <span *ngIf=\"data.tipo_pago === 'culqi'\">Pagado</span>\n      <span *ngIf=\"data.tipo_pago !== 'culqi'\">Contraentrega</span>\n    </nb-card-header>\n\n    <nb-card-body style=\"width: 750px\">\n      <div class=\"row\" style=\"margin-bottom: 1rem;\">\n        <div class=\"col-3\">\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Direccion</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Referencia</p>\n          <p class=\"color_a6\" style=\"margin-bottom: 0px;\">Telefono</p>\n        </div>\n        <div class=\"col-9\">\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.direccion }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.referencia }}</p>\n          <p class=\"color_74\" style=\"margin-bottom: 0px;\">{{ data.telefono }}</p>\n        </div>\n      </div>\n\n      <div class=\"row\" style=\"margin-bottom: 1rem;\" *ngFor=\"let plato of data.platos\">\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'menu'\">Menus ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'extra'\">Extras ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <div class=\"col-12 header\" *ngIf=\"plato.tipo === 'promocion'\">Promocion ‧ {{ get_empresa (plato.empresa_id) }}</div>\n        <ng-container *ngIf=\"plato.tipo === 'extra'\">\n          <div class=\"col-2\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n          </div>\n\n          <div class=\"col-5\">\n            <p style=\"margin-bottom: 0px;\">{{ plato.comentarios }}</p>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'menu'\">\n          <ng-container *ngFor=\"let menu of plato.menus; index as i\">\n            <ng-container *ngIf=\"menu.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ menu.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ menu.nombre }}</p>\n              </div>\n\n              <div class=\"col-5\">\n                <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                  {{ plato.comentario }}\n                </p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n\n        <ng-container *ngIf=\"plato.tipo === 'tienda'\">\n          <ng-container *ngFor=\"let producto of plato.productos; index as i\">\n            <ng-container *ngIf=\"producto.cantidad > 0\">\n              <div class=\"col-2\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ producto.cantidad }} Unds.</p>\n              </div>\n\n              <div class=\"col-10\">\n                <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ producto.nombre }}</p>\n              </div>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '1'\">\n          <ng-container *ngFor=\"let plato_p of plato.platos ; index as i\">\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato_p.nombre }} ‧ {{ get_empresa (plato_p.empresa_id) }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p *ngIf=\"i === 0\" style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n\n        <ng-container *ngIf=\"plato.tipo === 'promocion' && plato.promocion_tipo === '0'\">\n          <ng-container>\n            <div class=\"col-2\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_a6\">{{ plato.cantidad }} Unds.</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">{{ plato.plato_nombre }}</p>\n            </div>\n\n            <div class=\"col-5\">\n              <p style=\"margin-bottom: 0px;\" class=\"color_74\">\n                {{ plato.comentarios }}\n              </p>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"data.estado === 0 && data.tipo === 'tienda' && data.tipo_pedido === 'delivery'\">\n        <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n        <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n          <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n            {{ repartidor.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\">\n        <label for=\"repartidor\" class=\"label\">Seleccione un repartidor:</label>\n        <nb-select [(ngModel)]=\"repartidor_seleccionado\" placeholder=\"Seleccione un repartidor\" id=\"repartidor\">\n          <nb-option *ngFor=\"let repartidor of repartidores\" [value]=\"repartidor\">\n            {{ repartidor.nombre }}\n          </nb-option>\n        </nb-select>\n      </div>\n    </nb-card-body>\n\n    <nb-card-footer style=\"text-align: end;\">\n      <button nbButton status=\"danger\" (click)=\"cancelar_pedido (data, ref)\">\n        Cancelar pedido\n      </button>\n      &nbsp;&nbsp;\n\n      <ng-container *ngIf=\"data.tipo === 'restaurante'\">\n        <button *ngIf=\"data.estado === 0 && data.tipo === 'restaurante'\" nbButton status=\"success\" (click)=\"update_estado (1, data, ref)\">\n          Pasar a cocina\n        </button>\n\n        <button *ngIf=\"data.estado === 1 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Plato Listo\n        </button>\n\n        <button *ngIf=\"data.estado === 1 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Plato Listo\n        </button>\n\n        <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n          Entregar pedido\n        </button>\n      </ng-container>\n\n      <ng-container *ngIf=\"data.tipo === 'tienda'\">\n        <button *ngIf=\"data.estado === 0 && data.tipo_pedido === 'delivery'\" [disabled]=\"repartidor_seleccionado === null\" nbButton status=\"success\" (click)=\"asignar_tienda_repartidor (data, ref)\">\n          Pedido listo\n        </button>\n\n        <button *ngIf=\"data.estado === 2 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"entregar_pedido (data, ref)\">\n          Entregar pedido\n        </button>\n\n        <button *ngIf=\"data.estado === 0 && data.tipo_pedido !== 'delivery'\" nbButton status=\"success\" (click)=\"update_estado (2, data, ref)\">\n          Pedido listo\n        </button>\n      </ng-container>\n      &nbsp;&nbsp;\n      <button nbButton (click)=\"ref.close ()\">Cerrar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<div class=\"row\">\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Solicitados\n      </nb-card-header>\n      <div\n        *ngFor=\"let item of get_platos (0) | orderBy: 'fecha'\"\n        class=\"row\" class=\"horizontal\"\n        (click)=\"ver_pedido (dialog, item)\"\n        [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"warning\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"warning\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Preparando\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (1) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\" [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n\n  <div class=\"col-4\">\n    <nb-card>\n      <nb-card-header>\n        Listo para enviar / Recoger\n      </nb-card-header>\n      <div *ngFor=\"let item of get_platos (2) | orderBy:'fecha'\" class=\"row\" class=\"horizontal\" (click)=\"ver_pedido (dialog, item)\" [ngStyle]=\"{'background-color':item.tipo === 'tienda' ? '#fff394' : '#ffffff' }\">\n        <div class=\"col-12\">\n          <nb-badge [text]=\"item.monto_total | currency:'S/. '\" status=\"primary\" position=\"top right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido === 'delivery'\" text=\"Delivery\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'rapido'\" text=\"Recojo: Rapido\" status=\"success\" position=\"bottom right\"></nb-badge>\n          <nb-badge *ngIf=\"item.tipo_pedido !== 'delivery' && item.tipo_recojo === 'horario'\" [text]=\"'Recojo: ' + item.hora_seleccionada\" status=\"success\" position=\"bottom right\"></nb-badge>\n\n          <b>{{ item.usuario_nombre }}</b>\n          <p>{{ item.direccion }}</p>\n          <div>\n            <i class=\"far fa-calendar\">&nbsp;{{ get_format_date (item.fecha) }}</i>\n          </div>\n        </div>\n      </div>\n    </nb-card>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\n\n@Component({\n  selector: 'ngx-reportes-empresa-ventas',\n  templateUrl: './reportes-empresa-ventas.component.html',\n  styleUrls: ['./reportes-empresa-ventas.component.scss']\n})\nexport class ReportesEmpresaVentasComponent implements OnInit {\n  usuario: any;\n\n  // Aux\n  ventas: any [] = [];\n  empresas: any [] = [];\n  instancias: any [] = [];\n  reporte_tipo: string = 'diario';\n  empresa_reporte: any = null;\n  instancia_seleccionada: any = null;\n\n  constructor (private database: DatabaseService, private auth: AuthService) { }\n\n  ngOnInit(): void {\n    this.auth.authState ().subscribe ((usuario: firebase.User) => {\n      if (usuario) {\n        this.database.get_usuario_by_id (usuario.uid).subscribe ((res: any) => {\n          if (res !== undefined) {\n            this.usuario = res;\n            this.get_data ();\n          }\n        });\n      } else {\n\n      }\n    });\n  }\n\n  get_data () {\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      console.log (res);\n      this.empresas = res;\n    });\n  }\n\n  get_total_ventas () {\n    return 0;\n  }\n\n  fecha_changed (event: Date) {\n    let day = this.padLeft (event.getDate ());\n    let month = this.padLeft (event.getMonth () + 1);\n    let year = event.getFullYear ()\n\n    const id: string = this.empresa_reporte.id + '-' + day + '-' + month + '-' + year;\n\n    this.database.get_instancias_por_restaurante_venta (id).subscribe ((res: any []) => {\n      console.log (res);\n      this.instancias = res;\n    });\n  }\n\n  padLeft (n: any) {\n    return (\"00\" + n).slice (-2);\n  }\n\n  async instancia_cambia (event: any) {\n    this.ventas = await this.database.get_restaurante_ventas_instancia (event.tmp_id);\n    console.log (this.ventas);\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        <h6>Ventas - {{ get_total_ventas () | currency:'S/. ' }}</h6>\n      </nb-card-header>\n\n      <nb-card-header>\n        <nb-select placeholder=\"Empresa\" [(selected)]=\"empresa_reporte\">\n          <nb-option *ngFor=\"let item of empresas\" [value]=\"item\">\n            {{ item.nombre }}\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <nb-select *ngIf=\"empresa_reporte !== null\" placeholder=\"Select Showcase\" [(selected)]=\"reporte_tipo\">\n          <nb-option value=\"diario\">Reporte diario</nb-option>\n          <nb-option value=\"mensual\">Reporte mensual</nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <ng-container *ngIf=\"reporte_tipo === 'diario' && empresa_reporte !== null\">\n          <input nbInput placeholder=\"Seleccione una fecha\" [nbDatepicker]=\"dateTimePicker\">\n          <nb-datepicker (dateChange)=\"fecha_changed ($event)\" #dateTimePicker></nb-datepicker>\n        </ng-container>\n        &nbsp;\n        &nbsp;\n        <nb-select *ngIf=\"instancias.length > 0\" placeholder=\"Seleccione una instancia\" [(selected)]=\"instancia_seleccionada\" (selectedChange)=\"instancia_cambia ($event)\">\n          <nb-option *ngFor=\"let instancia of instancias\" [value]=\"instancia\">\n            {{ instancia.hora_apertura }} - <span *ngIf=\"instancia.hora_cierre === undefined\"> ? </span><span *ngIf=\"instancia.hora_cierre !== undefined\">{{ instancia.hora_cierre }}</span>\n          </nb-option>\n        </nb-select>\n      </nb-card-header>\n\n      <table class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">N°</th>\n            <th scope=\"col\">Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let venta of ventas; let i = index\">\n            <th scope=\"row\">{{ i +1 }}</th>\n            <th>{{ venta.hora }}</th>\n            <th>\n              <ul *ngFor=\"let plato of venta.platos\">\n                <li *ngIf=\"plato.tipo === 'plato'\">\n                  {{ plato.nombre }}\n                </li>\n              </ul>\n            </th>\n            <th>{{ venta.monto_total | currency:'S/. ' }}</th>\n          </tr>\n        </tbody>\n      </table>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { AuthService } from '../../services/auth.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'ngx-reportes-venta',\n  templateUrl: './reportes-venta.component.html',\n  styleUrls: ['./reportes-venta.component.scss']\n})\nexport class ReportesVentaComponent implements OnInit {\n  cajeros: any [] = [];\n  categorias: any [] = [];\n  cajero_seleccionado: any = '0';\n  caja_data: any;\n  reporte_tipo: string = 'productos';\n\n  lista: any [] = [];\n  _lista: any [] = [];\n  lista_respuesta: any [] = [];\n  mapa_respuesta: Map <string, any> = new Map <string, any []> ();\n\n  hora_inicio: any = '';\n  hora_fin: any = '';\n  constructor (private database: DatabaseService, private auth: AuthService) { }\n\n  ngOnInit (): void {\n    this.database.get_pos_data (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any) => {\n      this.caja_data = res;\n\n      this.database.get_ventas_total_subscribe (this.caja_data.id).subscribe ((res: any) => {\n        this.lista = res;\n        this._lista = res;\n        console.log (res);\n      });\n    });\n\n    this.database.get_cajeros_por_pos (this.auth.usuario.id + moment ().format ('[-]DD[-]MM[-]YYYY')).subscribe ((res: any []) => {\n      this.cajeros = res;\n    });\n\n    this.database.get_tienda_categorias ().subscribe ((res: any) => {\n      this.categorias = res;\n    });\n  }\n\n  async get_ventas_por_client_tmp () {\n    this.lista = await this.database.get_ventas_por_client_tmp (this.caja_data.id, this.caja_data.cajero_actual.tmp_id);\n  }\n\n  async get_ventas_total () {\n    // this.lista = await this.database.get_ventas_total (this.caja_data.id);\n    // console.log (this.lista);\n  }\n\n  async submit () {\n    this.lista = this._lista;\n    this.lista_respuesta = [];\n    this.mapa_respuesta.clear ();\n\n    if (this.reporte_tipo === 'productos') {\n      this.lista_respuesta = this.lista.filter ((item: any) => {\n        console.log (item);\n        console.log ('Valor: ', this.validar_cajero (item) || this.validar_fecha (item));\n        return this.validar_item (item);\n      });\n    } else if (this.reporte_tipo === 'categorias') {\n      console.log ('enbtro aqui', this.lista);\n      this.lista.forEach ((venta: any) => {\n        console.log (venta);\n\n        venta.productos.forEach ((producto: any) => {\n          if (this.mapa_respuesta.get (producto.categoria_id) === undefined) {\n            this.mapa_respuesta.set (producto.categoria_id, {\n              cantidad: producto.cantidad,\n              precio: producto.precio * producto.cantidad\n            });\n          } else {\n            let update = this.mapa_respuesta.get (producto.categoria_id);\n            update.cantidad += producto.cantidad;\n            update.precio += producto.precio * producto.cantidad;\n            this.mapa_respuesta.set (producto.categoria_id, update);\n          }\n        });\n      });\n\n      console.log (this.mapa_respuesta);\n    }\n  }\n\n  validar_item (item: any) {\n    let s_date = moment (item.fecha + ' ' + this.hora_inicio);\n    let f_date = moment (item.fecha + ' ' + this.hora_fin);\n    let tiempo_valid = s_date.isValid () && f_date.isValid () && this.hora_inicio !== '' && this.hora_fin !== '';\n\n    if (this.cajero_seleccionado !== '0' && tiempo_valid) {\n      return this.validar_cajero (item) && this.validar_fecha (item);\n    } else {\n      if (this.cajero_seleccionado !== '0' && tiempo_valid === false) {\n        return this.validar_cajero (item);\n      } else if (this.cajero_seleccionado !== '0' && tiempo_valid === true) {\n        return this.validar_fecha (item);\n      } else if (this.cajero_seleccionado === '0' && tiempo_valid === true) {\n        return this.validar_fecha (item);\n      } else {\n        return true;\n      }\n    }\n  }\n\n  validar_cajero (item: any) {\n    if (this.cajero_seleccionado === '0') {\n      return true;\n    }\n\n    return item.cajero_tmp_id === this.cajero_seleccionado;\n  }\n\n  validar_fecha (item: any) {\n    let s_date = moment (item.fecha + ' ' + this.hora_inicio);\n    let f_date = moment (item.fecha + ' ' + this.hora_fin);\n\n    if (s_date.isValid () && f_date.isValid ()) {\n      return moment (item.fecha + ' ' + item.hora).isBetween (s_date, f_date);\n    }\n\n    return true;\n  }\n\n  get_total_format (value: number) {\n    return Math.round(value * 100) / 100;\n  }\n\n  get_total_lista (ventas: any []) {\n    let total: number = 0;\n\n    ventas.forEach ((venta: any) => {\n      venta.productos.forEach ((producto: any) => {\n        total += producto.cantidad * producto.precio;\n      });\n    });\n\n    return this.get_total_format (total);\n  }\n\n  limpiar () {\n    this.lista = [];\n  }\n\n  get_nombre (key: string) {\n    return this.categorias.find ((x => x.id === key)).nombre;\n  }\n\n  get_total_map () {\n    let total: number = 0;\n\n    this.mapa_respuesta.forEach ((value: any, key: string) => {\n        total += value.cantidad * value.precio;\n    });\n\n    return total;\n  }\n}\n","<nb-layout>\n  <nb-layout-column>\n    <nb-card>\n      <nb-card-header>\n        Reportes\n        &nbsp;\n        &nbsp;\n        <nb-select (selectedChange)=\"limpiar ()\" [(ngModel)]=\"reporte_tipo\" size=\"small\" placeholder=\"Seleccione una opcion\">\n          <nb-option value=\"productos\">Productos</nb-option>\n          <nb-option value=\"categorias\">Categorias</nb-option>\n          <!-- <nb-option value=\"subcategorias\">Subcategorias</nb-option>\n          <nb-option value=\"marcas\">Marcas</nb-option> -->\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        <button nbButton size=\"small\" status=\"success\" (click)=\"submit ()\">Consultar</button>\n      </nb-card-header>\n\n      <nb-card-header *ngIf=\"reporte_tipo === 'productos'\">\n        Cajero:\n        &nbsp;\n        &nbsp;\n        <nb-select size=\"small\" [(ngModel)]=\"cajero_seleccionado\">\n          <nb-option value=\"0\">\n            Ninguno\n          </nb-option>\n\n          <nb-option [value]=\"caja_data?.cajero_actual?.tmp_id\">\n            Cajero actual - {{ caja_data?.cajero_actual?.nombre }}\n          </nb-option>\n\n          <nb-option *ngFor=\"let item of cajeros\" [value]=\"item.tmp_id\">\n            <span *ngIf=\"item.tmp_id !== caja_data?.cajero_actual?.tmp_id\">\n              {{ item.nombre }} - {{ item.hora_entrada }}\n            </span>\n          </nb-option>\n        </nb-select>\n        &nbsp;\n        &nbsp;\n        Hora inicio:\n        &nbsp;\n        &nbsp;\n        <input [(ngModel)]=\"hora_inicio\" nbInput  size=\"tiny\" type=\"time\">\n        &nbsp;\n        &nbsp;\n        Hora fin:\n        &nbsp;\n        &nbsp;\n        <input [(ngModel)]=\"hora_fin\" nbInput  size=\"tiny\" type=\"time\">\n        &nbsp;\n        &nbsp;\n      </nb-card-header>\n\n      <table *ngIf=\"reporte_tipo === 'productos'\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Fecha y Hora</th>\n            <th scope=\"col\">Producto</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Cajero</th>\n            <th scope=\"col\">Precio</th>\n            <th scope=\"col\">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <ng-container *ngFor=\"let venta of lista_respuesta\">\n            <tr *ngFor=\"let item of venta.productos\">\n              <td>\n                {{ venta.fecha }} {{ venta.hora }}\n              </td>\n              <td>\n                {{ item.nombre }}\n              </td>\n              <td class=\"text-center\">\n                {{ item.cantidad }}\n              </td>\n              <td>\n                {{ venta.cajero_nombre }}\n              </td>\n              <td>\n                {{ item.precio | currency:'S/. ' }}\n              </td>\n              <td>\n                {{ get_total_format (item.precio * item.cantidad) | currency:'S/. ' }}\n              </td>\n            </tr>\n          </ng-container>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"5\">Total:</td><td class=\"right\">{{ get_total_lista (lista_respuesta) | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n\n      <table *ngIf=\"reporte_tipo === 'categorias'\" class=\"table table-sm table-striped\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Nombre</th>\n            <th scope=\"col\">Unidades</th>\n            <th scope=\"col\">Precio</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of mapa_respuesta | keyvalue\">\n            <td>\n              {{ get_nombre (item.key) }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.cantidad }}\n            </td>\n            <td class=\"text-center\">\n              {{ item.value.precio | currency:'S/. ' }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td class=\"text-right\" colspan=\"2\">Total:</td><td class=\"right\">{{ get_total_map () | currency:'S/. ' }}</td>\n          </tr>\n        </tfoot>\n      </table>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Component, OnInit } from '@angular/core';\n\n// Services\nimport { DatabaseService } from '../../services/database.service';\nimport { NbDialogService } from '@nebular/theme';\n\n// Forms\nimport { FormGroup , FormControl, Validators } from '@angular/forms';\n\n// Nebular\nimport { NbSortDirection, NbSortRequest, NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from '@nebular/theme';\n\n@Component({\n  selector: 'ngx-usuarios',\n  templateUrl: './usuarios.component.html',\n  styleUrls: ['./usuarios.component.scss']\n})\nexport class UsuariosComponent implements OnInit {\n  usuarios: any [] = [];\n  empresas: any [] = [];\n\n  form: FormGroup;\n  loading: boolean = true;\n\n  customColumn = 'Nombre';\n  defaultColumns = [ 'Dirección', 'Tipo de usuario', 'Correo', 'Habilitado', 'Acciones' ];\n  allColumns = [ this.customColumn, ...this.defaultColumns ];\n\n  dataSource: NbTreeGridDataSource<any>;\n  sortColumn: string;\n  sortDirection: NbSortDirection = NbSortDirection.NONE;\n  constructor (\n    private database: DatabaseService,\n    private dialogService: NbDialogService,\n    private dataSourceBuilder: NbTreeGridDataSourceBuilder<any>\n  ) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup ({\n      id: new FormControl (),\n      nombre: new FormControl ('', [Validators.required]),\n      correo: new FormControl ('', [Validators.required]),\n      password: new FormControl ('', [Validators.required]),\n      direccion: new FormControl ('', [Validators.required]),\n      tipo: new FormControl ('', [Validators.required]),\n      habilitado: new FormControl (true, [Validators.required]),\n      empresa_id: new FormControl ('')\n    });\n\n    this.database.get_usuarios ().subscribe ((res: any []) => {\n      this.loading = false;\n      this.dataSource = this.dataSourceBuilder.create (this.format_list (res));\n    });\n\n    this.database.get_empresas ().subscribe ((res: any []) => {\n      this.empresas = res;\n      console.log (res);\n    });\n  }\n\n  updateSort (sortRequest: NbSortRequest): void {\n    this.sortColumn = sortRequest.column;\n    this.sortDirection = sortRequest.direction;\n  }\n\n  format_list (res: any []) {\n    let returned: any [] = [];\n    res.forEach ((i: any) => {\n      let data: any = {};\n\n      data ['data'] = i;\n      data ['Nombre'] = i.nombre;\n      data ['Dirección'] = i.direccion;\n      let tipo_usuario: string = 'Admin';\n      if (i.tipo === 1) {\n        tipo_usuario = 'Repartidor'\n      } else if (i.tipo === -1) {\n        tipo_usuario = 'Cajero';\n      } else if (i.tipo === -2) {\n        tipo_usuario = 'POS';\n      }\n      data ['Tipo de usuario'] = tipo_usuario;\n      data ['Correo'] = i.correo;\n\n      let habilitado: string = 'No';\n      if (i.habilitado) {\n        habilitado = 'Si';\n      }\n      data ['Habilitado'] = habilitado;\n      data ['Acciones'] = 'accion';\n\n      returned.push ({\n        data: data\n      })\n    });\n\n    return returned;\n  }\n\n  getSortDirection (column: string): NbSortDirection {\n    if (this.sortColumn === column) {\n      return this.sortDirection;\n    }\n    return NbSortDirection.NONE;\n  }\n\n  getShowOn(index: number) {\n    const minWithForMultipleColumns = 400;\n    const nextColumnStep = 100;\n    return minWithForMultipleColumns + (nextColumnStep * index);\n  }\n\n  change (event: any) {\n    console.log (event);\n    if (event === -3) {\n      this.form.controls ['empresa_id'].setValidators ([Validators.required]);\n    } else {\n      this.form.controls ['empresa_id'].setValidators ([]);\n    }\n\n    this.form.controls ['empresa_id'].updateValueAndValidity ();\n  }\n\n  submit (dialog: any, editar: boolean) {\n    this.loading = true;\n    let data: any = this.form.value;\n    data.habilitado = true;\n    data.tipo = Number (this.form.value.tipo);\n\n    console.log (data);\n\n    if (editar) {\n      this.database.update_usuario (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    } else {\n      data.id = this.database.createId ();\n      this.database.add_usuario (data)\n        .then (() => {\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          dialog.close ();\n          this.form.reset ();\n          this.loading = false;\n        });\n    }\n  }\n\n  registrar_dialog (dialog: any) {\n    this.dialogService.open (dialog, { context: false });\n  }\n\n  editar (item: any, dialog: any) {\n    this.form.patchValue (item);\n    this.form.controls ['correo'].disable ();\n    this.form.controls ['password'].disable ();\n    this.dialogService.open (dialog, { context: true });\n  }\n\n  delete (item: any) {\n    if (confirm(\"¿Esta seguro que desea eliminar?\")) {\n      this.database.delete_usuario (item);\n    }\n  }\n\n  cancelar (dialog: any) {\n    dialog.close ();\n  }\n\n  update_usuario (item: any) {\n    item.habilitado = !item.habilitado;\n    this.loading = true;\n\n    this.database.update_usuario (item)\n        .then (() => {\n          this.loading = false;\n        })\n        .catch ((error: any) => {\n          console.log ('error', error);\n          this.loading = false;\n        });\n  }\n}\n","<ng-template #dialog let-data let-ref=\"dialogRef\">\n  <nb-card [nbSpinner]=\"loading\">\n    <nb-card-header *ngIf=\"data === false\">\n      Registrar\n    </nb-card-header>\n    <nb-card-header *ngIf=\"data === true\">\n      Editar\n    </nb-card-header>\n\n    <nb-card-body>\n      <form [formGroup]=\"form\">\n        <div class=\"form-group\">\n          <label for=\"nombre\" class=\"label\">Nombre:</label>\n          <input type=\"text\" formControlName=\"nombre\" id=\"nombre\" nbInput fullWidth>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"direccion\" class=\"label\">Direccion:</label>\n              <input type=\"text\" formControlName=\"direccion\" id=\"direccion\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"tipo\" class=\"label\">Tipo de usuario:</label>\n              <nb-select formControlName=\"tipo\" id=\"tipo\" fullWidth (selectedChange)=\"change ($event)\">\n                <nb-option value=0>Administrador</nb-option>\n                <nb-option value=1>Repartidor</nb-option>\n                <nb-option value=-1>Cajero</nb-option>\n                <nb-option value=-3>Cajero Restaurante</nb-option>\n                <nb-option value=-2>POS (Punto de venta)</nb-option>\n              </nb-select>\n            </div>\n          </div>\n        </div>\n\n        <div *ngIf=\"form.value.tipo === '-3'\" class=\"form-group\">\n          <label for=\"tipo\" class=\"label\">Empresa:</label>\n          <nb-select formControlName=\"empresa_id\" id=\"tipo\" fullWidth>\n            <nb-option *ngFor=\"let item of empresas\" [value]=item.id>\n              {{ item.nombre }}\n            </nb-option>\n          </nb-select>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"correo\" class=\"label\">Correo:</label>\n              <input type=\"email\" formControlName=\"correo\" id=\"correo\" nbInput fullWidth>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <div class=\"form-group\">\n              <label for=\"password\" class=\"label\">Contraseña:</label>\n              <input type=\"password\" formControlName=\"password\" id=\"password\" nbInput fullWidth>\n            </div>\n          </div>\n        </div>\n      </form>\n    </nb-card-body>\n    <nb-card-footer>\n      <button nbButton (click)=\"cancelar (ref)\">Cancelar</button>\n      &nbsp;&nbsp;\n      <button nbButton status=\"success\" (click)=\"submit (ref, data)\" [disabled]=\"form.invalid\">Aceptar</button>\n    </nb-card-footer>\n  </nb-card>\n</ng-template>\n\n<nb-layout>\n  <nb-layout-column>\n    <nb-card [nbSpinner]=\"loading\">\n      <nb-card-body>\n        <nb-card-header>\n          <div class=\"row align-items-center\">\n            <div class=\"col-3\">\n              <h5>Usuarios</h5>\n            </div>\n\n            <div class=\"col-6\">\n              <input style=\"width: 100%;\" nbInput [nbFilterInput]=\"dataSource\" id=\"search\" class=\"search-input\" placeholder=\"Buscar usuario...\">\n            </div>\n\n            <div class=\"col-3\">\n              <button nbButton status=\"success\" fullWidth (click)=\"registrar_dialog (dialog)\">Registrar</button>\n            </div>\n          </div>\n        </nb-card-header>\n\n        <table class=\"table table-striped\" [nbTreeGrid]=\"dataSource\" [nbSort]=\"dataSource\" (sort)=\"updateSort($event)\">\n          <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef=\"allColumns\"></tr>\n          <tr nbTreeGridRow *nbTreeGridRowDef=\"let row; columns: allColumns\"></tr>\n\n          <ng-container [nbTreeGridColumnDef]=\"customColumn\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(customColumn)\" *nbTreeGridHeaderCellDef>\n              {{ customColumn }}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <nb-fs-icon [kind]=\"row.data.kind\" [expanded]=\"row.expanded\"></nb-fs-icon>\n              {{row.data [customColumn]}}\n            </td>\n          </ng-container>\n\n          <ng-container *ngFor=\"let column of defaultColumns; let index = index\"\n                        [nbTreeGridColumnDef]=\"column\"\n                        [showOn]=\"getShowOn(index)\">\n            <th nbTreeGridHeaderCell [nbSortHeader]=\"getSortDirection(column)\" *nbTreeGridHeaderCellDef>\n              {{column}}\n            </th>\n            <td nbTreeGridCell *nbTreeGridCellDef=\"let row\">\n              <container-element [ngSwitch]=\"column\">\n                <some-element *ngSwitchCase=\"'Habilitado'\">\n                  <button nbButton fullWidth size=\"small\" ghost (click)=\"update_usuario (row.data.data)\">\n                    {{ row.data [column] }}\n                    <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                  </button>\n                </some-element>\n                <some-element *ngSwitchCase=\"'Acciones'\">\n                  <button nbButton fullWidth size=\"small\" ghost (click)=\"editar (row.data ['data'], dialog)\">\n                    <nb-icon status=\"primary\" icon=\"edit-outline\"></nb-icon>\n                  </button>\n                </some-element>\n                <some-element *ngSwitchDefault>\n                  {{ row.data [column] }}\n                </some-element>\n              </container-element>\n              <!-- <div *ngIf=\"row.data [column] !== 'accion'\">\n                <span *ngIf=\"column === 'Precio'\">{{ row.data [column] | currency:'S/. ' }}</span>\n              <span *ngIf=\"column !== 'Precio'\"></span>\n              </div>\n\n              <div *ngIf=\"row.data [column] === 'accion'\">\n\n              </div> -->\n            </td>\n          </ng-container>\n        </table>\n      </nb-card-body>\n    </nb-card>\n  </nb-layout-column>\n</nb-layout>\n","import { Injectable } from '@angular/core';\nimport { DatabaseService } from '../services/database.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StockService {\n  // Stock\n  empresas_insumos = new Map <string, number> ();\n  menus_dia = new Map <string, number> ();\n\n  // Tmp\n  carrito_insumos_tmp: Map <string, number> = new Map <string, number> ();\n  carrito_menus_tmp: Map <string, number> = new Map <string, number> ();\n  cantidad_elementos_menu_tmp: any [] = [];\n  elementos_menu: any [] = [];\n\n  constructor (private database: DatabaseService) { }\n\n  init_stock (empresa_id: string) {\n    this.database.get_empresa_insumos_ventas (empresa_id).subscribe ((res: any []) => {\n      res.forEach ((i: any) => {\n        this.empresas_insumos.set (i.empresa_id + '-' + i.insumo_id, i.stock);\n      });\n\n      console.log (this.empresas_insumos);\n    });\n\n    this.database.get_menus_dia_stock ().subscribe ((res: any []) => {\n      res.forEach ((i: any) => {\n        this.menus_dia.set (i.carta_id + '-' + i.menu_id, i.stock);\n      });\n\n      console.log ('menus_dia', this.menus_dia);\n    });\n\n    this.database.get_menus_elementos ().subscribe ((res: any []) => {\n      this.elementos_menu = res;\n      res.forEach ((i: any) => {\n        this.cantidad_elementos_menu_tmp [i.id] = 0;\n      });\n    });\n  }\n\n  get_cantidad_elementos_menu_tmp () {\n    let cantidad_elementos_menu_tmp: any [] = [];\n\n    this.elementos_menu.forEach ((i: any) => {\n      cantidad_elementos_menu_tmp [i.id] = 0;\n    });\n\n    return cantidad_elementos_menu_tmp;\n  }\n\n  check_valid (plato: any, insumos: any [], cantidad: number) {\n    let valid = true;\n\n    insumos.forEach ((i: any) => {\n      console.log (i);\n\n      let pedidos = 0;\n      let pedidos_acuales = cantidad * i.cantidad;\n      let stock = this.check_elemento (plato.empresa_id + '-' + i.insumo_id);\n\n      if (this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id) !== undefined) {\n        pedidos = this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id);\n      }\n\n      if (stock === undefined || stock < pedidos_acuales + pedidos) {\n        valid = false;\n      }\n    });\n\n    if (valid) {\n      insumos.forEach ((i: any) => {\n        if (this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id) === undefined) {\n          this.carrito_insumos_tmp.set (plato.empresa_id + '-' + i.insumo_id, i.cantidad * cantidad);\n        } else {\n          let c = this.carrito_insumos_tmp.get (plato.empresa_id + '-' + i.insumo_id);\n          this.carrito_insumos_tmp.set (plato.empresa_id + '-' + i.insumo_id, (c + i.cantidad * cantidad));\n        }\n      });\n    }\n\n    return valid;\n  }\n\n  check_elemento_menu (id: string) {\n    return this.menus_dia.get (id);\n  }\n\n  check_menu (menu_dia: any, cantidad: number) {\n    let valid = true;\n\n    // let pedidos = 0;\n    let pedidos_acuales = cantidad;\n    let stock = this.check_elemento_menu (menu_dia.carta_id + '-' + menu_dia.menu_id);\n\n    // if (this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id) !== undefined) {\n    //   pedidos = this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id);\n    // }\n\n    if (stock === undefined || stock < pedidos_acuales) {\n      valid = false;\n    }\n\n    if (valid) {\n      this.cantidad_elementos_menu_tmp [menu_dia.elemento_menu_id] = this.cantidad_elementos_menu_tmp [menu_dia.elemento_menu_id] + 1;\n      // if (this.carrito_menus_tmp.get (menu_dia.carta_id + '-' + menu_dia.id) === undefined) {\n      //   this.carrito_menus_tmp.set (menu_dia.carta_id + '-' + menu_dia.id, cantidad);\n      // } else {\n      //   this.carrito_menus_tmp.set (menu_dia.carta_id + '-' + menu_dia.id, cantidad);\n      // }\n    }\n\n    console.log (this.cantidad_elementos_menu_tmp);\n    console.log (this.carrito_menus_tmp);\n\n    return valid;\n  }\n\n  remove_menu (menu: any) {\n    this.cantidad_elementos_menu_tmp [menu.elemento_menu_id] -= menu.cantidad;\n    let c = this.carrito_menus_tmp.get (menu.carta_id + '-' + menu.id);\n    this.carrito_menus_tmp.set (menu.carta_id + '-' + menu.id, c - menu.cantidad);\n  }\n\n  calcular_menus_completos () {\n    let mayor = 0;\n    for  (let key in this.cantidad_elementos_menu_tmp) {\n      if (this.cantidad_elementos_menu_tmp [key] > mayor) {\n        mayor = this.cantidad_elementos_menu_tmp [key];\n      }\n    }\n\n    let menus_completos: number = mayor;\n    for (let index = mayor; index > 0; index--) {\n      let completo: boolean = true;\n      for (let key in this.cantidad_elementos_menu_tmp) {\n        if (this.cantidad_elementos_menu_tmp [key] < index) {\n          completo = false;\n          menus_completos--;\n          break;\n        }\n      }\n    }\n\n    return menus_completos;\n  }\n\n  calcular_cantidad_elementos_menu_tmp_precio () {\n    let precio = 0;\n\n    this.elementos_menu.forEach ((i: any) => {\n      precio += (this.cantidad_elementos_menu_tmp [i.id] - this.calcular_menus_completos ()) * i.precio;\n    });\n\n    return precio;\n  }\n\n  check_elemento (id: string) {\n    return this.empresas_insumos.get (id);\n  }\n\n  clean_cache () {\n    this.carrito_insumos_tmp.clear ();\n    this.carrito_menus_tmp.clear ();\n    this.elementos_menu.forEach ((i: any) => {\n      this.cantidad_elementos_menu_tmp [i.id] = 0;\n    });\n  }\n\n  get_menu_elemento_precio (id: string) {\n    let returned = 0;\n\n    this.elementos_menu.forEach ((i: any) => {\n      if (i.id === id) {\n        returned = i.precio;\n      }\n    });\n\n    return returned;\n  }\n\n  verificar_agregar_carrito_promocion (empresa_id: string, insumos: any [], cantidad: number) {\n    let valid = true;\n\n    insumos.forEach ((i: any) => {\n      let pedidos = 0;\n      let pedidos_acuales = cantidad * i.cantidad;\n      let stock = this.check_elemento (empresa_id + '-' + i.insumo_id);\n\n      if (this.carrito_insumos_tmp.get (empresa_id + '-' + i.insumo_id) !== undefined) {\n        pedidos = this.carrito_insumos_tmp.get (empresa_id + '-' + i.insumo_id);\n      }\n\n      if (stock === undefined || stock < pedidos_acuales + pedidos) {\n        valid = false;\n      }\n    });\n\n    if (valid) {\n      insumos.forEach ((i: any) => {\n        if (this.carrito_insumos_tmp.get (i.empresa_id + '-' + i.insumo_id) === undefined) {\n          this.carrito_insumos_tmp.set (i.empresa_id + '-' + i.insumo_id, i.cantidad * cantidad);\n        } else {\n          let c = this.carrito_insumos_tmp.get (i.empresa_id + '-' + i.insumo_id);\n          this.carrito_insumos_tmp.set (i.empresa_id + '-' + i.insumo_id, c + (i.cantidad * cantidad));\n        }\n      });\n    }\n    // if (!valid) {\n    //   this.presentToast ('El pedido excede a nuestro stock', 'danger');\n    // }\n\n    return valid;\n  }\n}\n"],"sourceRoot":"webpack:///"}